//tealium universal tag - utag.loader ut4.39.202103251106, Copyright 2021 Tealium.com Inc. All Rights Reserved. 
var utag_condload=false;window.__tealium_twc_switch=false;
if (typeof utag == "undefined" && !utag_condload) {
  var utag = {
    id:"leroymerlinit.main",
    o:{},
    sender: {},
    send: {},
    rpt: {
      ts: {
        a: new Date()
      }
    },
    dbi: [],
    loader: {
      q: [],
      lc: 0,
      f: {},
      p: 0,
      ol: 0,
      wq: [],
      lq: [],
      bq: {},
      bk: {},
      rf: 0,
      ri: 0,
      rp: 0,
      rq: [],
      ready_q : [], 
      sendq :{"pending":0},
      run_ready_q : function(){
        for(var i=0;i<utag.loader.ready_q.length;i++){
          utag.DB("READY_Q:"+i);
          try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};
        }
      },
      lh: function(a, b, c) {
        a = "" + location.hostname;
        b = a.split(".");
        c = (/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a)) ? 3 : 2;
        return b.splice(b.length - c, c).join(".");
      },
      WQ: function(a, b, c, d, g) {
        utag.DB('WQ:' + utag.loader.wq.length);
        try {
          // this picks up a utag_data items added after utag.js was loaded
          // Gotcha: Data layer set after utag.js will not overwrite something already set via an extension.  Only "new" values are copied from utag_data
          // for case where utag_data is set after utag.js is loaded
          if(utag.udoname && utag.udoname.indexOf(".")<0){
            utag.ut.merge(utag.data,window[utag.udoname],0);
          }

          // TBD: utag.handler.RE('view',utag.data,"bwq");
          // process load rules again if this flag is set
          if(utag.cfg.load_rules_at_wait){
            utag.handler.LR(utag.data);
          }
        } catch (e) {utag.DB(e)};
	
	d=0;
        g=[]; 
        for (a = 0; a < utag.loader.wq.length; a++) {
          b = utag.loader.wq[a];
	  b.load = utag.loader.cfg[b.id].load;
          if (b.load == 4){
            //LOAD the bundled tag set to wait here
            this.f[b.id]=0;
            utag.loader.LOAD(b.id)
          }else if (b.load > 0) {
            g.push(b);
            //utag.loader.AS(b); // moved: defer loading until flags cleared
	    d++;
          }else{
            // clear flag for those set to wait that were not actually loaded
            this.f[b.id]=1;
          }
        }
        for (a = 0; a < g.length; a++) {
          utag.loader.AS(g[a]);
        }

	if(d==0){
	  utag.loader.END();
	}
      },
      AS: function(a, b, c, d) {
        utag.send[a.id] = a;
        if (typeof a.src == 'undefined') {
          a.src = utag.cfg.path + ((typeof a.name != 'undefined') ? a.name : 'ut' + 'ag.' + a.id + '.js')
        }
        a.src += (a.src.indexOf('?') > 0 ? '&' : '?') + 'utv=' + (a.v?utag.cfg.template+a.v:utag.cfg.v);
        utag.rpt['l_' + a.id] = a.src;
        b = document;
        this.f[a.id]=0;
        if (a.load == 2) {
          utag.DB("Attach sync: "+a.src);
          a.uid=a.id;
          b.write('<script id="utag_' + a.id + '" src="' + a.src + '"></scr' + 'ipt>')
          if(typeof a.cb!='undefined')a.cb();
        } else if(a.load==1 || a.load==3) {
          if (b.createElement) {
            c = 'utag_leroymerlinit.main_'+a.id;
            if (!b.getElementById(c)) {
	      d = {
	        src:a.src,
		id:c,
                uid:a.id,
		loc:a.loc
              }
              if(a.load == 3){d.type="iframe"};
	      if(typeof a.cb!='undefined')d.cb=a.cb;
              utag.ut.loader(d);
            }
          }
        }
      },
      GV: function(a, b, c) {
        b = {};
        for (c in a) {
          if (a.hasOwnProperty(c) && typeof a[c] != "function") b[c] = a[c];
        }
        return b
      },
      OU: function(a, b, c, d, f){
        try {
          if (typeof utag.data['cp.OPTOUTMULTI'] != 'undefined') {
            c = utag.loader.cfg;
            a = utag.ut.decode(utag.data['cp.OPTOUTMULTI']).split('|');
            for (d = 0; d < a.length; d++) {
              b = a[d].split(':');
              if (b[1] * 1 !== 0) {
                if (b[0].indexOf('c') == 0) {
                  for (f in utag.loader.GV(c)) {
                    if (c[f].tcat == b[0].substring(1)) c[f].load = 0
                  }
                } else if (b[0] * 1 == 0) {
                  utag.cfg.nocookie = true
                } else {
                  for (f in utag.loader.GV(c)) {
                    if (c[f].tid == b[0]) c[f].load = 0
                  }
                }
              }
            }
          }
        } catch (e) {utag.DB(e)}
      },
      RDdom: function(o){
        var d = document || {}, l = location || {};
        o["dom.referrer"] = eval("document." + "referrer");
        o["dom.title"] = "" + d.title;
        o["dom.domain"] = "" + l.hostname;
        o["dom.query_string"] = ("" + l.search).substring(1);
        o["dom.hash"] = ("" + l.hash).substring(1);
        o["dom.url"] = "" + d.URL;
        o["dom.pathname"] = "" + l.pathname;
        o["dom.viewport_height"] = window.innerHeight || (d.documentElement?d.documentElement.clientHeight:960);
        o["dom.viewport_width"] = window.innerWidth || (d.documentElement?d.documentElement.clientWidth:960);
      },
      RDcp: function(o, b, c, d){
        b = b || utag.loader.RC();
        for (d in b) {
          if (d.match(/utag_(.*)/)) {
            for (c in utag.loader.GV(b[d])) {
              o["cp.utag_" + RegExp.$1 + "_" + c] = b[d][c];
            }
          }
        }
        for (c in utag.loader.GV((utag.cl && !utag.cl['_all_']) ? utag.cl : b)) {
          if (c.indexOf("utag_") < 0 && typeof b[c] != "undefined") o["cp." + c] = b[c];
        }
        // temporary alias variables
        o["_t_visitor_id"]=o["cp.utag_main_v_id"];
        o["_t_session_id"]=o["cp.utag_main_ses_id"];
      },
      RDqp: function(o, a, b, c){
        a = location.search + (location.hash+'').replace("#","&");
        if(utag.cfg.lowerqp){a=a.toLowerCase()};
        if (a.length > 1) {
          b = a.substring(1).split('&');
          for (a = 0; a < b.length; a++) {
            c = b[a].split("=");
            if(c.length>1){
              o["qp." + c[0]] = utag.ut.decode(c[1])
            }
          }
        }
      },
      RDmeta: function(o, a, b, h){
        a = document.getElementsByTagName("meta");
        for (b = 0; b < a.length; b++) {
          try{
            h = a[b].name || a[b].getAttribute("property") || ""; 
          }catch(e){h="";utag.DB(e)};
          if (utag.cfg.lowermeta){h=h.toLowerCase()};
          if (h != ""){o["meta." + h] = a[b].content}
        }
      },
      RDva: function(o){
        // Read visitor attributes in local storage
        var readAttr = function(o, l ){
          var a = "", b;
          a = localStorage.getItem(l);
          if(!a || a=="{}")return;
          b = utag.ut.flatten({va : JSON.parse(a)});
          utag.ut.merge(o,b,1);
        }
        try{
          readAttr(o, "tealium_va" );
          readAttr(o, "tealium_va_" + o["ut.account"] + "_" + o["ut.profile"] );
        }catch(e){ utag.DB(e) }
      },
      RDut: function(o, a){
        // Add built-in data types to the data layer for use in mappings, extensions and RDva function.
        o["ut.domain"] = utag.cfg.domain;
        o["ut.version"] = utag.cfg.v;
        // i.e. "view" or "link"
        o["ut.event"] = a || "view";
        try{
          o["ut.account"] = utag.cfg.utid.split("/")[0];
          o["ut.profile"] = utag.cfg.utid.split("/")[1];
          o["ut.env"] = utag.cfg.path.split("/")[6];
        }catch(e){ utag.DB(e) }
      },
      RD: function(o, a, b, c, d) {
        utag.DB("utag.loader.RD");
        utag.DB(o);

        // only update cookie once per page
        if(!utag.loader.rd_flag){
          a = (new Date()).getTime();
          b = utag.loader.RC();
          c = a + parseInt(utag.cfg.session_timeout);
          d = a;
	
	  if(!b.utag_main){
	    b.utag_main={};
	  }else if(b.utag_main.ses_id&&typeof b.utag_main._st!="undefined"&&parseInt(b.utag_main._st)<a){
	    delete b.utag_main.ses_id;
	  }
	
          if(!b.utag_main.v_id){
            b.utag_main.v_id=utag.ut.vi(a);
          }

          if(!b.utag_main.ses_id){
            b.utag_main.ses_id=d+'';
            b.utag_main._ss=b.utag_main._pn=1;
            b.utag_main._sn=1+parseInt(b.utag_main._sn || 0);
          }else{
            d=b.utag_main.ses_id;
            b.utag_main._ss=0;
            b.utag_main._pn=1+parseInt(b.utag_main._pn);
            b.utag_main._sn=parseInt(b.utag_main._sn);
          }

          if(isNaN(b.utag_main._sn) || b.utag_main._sn<1){b.utag_main._sn=b.utag_main._pn=1}

          b.utag_main._st = c+'';

          utag.loader.SC("utag_main", {"v_id": b.utag_main.v_id, "_sn" : b.utag_main._sn, "_ss" : b.utag_main._ss, "_pn" : b.utag_main._pn + ";exp-session", "_st": c, "ses_id": d + ";exp-session"});
        }

        utag.loader.rd_flag=1;

        this.RDqp(o);
        this.RDmeta(o);
        this.RDcp(o,b);
        this.RDdom(o);
        this.RDut(o);
        this.RDva(o);
      },
      RC: function(a, x, b, c, d, e, f, g, h, i, j, k, l, m, n, o, v, ck, cv, r, s, t) {
        o = {};
        b = ("" + document.cookie != "") ? (document.cookie).split("; ") : [];
        r = /^(.*?)=(.*)$/;
        s = /^(.*);exp-(.*)$/;
        t = (new Date()).getTime();
        for (c = 0; c < b.length; c++) {
          if (b[c].match(r)) {
            ck = RegExp.$1;
            cv = RegExp.$2;
          }
          e = utag.ut.decode(cv);
          if (typeof ck!="undefined"){
            if (ck.indexOf("ulog") == 0 || ck.indexOf("utag_") == 0) {
              e = cv.split("$");
              g = [];
              j = {};
              for (f = 0; f < e.length; f++) {
                try{
                  g = e[f].split(":");
                  if (g.length > 2) {
                    g[1] = g.slice(1).join(":");
                  }
                  v = "";
                  if (("" + g[1]).indexOf("~") == 0) {
                    h = g[1].substring(1).split("|");
                    for (i = 0; i < h.length; i++) h[i] = utag.ut.decode(h[i]);
                    v = h
                  } else v = utag.ut.decode(g[1]);
                  j[g[0]] = v;
                }catch(er){utag.DB(er)};
              }
              o[ck] = {};
              for (f in utag.loader.GV(j)) {
                if (j[f] instanceof Array) {
                  n = [];
                  for (m = 0; m < j[f].length; m++) {
                    if (j[f][m].match(s)){
                      k = (RegExp.$2 == "session") ? (typeof j._st != "undefined" ? j._st : t - 1) : parseInt(RegExp.$2);
                      if (k > t) n[m] = (x == 0) ? j[f][m] : RegExp.$1;
                    }
                  }
                  j[f] = n.join("|");
                } else {
                  j[f] = "" + j[f];
                  if (j[f].match(s)) {
                    k = (RegExp.$2 == "session") ? (typeof j._st != "undefined" ? j._st : t - 1) : parseInt(RegExp.$2);
                    j[f] = (k < t) ? null : (x == 0 ? j[f] : RegExp.$1);
                  }
                }
                if (j[f]) o[ck][f] = j[f];
              }
            } else if (utag.cl[ck] || utag.cl['_all_']) {
              o[ck] = e
            }
          }
        }
        return (a) ? (o[a] ? o[a] : {}) : o;
      },
      SC: function(a, b, c, d, e, f, g, h, i, j, k, x, v) {
        if (!a) return 0;
        if (a=="utag_main" && utag.cfg.nocookie) return 0;
        v = "";
        var date = new Date();
        var exp = new Date();
        exp.setTime(date.getTime()+(365*24*60*60*1000));
        x = exp.toGMTString();
        if (c && c == "da") {
          x = "Thu, 31 Dec 2009 00:00:00 GMT";
        } else if (a.indexOf("utag_") != 0 && a.indexOf("ulog") != 0) {
          if (typeof b != "object") {
            v = b
          }
        } else {
          d = utag.loader.RC(a, 0);
          for (e in utag.loader.GV(b)) {
            f = "" + b[e];
            if (f.match(/^(.*);exp-(\d+)(\w)$/)) {
              g = date.getTime() + parseInt(RegExp.$2) * ((RegExp.$3 == "h") ? 3600000 : 86400000);
              if (RegExp.$3 == "u") g = parseInt(RegExp.$2);
              f = RegExp.$1 + ";exp-" + g;
            }
            if (c == "i") {
              if (d[e] == null) d[e] = f;
            } else if (c == "d") delete d[e];
            else if (c == "a") d[e] = (d[e] != null) ? (f - 0) + (d[e] - 0) : f;
            else if (c == "ap" || c == "au") {
              if (d[e] == null) d[e] = f;
              else {
                if (d[e].indexOf("|") > 0) {
                  d[e] = d[e].split("|")
                }
                g = (d[e] instanceof Array) ? d[e] : [d[e]];
                g.push(f);
                if (c == "au") {
                  h = {};
                  k = {};
                  for (i = 0; i < g.length; i++) {
                    if (g[i].match(/^(.*);exp-(.*)$/)) {
                      j = RegExp.$1;
                    }
                    if (typeof k[j] == "undefined") {
                      k[j] = 1;
                      h[g[i]] = 1;
                    }
                  }
                  g = [];
                  for (i in utag.loader.GV(h)) {
                    g.push(i);
                  }
                }
                d[e] = g
              }
            } else d[e] = f;
          }
          h = new Array();
          for (g in utag.loader.GV(d)) {
            if (d[g] instanceof Array) {
              for (c = 0; c < d[g].length; c++) {
                d[g][c] = encodeURIComponent(d[g][c])
              }
              h.push(g + ":~" + d[g].join("|"))
            } else h.push((g + ":").replace(/[\,\$\;\?]/g,"") + encodeURIComponent(d[g]))
          }
          if (h.length == 0) {
            h.push("");
            x = ""
          }
          v = (h.join("$"));
        }
        document.cookie = a + "=" + v + ";path=/;domain=" + utag.cfg.domain + ";expires=" + x;
        return 1
      },
      LOAD: function(a, b, c, d) {
        //utag.DB('utag.loader.LOAD:' + a);
        if(!utag.loader.cfg){
           return
        }
	if(this.ol==0){
          if(utag.loader.cfg[a].block && utag.loader.cfg[a].cbf){
            this.f[a] = 1;
	    delete utag.loader.bq[a];
          }
	  for(b in utag.loader.GV(utag.loader.bq)){
            if(utag.loader.cfg[a].load==4 && utag.loader.cfg[a].wait==0){
              utag.loader.bk[a]=1;
              utag.DB("blocked: "+ a);
            }
	    utag.DB("blocking: " + b);
	    return;
	  }
	  utag.loader.INIT();
	  return;
	}
        utag.DB('utag.loader.LOAD:' + a);

        if (this.f[a] == 0) {
          this.f[a] = 1;
      	
	  if(utag.cfg.noview!=true){
	    if(utag.loader.cfg[a].send){
              utag.DB("SENDING: "+a);
              try{
                if (utag.loader.sendq.pending > 0 && utag.loader.sendq[a]) {
                  utag.DB("utag.loader.LOAD:sendq: "+a);
                  while( d = utag.loader.sendq[a].shift() ) {
                    utag.DB(d);
                    utag.sender[a].send(d.event, utag.handler.C(d.data));
                    utag.loader.sendq.pending--;
                  }
                } else {
                  utag.sender[a].send('view',utag.handler.C(utag.data));

                }
 
		utag.rpt['s_' + a] = 0;
	      } catch (e) {
                utag.DB(e);
	        utag.rpt['s_' + a] = 1;
	      }
	    }
	  }
	  if(utag.loader.rf==0)return;
          for (b in utag.loader.GV(this.f)) {
            if (this.f[b] == 0 || this.f[b] == 2) return
          }
	  utag.loader.END();
        }
      },
      EV: function(a, b, c, d) {
        if (b == "ready") {
          if(!utag.data){
            try {
              utag.cl = {'_all_': 1};
              utag.loader.initdata();    
              utag.loader.RD(utag.data);
            }catch(e){ utag.DB(e) };
          }
          if ( (document.attachEvent || utag.cfg.dom_complete) ? document.readyState === "complete" : document.readyState !== "loading" ) setTimeout(c, 1);
          else {
            utag.loader.ready_q.push(c);
            var RH;

            if(utag.loader.ready_q.length<=1){
              if (document.addEventListener) {
                RH = function() {
                  document.removeEventListener("DOMContentLoaded", RH, false);
                  utag.loader.run_ready_q()
                };
                if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded", RH, false);
                window.addEventListener("load", utag.loader.run_ready_q, false);
              } else if (document.attachEvent) {
                RH = function() {
                  if (document.readyState === "complete") {
                    document.detachEvent("onreadystatechange", RH);
                    utag.loader.run_ready_q()
                  }
                };
                document.attachEvent("onreadystatechange", RH);
                window.attachEvent("onload", utag.loader.run_ready_q);
              }
            }
          }
        } else {
          if (a.addEventListener) {
            a.addEventListener(b, c, false)
          } else if (a.attachEvent) {
            a.attachEvent(((d == 1) ? "" : "on") + b, c)
          }
        }
      },
      END: function(b, c, d, e, v, w){
        if(this.ended){return};
        this.ended=1;
	utag.DB("loader.END");
        b = utag.data;
        // add the default values for future utag.link/view calls
	if(utag.handler.base && utag.handler.base!='*'){
          e = utag.handler.base.split(",");
          for (d = 0; d < e.length; d++) {
            if (typeof b[e[d]] != "undefined") utag.handler.df[e[d]] = b[e[d]]
          }
        }else if (utag.handler.base=='*'){
           utag.ut.merge(utag.handler.df,b,1);
        }

        utag.rpt['r_0']="t";
	for(var r in utag.loader.GV(utag.cond)){
          utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";
        }

        utag.rpt.ts['s'] = new Date();
	

        v = ".tiqcdn.com";
        w = utag.cfg.path.indexOf(v);
        if(w>0 && b["cp.utag_main__ss"]==1 && !utag.cfg.no_session_count)utag.ut.loader({src:utag.cfg.path.substring(0,w)+v+"/ut"+"ag/tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
        
        if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");
	utag.handler.INIT();
      }
    },
    DB: function(a, b) {
      // return right away if we've already checked the cookie
      if(utag.cfg.utagdb===false){
        return;
      }else if(typeof utag.cfg.utagdb=="undefined"){
        utag.db_log=[];
        b = document.cookie+'';
        utag.cfg.utagdb=((b.indexOf('utagdb=true') >= 0)?true:false);
      }
      if(utag.cfg.utagdb===true){
        var t;
        if(utag.ut.typeOf(a) == "object"){
          t=utag.handler.C(a)
        }else{
          t=a
        }
        utag.db_log.push(t);
        try{console.log(t)}catch(e){}
      }
    },
    RP: function(a, b, c) {
      if (typeof a != 'undefined' && typeof a.src != 'undefined' && a.src != '') {
        b = [];
        for (c in utag.loader.GV(a)) {
          if (c != 'src') b.push(c + '=' + escape(a[c]))
        }
        this.dbi.push((new Image()).src = a.src + '?utv=' + utag.cfg.v + '&utid=' + utag.cfg.utid + '&' + (b.join('&')))
      }
    },
    view: function(a,c,d) {
      return this.track({event:'view', data:a, cfg:{cb:c,uids:d}})
    },
    link: function(a,c,d) {
      return this.track({event:'link', data:a, cfg:{cb:c,uids:d}})
    },
    track: function(a,b,c,d) {
        
      if (typeof a == "string") a = { event: a, data: b, cfg: {cb: c} };
      // fix iadvize
      if (typeof a != "string" && a.iadvizecarrello) a = { event: "iadvizecarrello", data: a, cfg: {cb: c} };

      for(d in utag.loader.GV(utag.o)){
        try{
          utag.o[d].handler.trigger(a.event || "view", a.data || a, a.cfg)
        }catch(e){utag.DB(e)};
      }
      if(a.cfg && a.cfg.cb)try{a.cfg.cb()}catch(e){utag.DB(e)};
      return true
    },
    handler: {
      base: "",
      df: {},
      o: {},
      send: {},
      iflag: 0,
      INIT: function(a, b, c) {
        utag.DB('utag.handler.INIT');
        if(utag.initcatch){
          utag.initcatch=0;
          return
        }
        this.iflag = 1;
        a = utag.loader.q.length;
        if (a > 0) {
          utag.DB("Loader queue");
          for (b = 0; b < a; b++) {
            c = utag.loader.q[b];
            utag.handler.trigger(c.a, c.b, c.c)
          }
        }
        //##UTABSOLUTELAST##
      },
      test: function() {
        return 1
      },
      // reset and run load rules
      LR: function(b){
        utag.DB("Load Rules");
        for(var d in utag.loader.GV(utag.cond)){
          utag.cond[d]=false;
        }
        utag.DB(utag.data);
        utag.loader.loadrules();
        utag.DB(utag.cond);
        utag.loader.initcfg();
        // use the OPTOUTMULTI cookie value to override load rules
        utag.loader.OU();
	for(var r in utag.loader.GV(utag.cond)){
          utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";
        }
      },
      // The third param "c" is a string that defines the location i.e. "blr" == before load rules
      RE:function(a,b,c,d,e,f,g){
        if(c!="alr" && !this.cfg_extend){
          return 0; 
        }
        utag.DB("RE: "+c);
        if(c=="alr")utag.DB("All Tags EXTENSIONS");
        utag.DB(b);
        if(typeof this.extend != "undefined"){
          g=0;
          for (d = 0; d < this.extend.length; d++) {
            try {
              /* Extension Attributes */
              e=0;
              if(typeof this.cfg_extend!="undefined"){
                f=this.cfg_extend[d];
                if(typeof f.count == "undefined")f.count=0;
                if(f[a]==0 || (f.once==1 && f.count>0) || f[c]==0){
                  e=1
                }else{
                  if(f[c]==1){g=1};
                  f.count++
                }
              }
              if(e!=1){
                this.extend[d](a, b);
                utag.rpt['ex_' + d] = 0
              }
            } catch (er) {
              utag.DB(er);
              utag.rpt['ex_' + d] = 1;
	      utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});
            }
          }
          utag.DB(b);
          return g;
        }
      },
      trigger: function(a, b, c, d, e, f) {
        utag.DB('trigger:'+a+(c && c.uids?":"+c.uids.join(","):""));
        b = b || {};
        utag.DB(b);

        if (!this.iflag) {
          utag.DB("trigger:called before tags loaded");
          for (d in utag.loader.f) {
            if (!(utag.loader.f[d] === 1)) utag.DB('Tag '+d+' did not LOAD')
          }
          utag.loader.q.push({
            a: a,
            b: utag.handler.C(b),
            c: c
          });
          return;
        }
        utag.cfg.noview = false;

        utag.ut.merge(b,this.df,0);
        // update values for AJAX pages
        utag.loader.RDqp(b);
        utag.loader.RDcp(b);
        utag.loader.RDdom(b);
        utag.loader.RDmeta(b);
        utag.loader.RDut(b,a);
        utag.loader.RDva(b);

        function sendTag(a, b, d){
          try {
            if(typeof utag.sender[d]!="undefined"){
              utag.DB("SENDING: "+d);
              utag.sender[d].send(a, utag.handler.C(b));
	      utag.rpt['s_' + d] = 0;
            }else if (utag.loader.cfg[d].load!=2 && utag.loader.cfg[d].s2s!=1){
              // utag.link calls can load in new tags
              utag.loader.sendq[d] = utag.loader.sendq[d] || [];
              utag.loader.sendq[d].push({"event":a, "data":utag.handler.C(b)});
              utag.loader.sendq.pending++;
              utag.loader.AS({id : d, load : 1}); 
            }
          }catch (e) {utag.DB(e)}
        }
        
        // utag.track( {event : ”view”, data: {myvar : “myval” }, cfg: {uids : [1,2,10] } } );
        if(c && c.uids){
          this.RE(a,b,"alr");
          for(f=0;f<c.uids.length;f++){
            d=c.uids[f];
            // bypass load rules
            sendTag(a, b, d);
          }
        }else if(utag.cfg.load_rules_ajax){
          // right now, load rules use utag.data (replace items in utag.data with items in b)
          this.RE(a,b,"blr");
          utag.ut.merge(utag.data,b,1);
          // clear and re-run load rules
          this.LR(b);
          this.RE(a,b,"alr");
          // TBD: Run through the "bwq" Extensions again here? (For now, require "bwq" is also set to "run once"?) 
          for(f = 0; f < utag.loader.cfgsort.length; f++){
            d = utag.loader.cfgsort[f];
            if(utag.loader.cfg[d].load && utag.loader.cfg[d].send){
              sendTag(a, b, d);
            }
          }
        }else{
          // legacy behavior
          this.RE(a,b,"alr");
          for (d in utag.loader.GV(utag.sender)) {
            sendTag(a, b, d);
          }
        }
        this.RE(a,b,"end");
        // update end of session timestamp in cookie
        utag.loader.SC("utag_main", { "_st": ((new Date()).getTime() + parseInt(utag.cfg.session_timeout)) });
      },
      // "sort-of" copy
      C: function(a, b, c) {
        b = {};
        for (c in utag.loader.GV(a)) {
          if(a[c] instanceof Array){
            b[c] = a[c].slice(0)
          }else{
            // objects are still references to the original (not copies)
            b[c] = a[c]
          }
        }
        return b
      }
    },
    ut:{
      pad: function(a,b,c,d){
        a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return ""+d+a
      },
      vi: function(t,a,b){
        if(!utag.v_id){
          a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;
        }
        return utag.v_id
      },
      hasOwn: function(o, a) {
        return o != null && Object.prototype.hasOwnProperty.call(o, a)
      },
      isEmptyObject: function(o, a) {
	for (a in o) {
          if (utag.ut.hasOwn(o,a))return false
        }
        return true
      },
      isEmpty: function(o) {
        var t = utag.ut.typeOf(o);
        if ( t == "number" ){
          return isNaN(o)
        }else if ( t == "boolean" ){
          return false
        }else if ( t == "string" ){
          return o.length === 0
        }else return utag.ut.isEmptyObject(o)
      },
      typeOf: function(e) {
        return ({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
      },
      flatten: function(o){
        // stop when arriving at a string, array, boolean, number (float or integer)
        var a = {}; 
        function r(c, p) {
          if (Object(c) !== c || c instanceof Array) {
            a[p] = c;
          } else {
            if(utag.ut.isEmptyObject(c)){
              //a[p] = {};
            }else{
              for (var d in c) {
                r(c[d], p ? p+"."+d : d);
              }
            }
          }
        }
        r(o, "");

        return a;
      },
      merge: function(a, b, c, d) {
        if(c){
          for(d in utag.loader.GV(b)){
            a[d] = b[d]
          }
        }else{
          for(d in utag.loader.GV(b)){
            if(typeof a[d]=="undefined")a[d] = b[d]
          }
        }
      },
      decode: function(a, b) {
        b = "";
        try{b = decodeURIComponent(a)}catch(e){utag.DB(e)};
        if (b == ""){b = unescape(a)};
        return b
      },
      error: function(a, b, c){
        if(typeof utag_err!="undefined"){
          utag_err.push(a)
        }
      },
      loader: function(o, a, b, c, l) {
        a=document;
        if (o.type=="iframe") {
          b = a.createElement("iframe");
          o.attrs = o.attrs || { "height" : "1", "width" : "1", "style" : "display:none" };
          for( l in utag.loader.GV(o.attrs) ){
            b.setAttribute( l, o.attrs[l] )
          }
          b.setAttribute("src", o.src);
        }else if (o.type=="img"){
          utag.DB("Attach img: "+o.src);
          b=new Image();b.src=o.src;
          return;
        }else{
          b = a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";
          for( l in utag.loader.GV(o.attrs) ){
            b[l] = o.attrs[l]
          }
          b.src = o.src;
        }
        if(o.id){b.id=o.id};
        if (typeof o.cb=="function") {
          if(b.addEventListener) {
            b.addEventListener("load",function(){o.cb()},false);
          }else {
            // old IE support
            b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};
          }
        }
        l = o.loc || "head";
        c = a.getElementsByTagName(l)[0];
        if (c) {
          utag.DB("Attach to "+l+": "+o.src);
          if (l == "script") {
            c.parentNode.insertBefore(b, c);
          } else {
            c.appendChild(b)
          }
        }
      }
    }
  };
  utag.o['leroymerlinit.main']=utag;
  utag.cfg = {
    template : "ut4.39.",
    // Enable load rules ajax feature by default
    load_rules_ajax: true,
    load_rules_at_wait: false,
    lowerqp: false,
    //noview: ##UTNOVIEW##,
    session_timeout: 1800000,
    readywait: 0,
    noload: 0,
    domain: utag.loader.lh(),
    path: "//tags.tiqcdn.com/utag/leroymerlinit/main/prod/",
    utid: "leroymerlinit/main/202103251106"
  };
  utag.cfg.v = utag.cfg.template + "202103251106";
  utag.cond={18:0,30:0,31:0,33:0,34:0,35:0,36:0,6:0};
utag.pagevars=function(ud){ud = ud || utag.data;try{ud['js_page.__APP_STATE__']=__APP_STATE__}catch(e){utag.DB(e)};try{ud['js_page.navigator.userAgent']=navigator.userAgent}catch(e){utag.DB(e)};};
utag.loader.chkCanRunTime = function(s,e,d,t,o,i) {   try {       o = {           is : [s,e],           dt : [],           tm : [],           hd : 0,           ms : 0       };       for (i=0;i<2;i++){           d = o.is[i].substring(0,8);           t = o.is[i].substring(8);           o.dt[i] = new Date();           if (d !== '--------'){               o.dt[i].setFullYear(d.substring(0,4));               o.dt[i].setMonth(parseInt(d.substring(4,6))-1);               o.dt[i].setDate(d.substring(6,8));           }           if (t !== '----'){               o.dt[i].setHours(t.substring(0,2));               o.dt[i].setMinutes(t.substring(2,4));           } else {               o.dt[i].setHours(o.hd);               o.dt[i].setMinutes(o.ms);           }           o.dt[i].setSeconds(o.ms);           o.tm[i] = o.dt[i].getTime();           o.hd = 23;           o.ms = 59;       }       o.n = new Date().getTime();       return (o.n >= o.tm[0] && o.n <= o.tm[1]);   } catch (e) {       return false;   }};utag.loader.initdata = function() {   try {       utag.data = (typeof utag_data != 'undefined') ? utag_data : {};       utag.udoname='utag_data';    } catch (e) {       utag.data = {};       utag.DB('idf:'+e);   }};utag.loader.loadrules = function(_pd,_pc) {var d = _pd || utag.data; var c = _pc || utag.cond;for (var l in utag.loader.GV(c)) {switch(l){
case '18':try{c[18]|=(d['dom.pathname'].toString().toLowerCase()=='/checkout/grazie'.toLowerCase())}catch(e){utag.DB(e)}; break;
case '30':try{c[30]|=(typeof d['from']=='undefined')||(d['from'].toString().toLowerCase().indexOf('app'.toLowerCase())<0)}catch(e){utag.DB(e)}; break;
case '31':try{c[31]|=(d['from'].toString().toLowerCase().indexOf('app'.toLowerCase())>-1)}catch(e){utag.DB(e)}; break;
case '33':try{c[33]|=(d['dom.pathname'].toString().toLowerCase().indexOf('checkout/initapp'.toLowerCase())<0)}catch(e){utag.DB(e)}; break;
case '34':try{c[34]|=(typeof d['qp.utm_source']!='undefined'&&d['qp.utm_source']!=''&&d['qp.utm_source'].toString().toLowerCase()=='armis'.toLowerCase())||(typeof d['cp.armis_utm_source']!='undefined'&&d['cp.armis_utm_source']!=''&&d['cp.armis_utm_source'].toString().toLowerCase()=='armis'.toLowerCase())}catch(e){utag.DB(e)}; break;
case '35':try{c[35]|=(d['prod_action'].toString().toLowerCase().indexOf('detail'.toLowerCase())>-1)}catch(e){utag.DB(e)}; break;
case '36':try{c[36]|=(d['dom.url'].toString().toLowerCase().indexOf('leroymerlin.it/live-weber'.toLowerCase())>-1)}catch(e){utag.DB(e)}; break;
case '6':try{c[6]|=(d['dom.domain']=='www-stage.lm.byte-code.com')||(d['dom.domain']=='www-preprod.lm.byte-code.com')||(d['dom.domain']=='www-qa.lm.byte-code.com')||(d['dom.domain']=='www-qa.leroymerlin.it')||(d['dom.domain']=='www.leroymerlin.it')||(d['dom.domain']=='dev-cliente.leroymerlin.it')}catch(e){utag.DB(e)}; break;}}};utag.pre=function() {    utag.loader.initdata();utag.pagevars();    try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};    utag.loader.loadrules();    };utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();
  utag.handler.extend=[function(a,b){ try{ if(1){
var env = b['ut.env'],
    today = new Date(),
    range = {
      'dev': {
	'start': new Date(2017, 4, 23, 15, 10, 0, 0),
	'end': new Date(2017, 4, 23, 15, 30, 0, 0)
      },
      'qa': {
	'start': new Date(2017, 4, 24, 11, 0, 0, 0),
	'end': new Date(2017, 4, 24, 15, 0, 0, 0)
      },
      'prod': {
	'start': new Date(2017, 4, 25, 0, 0, 0, 0),
	'end': new Date(2017, 4, 25, 23, 59, 0, 0)
      }
    };

if (today > range[env].start && today < range[env].end) {
  b['date_range'] = 'vero';
} else {
  b['date_range'] = 'falso';
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['qp.tealiumCollect'].toString().toLowerCase()=='vero'.toLowerCase()){document.cookie="_tdcod="+b['qp.tealiumCollect']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp._tdcod']=b['qp.tealiumCollect'];}} catch(e){ utag.DB(e); } },
function(a,b){ try{ if(1){
document.cookie = "last_5_site=;path=/;domain=.leroymerlin.it";
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){
if (typeof utag.runonce["dropdown"] == 'undefined') {
    utag.runonce["dropdown"] = 1;
    var iconcarrello_button = document.getElementById("PREVIEW_CART_DESKTOP")
    var sent = false;
    iconcarrello_button.onmouseover = function () {
        setTimeout(function () {
            var gotocarrello_button = document.getElementById("PREVIEW_CART_DESKTOP__BUTTON");
            if (gotocarrello_button && sent == false) {
                var dl = {
                    "page_name": ["checkout", "carrello", "dropdown"],
                    "cart_empty": utag.data["cart_empty"] ? utag.data["cart_empty"] : "",
                    "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                    "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                    "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                    "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                    "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                    "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                    "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                    "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                    "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                    "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                    "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : ""
                }
                gotocarrello_button.onmousedown = function () {
                    var dl = {
                        "page_name": ["checkout", "carrello", "dropdown"],
                        "cart_empty": utag.data["cart_empty"] ? utag.data["cart_empty"] : "",
                        "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                        "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                        "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                        "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                        "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                        "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                        "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                        "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                        "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                        "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                        "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : "",
                        "event_type": "carrello dropdown",
                        "event_action": "vai a carrello"
                    }
                    utag.link(dl);
                };
    			
                var item = 15;
                for (var i = 0; i < item; ++i) {
                    var imgp = "PREVIEW_CART_DESKTOP__IMG_LINK__" + i;
                    var linkp = "PREVIEW_CART_DESKTOP__TEXT_LINK__" + i;
                    var movep = "PREVIEW_CART_DESKTOP__MOVE_PRODUCT__" + i;
                    var imgpObj,
                    linkpObj,
                    movepObj,
                    p,
                    pID;
            
                    imgpObj = document.getElementById(imgp);
                    linkpObj = document.getElementById(linkp);
                    movepObj = document.getElementById(movep);
            
                    var dl = {
                        "page_name": ["checkout", "carrello", "dropdown"],
                        "cart_empty": utag.data["cart_empty"] ? utag.data["cart_empty"] : "",
                        "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                        "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                        "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                        "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                        "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                        "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                        "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                        "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                        "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                        "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                        "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : "",
                        "event_type": "carrello dropdown"
                    }
                    if (linkpObj) {

                        linkpObj.onmousedown = function () {
                            var phref = this.href;
                           // p = phref.substring(phref.search(/-([0-9]*)-p/));
                            //pID = p.replace("-", "").replace("-p", "");
                            //console.log(pID);                            
                            dl.event_action = "product_click";
                            //dl.event_label = pID;
                            utag.link(dl);
                        }
                        imgpObj.onmousedown = function () {
                            //var phref = this.href;
                            //p = phref.substring(phref.search(/-([0-9]*)-p/));
                            //pID = p.replace("-", "").replace("-p", "");
                            dl.event_action = "product_click";
                            //dl.event_label = pID;
                            utag.link(dl);
                        }
                        movepObj.onmousedown = function () {
                            /*var phref = this.href;
                            p = phref.substring(phref.search(/-([0-9]*)-p/));
                            pID = p.replace("-", "").replace("-p", "");*/
                            // var phref=document.getElementById("PREVIEW_CART_DESKTOP__TEXT_LINK__"+this.id.slice(-1)).href;
                            //p = phref.substring(phref.search(/-([0-9]*)-p/));
                            //pID = p.replace("-", "").replace("-p", "");
                            dl.event_action = "wishlist_add";
                            //dl.event_label = pID;
                            utag.link(dl);
                        }
                    }
                }
                utag.view(dl);
                sent = true;
            }else{}
        }, 1500);
    }
    
    iconcarrello_button.onmouseleave = function () {
        sent = false;
    };
    
    var dropdownActionToProd = function () {

    }
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){
if (typeof utag.runonce["dropdownwishlist"] == 'undefined') {
    utag.runonce["dropdownwishlist"] = 1;
    var iconwishlist_button = document.getElementById("PREVIEW_WISHLIST_DESKTOP")
    var sent = false;
    iconwishlist_button.onmouseover = function () {
        setTimeout(function () {
            var gotowishlist_button = document.getElementById("PREVIEW_WISHLIST_DESKTOP__BUTTON");
            if (gotowishlist_button && sent == false) {
                var dl = {
                    "page_name": ["mylm", "wishlist", "dropdown"],
                    "cart_empty": utag.data["cart_empty"] ? utag.data["WISHLIST_empty"] : "",
                    "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                    "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                    "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                    "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                    "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                    "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                    "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                    "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                    "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                    "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                    "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : ""
                }
                gotowishlist_button.onmousedown = function () {
                    var dl = {
                        "page_name": ["mylm", "wishlist", "dropdown"],
                        "cart_empty": utag.data["cart_empty"] ? utag.data["WISHLIST_empty"] : "",
                        "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                        "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                        "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                        "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                        "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                        "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                        "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                        "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                        "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                        "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                        "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : "",
                        "event_type": "wishlist dropdown",
                        "event_action": "vai a wishlist"
                    }
                    utag.link(dl);
                };

                var item = 15;
                for (var i = 0; i < item; ++i) {
                    var imgp = "PREVIEW_WISHLIST_DESKTOP__IMG_LINK__" + i;
                    var linkp = "PREVIEW_WISHLIST_DESKTOP__TEXT_LINK__" + i;
                    var movep = "PREVIEW_WISHLIST_DESKTOP__MOVE_PRODUCT__" + i;
                    var imgpObj,
                    linkpObj,
                    movepObj,
                    p,
                    pID;

                    imgpObj = document.getElementById(imgp);
                    linkpObj = document.getElementById(linkp);
                    movepObj = document.getElementById(movep);

                    var dl = {
                        "page_name": ["mylm", "wishlist", "dropdown"],
                        "cart_empty": utag.data["WISHLIST_empty"] ? utag.data["WISHLIST_empty"] : "",
                        "navigation_store": utag.data["navigation_store"] ? utag.data["navigation_store"] : "",
                        "page_layout": utag.data["page_layout"] ? utag.data["page_layout"] : "",
                        "cust_tipo": utag.data["cust_tipo"] ? utag.data["cust_tipo"] : "",
                        "cust_tipo_idea": utag.data["cust_tipo_idea"] ? utag.data["cust_tipo_idea"] : "",
                        "cust_id_account": utag.data["cust_id_account"] ? utag.data["cust_id_account"] : "",
                        "cust_id_idea": utag.data["cust_id_idea"] ? utag.data["cust_id_idea"] : "",
                        "cust_id_mylm": utag.data["cust_id_mylm"] ? utag.data["cust_id_mylm"] : "",
                        "cust_programma_idea": utag.data["cust_programma_idea"] ? utag.data["cust_programma_idea"] : "",
                        "cust_cap": utag.data["cust_cap"] ? utag.data["cust_cap"] : "",
                        "cust_negozio": utag.data["cust_negozio"] ? utag.data["cust_negozio"] : "",
                        "cust_sesso": utag.data["cust_sesso"] ? utag.data["cust_sesso"] : "",
                        "event_type": "wishlist dropdown"
                    }
                    if (linkpObj) {

                        linkpObj.onmousedown = function () {
                            var phref = this.href;
                            p = phref.substring(phref.search(/-([0-9]*)-p/));
                            pID = p.replace("-", "").replace("-p", "");
                            dl.event_action = "product_click";
                            dl.event_label = pID;
                            utag.link(dl);
                        }
                        imgpObj.onmousedown = function () {
                            var phref = this.href;
                            p = phref.substring(phref.search(/-([0-9]*)-p/));
                            pID = p.replace("-", "").replace("-p", "");
                            dl.event_action = "product_click";
                            dl.event_label = pID;
                            utag.link(dl);
                        }
                        movepObj.onmousedown = function () {
                            var phref = this.href;
                            p = phref.substring(phref.search(/-([0-9]*)-p/));
                            pID = p.replace("-", "").replace("-p", "");
                            dl.event_action = "add";
                            dl.event_label = pID;
                            utag.link(dl);
                        }
                    }
                }
                utag.view(dl);
                sent = true;
            } else {}
        }, 1500);
    }

    iconwishlist_button.onmouseleave = function () {
        sent = false;
    };
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){try{b['ext_tealium_environment']=utag.cfg.path.split('/')[6];}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['ext_tealium_environment']!='undefined'&&b['ext_tealium_environment']!=''){try{b['ext_tealium_profile_version']=(function () { var pezzi = utag.cfg.utid.split("/"); return pezzi[0] + "/" + pezzi[1] + "/" + b.ext_tealium_environment + "/" + pezzi[2] })()}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'UA-33701339-14'},{'qa':'UA-33701339-14'},{'prod':'UA-33701339-14,UA-33701339-1'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_property_lm']=c[e][f];m=true};};if(m)break};if(!m)b['ext_property_lm']='';   }},
function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'leroymerlin-test-by.accengage.net'},{'qa':'leroymerlin-test-by.accengage.net'},{'prod':'leroymerlin-by.accengage.net'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['accengage_env']=c[e][f];m=true};};if(m)break};if(!m)b['accengage_env']='leroymerlin-test-by.accengage.net';   }},
function(a,b){
if (typeof b['cp.trans_dd'] != 'undefined') {
        var trackedTransactions = b['cp.trans_dd'].split("|");
	if (trackedTransactions.indexOf(b.trans_id) > -1) {
	   b['ext_flag_trans_dd'] = "vero";
	}
}


},
function(a,b){
if (utag && !utag.helpers) {
	utag.helpers = {};
	var helpers = utag.helpers;

	helpers.productAvailability = function (onlineAvailabilities, storeAvailabilities) {
		var result_array = [],
		mapping = {
			"ecomm0-c&r0": "ECOMM_NO, C&R_NO",
			"ecomm0-c&r1": "ECOMM_NO, C&R_SI",
			"ecomm1-c&r0": "ECOMM_SI, C&R_NO",
			"ecomm1-c&r1": "ECOMM_SI, C&R_SI"
		},
		key;

		// da specifiche, onlineAvailabilities e storeAvailabilities
		// devono avere la stessa lunghezza
		for (var i = 0; i < onlineAvailabilities.length; i++) {
			key = "ecomm" + onlineAvailabilities[i] + "-c&r" + storeAvailabilities[i];
			result_array.push(mapping[key]);
		}
		return result_array;
	};

	helpers.addInternalSearchKeyword = function (page, paramName, kw) {
		//var urlParams = new URLSearchParams(window.location.search);
		// aggiunge al pagename virtuale `page' la keyword di ricerca `kw' come parametro query chiamato `paramName'
		var sep;
		if (typeof kw[0] == "undefined") {
			return page;
		}
		sep = '?';
		var page_qs = page;
		for (var r = 0; r < paramName.length; r++) {
			if (page_qs.indexOf('?') != -1) {
				sep = '&';
			}
			//if (kw[r]!="") {
			page_qs = page_qs + sep + paramName[r] + '=' + kw[r];
			//}

		}

		return page_qs;
	};

	helpers.da01aSiNo = function (arr, logicaInversa) {
		var results = [],
		res;
		for (var i = 0; i < arr.length; i++) {
			if (arr[i] === 1 || arr[i] === '1') {
				res = logicaInversa ? 'NO' : 'SI';
			} else {
				res = logicaInversa ? 'SI' : 'NO';
			}
			results.push(res);
		}
		return results;
	};

	helpers.promoCreative = function (creative, comunicazione) {
		var result_array = [],
		key;
		if (typeof creative == "string") {
			creative = [creative];
		}
		if (typeof comunicazione == "string") {
			comunicazione = [comunicazione];
		}
		for (var i = 0; i < creative.length; i++) {
			key = creative[i] + "|" + comunicazione[i];
			result_array.push(key);
		}
		return result_array;
	};

	helpers.campagnaInterna = function (creative, comunicazione, name, id, pos) {
		var result_array = [],
		key;
		var separatore = "#";
		for (var i = 0; i < creative.length; i++) {
			//key = id[i]+ separatore + name[i]+ separatore + pos[i]+ separatore + creative[i] + separatore + comunicazione[i];
			key = id[i] + separatore + name[i] + separatore + creative[i];
			result_array.push(key);
		}
		return result_array[0];
	};

	helpers.group = function (arrLiv, separatore) {
		var results = [];
		for (var i = 0; i < arrLiv.length; i++) {
			if (typeof arrLiv[i] != "undefined" && arrLiv[i] !== "") {
				results.push(arrLiv[i]);
			}
		}
		var r = results.length > 0 ? results.join(separatore) : "not-set";
		return r;
	};

	helpers.goalqueryparam = {
		mylm_registration: {
			match: "1",
			qs: "reg",
			qsv: "OK"
		},
		idea_registration: {
			match: "1",
			qs: "idea",
			qsv: "OK"
		},
		newsletter_registration: {
			match: "1",
			qs: "newsletter",
			qsv: "OK"
		},
		mylm_registration_start: {
			match: "1",
			qs: "reg",
			qsv: "START"
		},
		idea_registration_start: {
			match: "1",
			qs: "idea",
			qsv: "START"
		},
		newsletter_registration_start: {
			match: "1",
			qs: "newsletter",
			qsv: "START"
		},
		confirmation_registration: {
			match: "1",
			qs: "confirm",
			qsv: "OK"
		} ,
		type_newsletter : {
			match :"banner", 
			qs:"type_newsletter", 
			qsv: "banner"
		},
		prov_newsletter : {
			match :"banner", 
			qs:"newsletterfrom", 
			qsv: b["cp.ns_prov"]
		}	  
		//trans_checkout_type	 		: {match :"1", qs:"reg", qsv:"OK"}
	};

	helpers.getgoalqueryparam = function (pagename, prop, value) {
		if (typeof helpers.goalqueryparam[prop] != "undefined" && value == helpers.goalqueryparam[prop].match) {
			return helpers.addInternalSearchKeyword(pagename, ["" + helpers.goalqueryparam[prop].qs], ["" + helpers.goalqueryparam[prop].qsv]);
		} else {
			return pagename;
		}
	};
  
  	helpers.getgoalqueryparamprovnewsletter = function (pagename, prop, value) {
		if(pagename.indexOf("newsletter=START&type_newsletter=banner")>-1 || 
		   pagename.indexOf("/popup-newsletter/iscrizione")>-1 || 
		   pagename.indexOf("/popup-newsletter/conferma")>-1){
		  
			if (typeof helpers.goalqueryparam[prop] != "undefined") {
			        return helpers.addInternalSearchKeyword(pagename, ["" + helpers.goalqueryparam[prop].qs], ["" + value]);
			} else {
				return pagename;
			}
		}else {
		  return pagename;
		}
	};  

	helpers.arraySum = function (arr) {
		var sum = 0;
		for (var i = 0; i < arr.length; i++) {
			sum += arr[i];
		}
		return sum;
	};

	helpers.versaValue = function (quantities, prices) {
		var value = 0;
		for (var i = 0; i < quantities.length; i++) {
			value += quantities[i] * prices[i];
		}
		return value;
	};
	helpers.totalrevenue = function (quantities, prices) {
		var value = 0;
		for (var i = 0; i < quantities.length; i++) {
			value += quantities[i] * prices[i];
		}
		return value;
	};
	helpers.cookieField = function (name, field) {
		var myCookie,
		fields,
		myField,
		value,
		i,
		cookies,
		cookie,
		cookieIndex,
		myName;

		try {
			// recupero il cookie
			cookies = document.cookie.split(";");
			for (i in cookies) {
				if (cookies.hasOwnProperty(i)) {
					cookie = cookies[i];
					myName = encodeURIComponent(name) + "=";
					cookieIndex = cookie.indexOf(myName);
					if (cookieIndex !== -1) {
						myCookie = decodeURIComponent(cookie.substring(cookieIndex + myName.length));
						//alert(myCookie);
					}
				}
			}
			if (!(myCookie === undefined || myCookie === null)) {
				// cerco il campo
				fields = myCookie.split(";");
				for (i in fields) {
					if (fields.hasOwnProperty(i)) {
						myField = fields[i].split("=");
						if (myField[0] === field) {
							return myField[1].replace(/\+/g, " ");
						}
					}
				}
				return myCookie;
			}
			return "";
		} catch (e) {
			return "";
		}
	};

	helpers.trimListingImpressionArrays = function (b, maxValues) {
		for (var name in b) {
			if (/^imp_/.test(name)) {
				if (b[name].length > maxValues) {
					b[name].length = maxValues;
				}
			}
		}
	};
  
	helpers.sitetype = function () {
		_rwdBreakpoints = {
			'm': [0, 767],
			't': [768, 991],
			'd': [992, 9999],
		};

		var current_width = document.documentElement.clientWidth;
		var breakpoints = _rwdBreakpoints;
		for (var layout_type in breakpoints) {
			var min_width = breakpoints[layout_type][0];
			var max_width = breakpoints[layout_type][1];
			if (current_width >= min_width && current_width <= max_width) {
				return layout_type;
			}
		}
		return "Undefined";
	};

	helpers.techtype = function () {
		/*console.log("techtype");*/
		try {
			var ob = window.__APP_STATE__;
			var isNull = function (value) {
				return value === null;
			}
			var isUndefined = function (value) {
				return typeof value === 'undefined';
			}
			if (isNull(ob) || isUndefined(ob)) {
				return "angular";
			} else {
				return "react";
			}
		} catch (e) {
			return "angular";
		}
	};
	helpers.is_device_mobile = function () {
		var device_mobile = ((function (a) {
				if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))
					return true
			})(navigator.userAgent || navigator.vendor || window.opera)) ? 'true' : 'false';
		var device_tablet = ((function (a) {
				if (/ipad|android.+\d safari|tablet/i.test(a))
					return true
			})(navigator.userAgent || navigator.vendor || window.opera)) ? 'true' : 'false';
		if (device_mobile == "true" || device_tablet == "true")
			return true;
	};

	helpers.getCATCode = function (b, mode) {
		var catCode = "";
		if (mode == "pdp") {
			catCode = b["page_name"][6] ? b["page_name"][6] : "";
		} else {
			//console.log("init");
			var whereaddtocart = Array.isArray(b["prod_add_type"]) ? b["prod_add_type"][0] : b["prod_add_type"];

			try {
				switch (whereaddtocart) {
				case "detail":
					catCode = b["page_name"][6] ? b["page_name"][6] : "";
					break;
				case "listing":
					var cat = b["prod_list"][0] ? b["prod_list"][0].split("/") : "";
					catCode = cat[1] ? cat[1] : "";
					break;
				}
			} catch (err) {
				utag.DB(err)
			}
			//console.log(catCode);
		}
		return catCode;
	};
	helpers.perftobigquey = function (tags, tagsDetail) {
	  var url = utag.data["ut.env"]=="prod"?"https://europe-west1-disco-charger-159422.cloudfunctions.net/tag-monitoring-ingestion":"http://testPerf.bitbang.com";
		var payload = "";
		if(utag.data["ut.event"]==="view"){
			payload += "ts=" + utag.data["hit_timestamp"] + "&";
			payload += "page=/" + utag.data["page_name"].join("/") + "&";
			payload += "url=" + utag.data["dom.url"] + "&";
			//payload += "firstpaint="+p.firstpaint+"&";
			//payload += "firstcontentfulpaint="+p.firstcontentfulpaint+"&";
			payload += "performancetags=[" + tags.join(",") + "]&";
			payload += "performancetagsdetail=[" + tagsDetail.join(",") + "]";
			var d;
			try {
				d = document.createElement("img");
				d.src = url + "?" + encodeURI(payload);
				url = !0
			} catch (h) {}
			if (!url) {
				url = !1;
				var d;
				try {
					window.XMLHttpRequest && "withCredentials" in(d = new XMLHttpRequest) && (d.open("POST", url, !0), d.setRequestHeader("Content-Type", "text/plain"), d.send(payload), url = !0)
				} catch (h) {}
			}
		}
	};

	helpers.print_PerformanceEntries= function() {
		var performanceBB = {}; 
		performanceBB.tags = [];
		performanceBB.tagsDetail = [];
		performanceBB.tagsComplete = [];

		var p = window.performance.getEntries();
		for (var i = 0; i < p.length; i++) {
			if(p[i].name.indexOf("tags.tiqcdn.com")>-1){ 
				var pEntryName = p[i].name.split("/").pop();;
				if(pEntryName.indexOf("utag.")>-1){			
					var pEntryNameAbb = pEntryName.split("?")[0];
					if(pEntryNameAbb === "utag.sync.js"){
						performanceBB.tags.push("000");
					}else if(pEntryNameAbb === "utag.js"){
						performanceBB.tags.push("001");
					}else if(pEntryNameAbb.search(/utag\.(\d+)\.js/)>-1){ 
						//console.log("PerformanceEntry[" + pEntryNameAbb + "]");
						var pEntryNameAbbID = pEntryNameAbb.split(".")[1];
						performanceBB.tags.push(pEntryNameAbbID);
					}
					performanceBB.tagsDetail.push(helpers.print_PerformanceEntry(p[i]));
					performanceBB.tagsComplete.push(p[i]);
				}
			}
		}
		
		return performanceBB;
	};
	helpers.print_PerformanceEntry = function(perfEntry) {
		var properties = ["name", "startTime","responseEnd"];
		
		for (var i = 0; i < properties.length; i++) {
			var supported = properties[i]in perfEntry;
			if (supported) {
				var value = perfEntry[properties[i]];
				//console.log("... " + properties[i] + " = " + value);
				if(properties[i]=="responseEnd"){
					var end = perfEntry["responseEnd"];
					var start = perfEntry["startTime"];
					return ((end-start)/1000).toFixed(4);
				}
			}
		}
	};   
	helpers.accodainfoprodotto = function (data) {
		var fieldsProd = ["prod_avail_online", "prod_avail_store", "prod_brand", "prod_campaign", "prod_category", "prod_family", "prod_rating", "prod_recensioni", "prod_univers"];
		var fieldsProdStringify = [];
		for (var i = 0; i < fieldsProd.length; i++) {
			var key = fieldsProd[i];
			if (data[key]) {
				fieldsProdStringify.push(data[key]);
			} else {
				fieldsProdStringify.push("");
			}
		}
		return fieldsProdStringify.join("|");
	};
	helpers.arrayToObjProds = function (arr) {
		var objs = [];
		var objsArr = {ts: [],id: [],name: [],url: [],urlimg: [],price: [],sconto: [],avail_online: [],avail_store: [],
		brand: [],campaign: [],category: [],family: [], rating: [],	recensioni: [],	univers: [],position: []};
		for (var i = 0; i < arr.length; i++) {
			var ob = {};
			var key = arr[i];
			var keysplit = key.split("|");
			objsArr.ts.push(keysplit[0] ? keysplit[0] : "");
			objsArr.id.push(keysplit[1] ? keysplit[1] : "");
			objsArr.name.push(keysplit[2] ? keysplit[2] : "");
			objsArr.url.push(keysplit[3] ? keysplit[3] : "");
			objsArr.urlimg.push(keysplit[4] ? keysplit[4] : "");
			objsArr.price.push(keysplit[5] ? keysplit[5] : "");
			objsArr.sconto.push(keysplit[6] ? keysplit[6] : "");
			objsArr.avail_online.push(keysplit[7] ? keysplit[7] : "");
			objsArr.avail_store.push(keysplit[8] ? keysplit[8] : "");
			objsArr.brand.push(keysplit[9] ? keysplit[9] : "");
			objsArr.campaign.push(keysplit[10] ? keysplit[10] : "");
			objsArr.category.push(keysplit[11] ? keysplit[11] : "");
			objsArr.family.push(keysplit[12] ? keysplit[12] : "");
			objsArr.rating.push(keysplit[13] ? keysplit[13] : "");
			objsArr.recensioni.push(keysplit[14] ? keysplit[14] : "");
			objsArr.univers.push(keysplit[15] ? keysplit[15] : "");
			objsArr.position.push(i + 1);
		}
		return objsArr;
	};
	helpers.addimpressionsCarousel = function (ln, ar, oas, pl) {
		var ota = helpers.arrayToObjProds(ar);
		var ft = [];
		var fa = [];
		var ftf = ["imp_avail_online", "imp_avail_store", "imp_brand", "imp_campaign", "imp_category", "imp_family", "imp_id", "imp_list", "imp_name", "imp_position", "imp_price", "imp_rating", "imp_recensioni", "imp_sconto", "imp_univers"];
		ota.list = new Array(ar.length).fill(ln);
		/*verifico se nel datalayer passato nella view ho
		i parametri imp_ e creo un array di campi (ft)*/
		for (var name in oas) {
			if (/^imp_/.test(name)) {
				ft.push(name);
			}
		}
		/*creo un array di campi presenti
		nel array dei prodotti del carosello (fa)*/
		for (var n in ota) {
			fa.push(n);
		}
		/*ciclo i campi di fa */
		for (var i = 0; i < fa.length; i++) {
			var nfa = fa[i];
			var lf = pl ? ft : ftf;
			for (var t = 0; t < lf.length; t++) {
				var nft = lf[t];
				if (nft.search(nfa) != -1) {
					if (oas[nft]) {
						Array.prototype.push.apply(oas[nft], ota[nfa]);
					} else {
						oas[nft] = ota[nfa];
					}
				}
			}
		}
		return oas;
	};
	helpers.addclickimpressionsCarousel = function (ln, ar) {
		var field = ["ts","prod_id","prod_name","url","urlimg","prod_price","prod_sconto","prod_avail_online", "prod_avail_store", "prod_brand", "prod_campaign", "prod_category", "prod_family", "prod_rating", "prod_recensioni", "prod_univers"];
		/*ciclo i campi di fa */
		var objs = {};
		var obj = {};
		for (var i = 0; i < ar.length; i++) {
			var key = ar[i];
			var keysplit = key.split("|");
			var obj = {};
			for (var k = 0; k < keysplit.length; k++) {
				obj[field[k]] = keysplit[k] 
			}
			obj.prod_list = ln;
			obj.prod_position = (i+1);
			objs[obj["prod_id"]] = obj;
		}
		return objs;
	};
	helpers.getCarouselNameList = function (isHome, b ) {
		var ultimiProdottiVisti = " > ultimi prodotti visti";
		var nomeLista = "";
		if(isHome){
			nomeLista = b["page_name_lv1"]+ultimiProdottiVisti;
		}else{
			if(b["prod_category"]){
				nomeLista = b["page_name_lv2"]+" > "+ b["prod_category"][0]+"/"+b["page_name_lv7"]+ultimiProdottiVisti;
			}else if(b["imp_category"]){
				nomeLista = b["page_name_lv2"]+" > "+ b["imp_category"][0]+"/"+b["page_name_lv7"]+ultimiProdottiVisti;
			}
			
		}
		return nomeLista;
	} ;
  	helpers.getCreativita = function (nomecreativita) {
		if (typeof window.sessionStorage != "undefined") {
			var cr = sessionStorage['creativita_fired'];		
			if (typeof cr != 'undefined') {
				var crList = cr.split("|");
				if(crList.indexOf(nomecreativita)==-1){         
					crList.push(nomecreativita);      
					sessionStorage.setItem('creativita_fired', crList.join('|'));
				}
			}else{
				var crList = [];
				crList.push(nomecreativita);
				sessionStorage.setItem('creativita_fired', crList.join('|'));
			}
		}
	};
    helpers.getCookieLaw = function (cookie, gruppiattivi) {
        if(cookie && cookie!==""){
            var grs = cookie.split("|")
            var gruppi = {};
            var labels = "";
            for (var i = 0; i < grs.length; i++) {
                var gr = grs[i];
                var grVal = gr.split(":")
                gruppi[grVal[0]] = grVal[1]
            }
        
            if (gruppi["c1"]) {
                var ll= [];
                for (var y = 1; y <= gruppiattivi; y++) {
                    var g = gruppi["c" + y];
                    var l = g === 1 || g === "1" ? "SI" : "NO";
                    ll.push("GR" + y + ":" + l);
                }
                labels = ll.join(" - ");
            } else {
                labels = "all";
            }    
        }else{
            labels = "no cookie set - first access";
        }
        return labels;
    };
helpers.getbrowser = function () {
	
	var brow = {
		"Opera" : {"isBrowser": function(){ return (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0}},
		"Firefox" :{"isBrowser": function(){return typeof InstallTrigger !== 'undefined'}},
		"Safari" : {"isBrowser":function(){return /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));}},
		"IE" : {"isBrowser":function(){return /*@cc_on!@*/false || !!document.documentMode;}},
		"Edge" : {"isBrowser":function(){var isIE = /*@cc_on!@*/false || !!document.documentMode; return !isIE && !!window.StyleMedia;}},
		"Chrome" : {"isBrowser":function(){return !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);}},
	}
	
	for(bw in brow){
		var is = brow[bw].isBrowser();
		if(is){
			return bw;
		}
	}
};  
}

// Polyfill per Date#toISOString, serve per Hit Timestamp
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString#Polyfill
if (!Date.prototype.toISOString) {
	(function () {
		function pad(number) {
			if (number < 10) {
				return '0' + number;
			}
			return number;
		}

		Date.prototype.toISOString = function () {
			return this.getUTCFullYear() +
			'-' + pad(this.getUTCMonth() + 1) +
			'-' + pad(this.getUTCDate()) +
			'T' + pad(this.getUTCHours()) +
			':' + pad(this.getUTCMinutes()) +
			':' + pad(this.getUTCSeconds()) +
			'.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +
			'Z';
		};
	}
		());
}

},
function(a,b){ try{ if(1){
utag.helpers.trimListingImpressionArrays(b, 12);
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(typeof b['qp.oneTimeToken']!='undefined'&&b['qp.oneTimeToken']!=''){b['ga_utm_source']='App';b['ga_utm_medium']='LeroyMerlin'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){try{b['hit_timestamp']=(new Date()).toISOString()}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name_arr']=(function(){if(b.page_name){if(b.page_name[0]=="generico"&&(b.page_name[1]=="form"||b.page_name[1]=="idea-vantaggi")){b.page_name.splice(1,0,"registrazione");}}return b.page_name;})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name_arr']=(function(){if(b.page_name){if(b.page_name[0]=="mylm"&&b.page_name[1]=="tracciamento-rapido-ordine"){b.page_name.shift();}}return b.page_name;})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name_arr']=(function(){if(b.page_name){if(b.page_name[0]=="checkout"&&b.page_name[1]=="thankyou"){b.page_name[1]="grazie";}}return b.page_name;})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name_arr']=(function(){var pezzi=b.page_name.slice();if(pezzi.length==0){pezzi.push("home-page");}return pezzi;}())}catch(e){};try{b['ext_page_name']=utag.helpers.addInternalSearchKeyword('/' +b.ext_page_name_arr.join('/'), ['q','t'], [b.search_keyword,b.search_type]);}catch(e){};try{b['ext_page_name_noquery']=b.ext_page_name_arr.join('/');}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['ext_page_name'].toString().toLowerCase().indexOf('/popup-newsletter/iscrizione'.toLowerCase())<0&&b['ext_page_name'].toString().toLowerCase().indexOf('/popup-newsletter/conferma'.toLowerCase())<0&&b['ext_page_name'].toString().toLowerCase().indexOf('/checkout/carrello/dropdown'.toLowerCase())<0&&b['ext_page_name'].toString().toLowerCase().indexOf('/offerte'.toLowerCase())<0&&b['ut.event'].toString().toLowerCase()=='view'.toLowerCase())){document.cookie="ns_prov="+b['ext_page_name']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.ns_prov']=b['ext_page_name'];}} catch(e){ utag.DB(e); } },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "mylm_registration", b.mylm_registration);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "idea_registration", b.idea_registration);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "newsletter_registration", b.newsletter_registration);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "mylm_registration_start", b.mylm_registration_start);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "idea_registration_start", b.idea_registration_start);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "newsletter_registration_start", b.newsletter_registration_start);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "confirmation_registration", b.confirmation_registration);}catch(e){};try{b['ext_page_name']=utag.helpers.addInternalSearchKeyword(b.ext_page_name, ["type_reg"], [b.type_registration]);}catch(e){};try{b['ext_page_name']=utag.helpers.addInternalSearchKeyword(b.ext_page_name, ["type_trans"], [b.trans_checkout_type]);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparam(b.ext_page_name, "type_newsletter", b.type_newsletter);}catch(e){};try{b['ext_page_name']=utag.helpers.getgoalqueryparamprovnewsletter(b.ext_page_name, "prov_newsletter", b["cp.ns_prov"]);}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['ext_page_name']=utag.helpers.addInternalSearchKeyword(b.ext_page_name,["camp_code"], [b["qp.camp_code"]]);}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name']!='undefined'){try{b['page_name_lv1']=b.ext_page_name_arr[0]}catch(e){};try{b['page_name_lv2']=b.ext_page_name_arr[1]}catch(e){};try{b['page_name_lv3']=b.ext_page_name_arr[2]}catch(e){};try{b['page_name_lv4']=b.ext_page_name_arr[3]}catch(e){};try{b['page_name_lv5']=b.ext_page_name_arr[4]}catch(e){};try{b['page_name_lv6']=b.ext_page_name_arr[5]}catch(e){};try{b['page_name_lv7']=b.ext_page_name_arr[6]}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['cp.page_name_lv1_prev']!='undefined'&&b['cp.page_name_lv1_prev']!=''){b['page_name_lv1_prev']=b['cp.page_name_lv1_prev']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['page_name_lv1']!='undefined'&&b['page_name_lv1']!=''){document.cookie="page_name_lv1_prev="+b['page_name_lv1']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.page_name_lv1_prev']=b['page_name_lv1'];}} catch(e){ utag.DB(e); } },
function(a,b){ try{ if(1){b['ga_uid']=b['cust_id_mylm']} } catch(e){ utag.DB(e); }  },
function(a,b,c,d,e,f,g){if(1){d=b['cart_empty_store'];if(typeof d=='undefined')return;c=[{'1':'NO'},{'0':'SI'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ga_cart_empty_store']=c[e][f];m=true};};if(m)break};if(!m)b['ga_cart_empty_store']='';   }},
function(a,b,c,d,e,f,g){if(1){d=b['cart_empty'];if(typeof d=='undefined')return;c=[{'1':'NO'},{'0':'SI'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ga_cart_empty']=c[e][f];m=true};};if(m)break};if(!m)b['ga_cart_empty']='';   }},
function(a,b){ try{ if(typeof b['prod_bundle']!='undefined'){try{b['ext_prod_bundle']=utag.helpers.da01aSiNo(b.prod_bundle);}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){
if (b.prod_new !== undefined) {
	b.ext_prod_new = [];
	for (var i = 0, l = b.prod_new.length; i < l; i++) {
		if (b.prod_new[i] == "0") {
			b.ext_prod_new.push("prodotto vecchio");
		} else if (b.prod_new[i] == "1") {
			b.ext_prod_new.push("prodotto nuovo");
		}
	}
}
},
function(a,b,c,d,e,f,g){if(1){d=b['trans_vantaggio'];if(typeof d=='undefined')return;c=[{'1':'utilizzato IDEA+'},{'0':'non utilizzato IDEA+'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_trans_vantaggio']=c[e][f];m=true};};if(m)break};if(!m)b['ext_trans_vantaggio']='';   }},
function(a,b){ try{ if(1){b['ext_prod_checkout_type']='not-set'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['prod_action'].toString().toLowerCase()=='add'.toLowerCase()||b['prod_action'].toString().toLowerCase()=='checkout'.toLowerCase()||b['prod_action'].toString().toLowerCase()=='purchase'.toLowerCase()){try{b['ext_prod_checkout_type']=b.prod_checkout_type[0]}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&b['prod_action'].toString().toLowerCase()=='add'.toLowerCase())||(typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&b['prod_action'].toString().toLowerCase()=='detail'.toLowerCase())||(typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&b['prod_action'].toString().toLowerCase()=='checkout'.toLowerCase())||(typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&b['prod_action'].toString().toLowerCase()=='purchase'.toLowerCase())||(typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&b['prod_action'].toString().toLowerCase()=='remove'.toLowerCase()&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!='')){try{b['ext_prod_availability']=utag.helpers.productAvailability(b.prod_avail_online, b.prod_avail_store)}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['imp_avail_online']!='undefined'&&b['imp_avail_online']!=''&&typeof b['imp_avail_store']!='undefined'&&b['imp_avail_store']!='')){try{b['ext_imp_availability']=utag.helpers.productAvailability(b.imp_avail_online, b.imp_avail_store)}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['prod_action'].toString().toLowerCase()=='wishlist_add'.toLowerCase()){b['event_category']='product_wishlist';try{b['event_action']=(function(){var ea="add";if(b["prod_wishlist_type"]){ea=ea+" - "+b["prod_wishlist_type"];};return ea;})();}catch(e){};b['event_label']=b['prod_id'];b['ext_prod_name_w']=b['prod_name'];b['ext_prod_id_w']=b['prod_id'];b['ext_prod_category_w']=b['prod_category'];b['ext_prod_price_w']=b['prod_price'];b['ext_wishlist_add']='1';b['ext_prod_brand_w']=b['prod_brand'];b['ext_prod_variant_w']=b['prod_variant'];b['ext_prod_universo_w']=b['prod_univers'];b['ext_prod_gamma_w']=b['prod_gamma'];b['ext_prod_family_w']=b['prod_family'];try{b['ext_prod_new_w']=b.ext_prod_new[0]}catch(e){};b['ext_prod_availability_w']=b['ext_prod_availability'];b['ext_prod_campaign_w']=b['prod_campaign'];try{b['ext_prod_bundle_w']=utag.helpers.da01aSiNo(b.prod_bundle);}catch(e){};b['ext_prod_rating_w']=b['prod_rating'];b['ext_prod_sconto_w']=b['prod_sconto'];b['ext_prod_puntiomaggio_w']=b['prod_puntiomaggio'];b['ext_prod_ideapiu_w']=b['prod_ideapiu']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['prod_action'].toString().toLowerCase()=='wishlist_remove'.toLowerCase()){b['event_category']='product_wishlist';try{b['event_action']=(function(){var ea="remove";if(b["prod_wishlist_type"]){ea=ea+" - "+b["prod_wishlist_type"];};return ea;})();}catch(e){};b['event_label']=b['prod_id'];b['ext_prod_name_w']=b['prod_name'];b['ext_prod_id_w']=b['prod_id'];b['ext_prod_category_w']=b['prod_category'];b['ext_prod_price_w']=b['prod_price'];b['ext_wishlist_remove']='1';b['ext_prod_brand_w']=b['prod_brand'];b['ext_prod_variant_w']=b['prod_variant'];b['ext_prod_universo_w']=b['prod_univers'];b['ext_prod_gamma_w']=b['prod_gamma'];b['ext_prod_family_w']=b['prod_family'];try{b['ext_prod_new_w']=b.ext_prod_new[0]}catch(e){};b['ext_prod_availability_w']=b['ext_prod_availability'];b['ext_prod_campaign_w']=b['prod_campaign'];try{b['ext_prod_bundle_w']=utag.helpers.da01aSiNo(b.prod_bundle);}catch(e){};b['ext_prod_rating_w']=b['prod_rating'];b['ext_prod_sconto_w']=b['prod_sconto'];b['ext_prod_puntiomaggio_w']=b['prod_puntiomaggio'];b['ext_prod_ideapiu_w']=b['prod_ideapiu']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['prod_action'].toString().toLowerCase()=='wishlist_print'.toLowerCase()){b['event_category']='product_wishlist';b['event_action']='print';b['event_label']=b['prod_id'];b['ext_prod_name_w']=b['prod_name'];b['ext_prod_id_w']=b['prod_id'];b['ext_prod_category_w']=b['prod_category'];b['ext_prod_price_w']=b['prod_price'];b['ext_wishlist_add']='1';b['ext_prod_brand_w']=b['prod_brand'];b['ext_prod_variant_w']=b['prod_variant'];b['ext_prod_universo_w']=b['prod_univers'];b['ext_prod_gamma_w']=b['prod_gamma'];b['ext_prod_family_w']=b['prod_family'];b['ext_prod_new_w']=b['ext_prod_new'];b['ext_prod_availability_w']=b['ext_prod_availability'];b['ext_prod_campaign_w']=b['prod_campaign'];try{b['ext_prod_bundle_w']=utag.helpers.da01aSiNo(b.prod_bundle);}catch(e){};b['ext_prod_rating_w']=b['prod_rating'];b['ext_prod_sconto_w']=b['prod_sconto'];b['ext_prod_puntiomaggio_w']=b['prod_puntiomaggio'];b['ext_prod_ideapiu_w']=b['prod_ideapiu']} } catch(e){ utag.DB(e); }  },
function(a,b,c,d){ try{ if(typeof b['cust_programma_idea']!='undefined'&&b['cust_programma_idea']!=''){c=[b['cust_programma_idea'],b['cust_tipo_idea']];b['ext_programma_idea_piu']=c.join(' ')} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='scegli_negozio'.toLowerCase()){try{b['event_category']=b.page_name_lv1_prev+"_ScegliNegozio"}catch(e){};b['event_action']=b['event_action'];try{b['event_label']=(function(){if(b.final_store){var initial_store=b.initial_store?b.initial_store:"n.d.";return initial_store+" > "+b.final_store;}})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['error']!='undefined'&&typeof b['error_details']!='undefined'&&b['error_details']=='')){b['error_details']='Errore thank you page'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){b['ext_prod_availability_cd66']='not-set'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['prod_action']=='detail'||b['prod_action']=='add'){try{b['ext_prod_availability_cd66']=b.ext_prod_availability[0]}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){try{b['ext_cg_1']=utag.helpers.group([b.page_name_lv1, b.page_name_lv2],":");}catch(e){};try{b['ext_cg_2']=utag.helpers.group([b.page_name_lv3],":");}catch(e){};try{b['ext_cg_5']=utag.helpers.group([b.page_name_lv4, b.page_name_lv5],":");}catch(e){};try{b['ext_cg_3']=utag.helpers.group([b.page_name_lv6, b.page_name_lv7],":");}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['form_field_valid'].toString().toLowerCase()=='0'.toLowerCase()){b['event_category']='form';try{b['event_action']=b.form_name+" - "+b.form_field}catch(e){};b['event_label']='errore';b['flag_form_field_valid_ko']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['form_field_valid'].toString().toLowerCase()=='1'.toLowerCase()){b['event_category']='form';try{b['event_action']=b.form_name+" - "+b.form_field}catch(e){};b['event_label']='valido';b['flag_form_field_valid_ok']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['form_field_valid'].toString().toLowerCase()=='1'.toLowerCase()&&typeof b['event_store']!='undefined'&&b['event_store']!='')){b['event_category']='form';try{b['event_action']=b.form_name+" - "+b.form_field}catch(e){};try{b['event_label']="valido - "+ b.event_store }catch(e){};b['flag_form_field_valid_ok']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){
if(typeof b['trans_id'] != 'undefined'){
	if (typeof b['cp.trans_dd'] != 'undefined') {
		var trackedTransactions = b['cp.trans_dd'].split("|");
		if(trackedTransactions.indexOf(b['trans_id'])==-1){         
			trackedTransactions.push(b['trans_id']);      
			b['trans_list'] = trackedTransactions.join('|');
		}
	}else{
		var trackedTransactions = [];
		trackedTransactions.push(b['trans_id']);
		b['trans_list'] = trackedTransactions.join('|');
	}
}
},
function(a,b){ try{ if((typeof b['trans_id']!='undefined'&&b['ext_flag_trans_dd']!='vero')){document.cookie="trans_dd="+b['trans_list']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(180* 864e5)); return d.toGMTString();})()+"";b['cp.trans_dd']=b['trans_list'];}} catch(e){ utag.DB(e); } },
function(a,b){ try{ if(1){try{b['ext_prod_id_sz']=b.prod_id.slice()}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){b['currency']='EUR'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
b["ext_checkout_step"] = b["checkout_step"]
if(b["ext_page_name"] === "/checkout/login"){
    b["ext_checkout_step"] = 2;
    b["prod_action"] = "checkout";
}
} } catch(e){ utag.DB(e) }  },
function(a,b,c,d){
  b._ccity=(typeof b['']!='undefined')?b['']:'';
  b._ccountry=(typeof b['']!='undefined')?b['']:'';
  b._ccurrency=(typeof b['currency']!='undefined')?b['currency']:'';
  b._ccustid='';
  b._corder=(typeof b['trans_id']!='undefined')?b['trans_id']:'';
  b._cpromo=(typeof b['trans_coupon']!='undefined')?b['trans_coupon']:'';
  b._cship=(typeof b['trans_shipping']!='undefined')?b['trans_shipping']:'';
  b._cstate=(typeof b['']!='undefined')?b['']:'';
  b._cstore=(typeof b['trans_affiliation']!='undefined')?b['trans_affiliation']:'web';
  b._csubtotal=(typeof b['']!='undefined')?b['']:'';
  b._ctax=(typeof b['trans_tax']!='undefined')?b['trans_tax']:'';
  b._ctotal=(typeof b['trans_revenue']!='undefined')?b['trans_revenue']:'';
  b._ctype=(typeof b['trans_checkout_type']!='undefined')?b['trans_checkout_type']:'';
  b._czip=(typeof b['']!='undefined')?b['']:'';
  b._cprod=(typeof b['prod_id']!='undefined'&&b['prod_id'].length>0)?b['prod_id']:[];
  b._cprodname=(typeof b['prod_name']!='undefined'&&b['prod_name'].length>0)?b['prod_name']:[];
  b._cbrand=(typeof b['prod_brand']!='undefined'&&b['prod_brand'].length>0)?b['prod_brand']:[];
  b._ccat=(typeof b['prod_category']!='undefined'&&b['prod_category'].length>0)?b['prod_category']:[];
  b._ccat2=(typeof b['']!='undefined'&&b[''].length>0)?b['']:[];
  b._cquan=(typeof b['prod_quantity']!='undefined'&&b['prod_quantity'].length>0)?b['prod_quantity']:[];
  b._cprice=(typeof b['prod_price']!='undefined'&&b['prod_price'].length>0)?b['prod_price']:[];
  b._csku=(typeof b['prod_id']!='undefined'&&b['prod_id'].length>0)?b['prod_id']:[];
  b._cpdisc=[];
  if(b._cprod.length==0){b._cprod=b._csku.slice()};
  if(b._cprodname.length==0){b._cprodname=b._csku.slice()};
  function tf(a){if(a=='' || isNaN(parseFloat(a))){return a}else{return (parseFloat(a)).toFixed(2)}};
  b._ctotal=tf(b._ctotal);b._csubtotal=tf(b._csubtotal);b._ctax=tf(b._ctax);b._cship=tf(b._cship);for(c=0;c<b._cprice.length;c++){b._cprice[c]=tf(b._cprice[c])};for(c=0;c<b._cpdisc.length;c++){b._cpdisc[c]=tf(b._cpdisc[c])};
},
function(a,b){ try{ if(/^pedagogia_video_/i.test(b['event_type'])){b['event_category']='video';try{b['event_label']=(function () { var ec = b.event_action.split("-"); return ec[1]; })();}catch(e){};try{b['event_action']=(function () { var ec = b.event_action.split("-"); return ec[0]; })();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='pedagogia_iscrizione_corsi'.toLowerCase()){b['event_category']='iscrizione_corsi';try{b['event_label']=b.event_store ? b.event_store:b.page_name_lv2}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='download'.toLowerCase()){try{b['event_category']=b.event_type}catch(e){};try{b['event_label']=b.page_name_lv1}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='calculette'.toLowerCase()){b['event_category']='product_calculette';try{b['event_label']=b.prod_id+"_"+b.prod_category}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(/^product_/i.test(b['event_type'])){b['event_category']=b['event_type'];try{b['event_label']=b.prod_id+"_"+b.prod_category}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='carrello_errore'.toLowerCase()){b['event_category']=b['event_type'];b['event_label']='checkout_carrello_ECOMM'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='carrello_appuntamento'.toLowerCase()){b['event_category']=b['event_type'];b['event_label']='checkout_carrello_C&R'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='suggerimento'.toLowerCase()){b['event_category']='ricerca';try{b['event_label']=(function(){if(b["event_action"]==="macrocategoria prodotto"){return b["event_label"]+" - "+b["keyword"];}return b["keyword"];})();}catch(e){};try{b['event_action']=(function(){if(b["event_action"]==="macrocategoria prodotto"){return b["event_type"]+" - "+b["event_action"];}return b["event_type"];})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='typo'.toLowerCase()){b['event_action']=b['event_type'];try{b['event_label']=b.keyword +" > " + b.event_label}catch(e){};b['event_category']='ricerca'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['checkout_delivery_method'].toString().toLowerCase()=='consegna e installazione rimborso conto termico'.toLowerCase()&&b['event_action_detail'].toString().toLowerCase()=='cambio consegna'.toLowerCase()&&b['event_action_message'].toString().toLowerCase()=='household'.toLowerCase())){b['event_action_message']='consegna e installazione rimborso conto termico'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_action'].toString().toLowerCase()=='error'.toLowerCase()){b['ext_type_error']=b['event_action_detail']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['event_action'].toString().toLowerCase().indexOf('procedi con l acquisto'.toLowerCase())>-1&&b['event_type'].toString().toLowerCase().indexOf('checkout_carrello'.toLowerCase())>-1)){b['event_action_detail']='pulsante'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(/^generico/i.test(b['event_action_detail'])){
var err = b["event_action_detail"];
var codice = err.replace("generico", "");
if(codice){
    b["event_action_message"] = b["event_action_message"] +codice;    
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((/^checkout_/.test(b['event_type'])&&b['event_action_detail'].toString().indexOf('rimuovi micro ordine')<0)||(/^carrello_/.test(b['event_type'])&&b['event_action_detail'].toString().toLowerCase().indexOf('rimuovi micro ordine'.toLowerCase())<0)){try{b['event_action']=b.event_checkout_step + ":" +b.event_action + " - " + b.event_action_detail}catch(e){};try{b['event_label']=b.event_action_message}catch(e){};try{b['event_category']=b.event_type.replace("carrello","checkout");}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['checkout_products_error']!='undefined'&&b['checkout_products_error']!=''&&typeof b['event_label']!='undefined'&&b['event_label']!=''&&/^checkout_/i.test(b['event_type']))||(typeof b['checkout_products_error']!='undefined'&&b['checkout_products_error']!=''&&typeof b['event_label']!='undefined'&&b['event_label']!=''&&b['event_type'].toString().indexOf('carrello_')>-1)){try{b['event_label']=b.event_label+"("+b.checkout_products_error.toString() +")";}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='registrazione'.toLowerCase()){b['event_category']='registrazione_interazione'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_category'].toString().toLowerCase()=='interazione login'.toLowerCase()){b['event_category']='login_interazione'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='tutorial'.toLowerCase()){b['event_category']=b['event_type'];try{b['event_label']=(function(){var el=b["tutorial_category"];if(b["tutorial_name"]){el=el+" - "+b["tutorial_name"];};return el;})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_type'].toString().toLowerCase()=='servizi_posa_installazione'.toLowerCase()){b['event_category']='download servizi posa';b['event_label']=b['pdf_name'];try{b['event_action']=b["servizio_posa_installazione"]+" - "+b["store"]}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['event_type']!='undefined'&&b['event_type']!=''&&b['event_type'].toString().toLowerCase()!='pedagogia_iscrizione_corsi'.toLowerCase()&&!/^pedagogia_video_/i.test(b['event_type'])&&b['event_type'].toString().toLowerCase()!='download'.toLowerCase()&&!/^product_/i.test(b['event_type'])&&b['event_type'].toString().toLowerCase()!='carrello_errore'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='carrello_appuntamento'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='typo'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='suggerimento'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='checkout_pagamento'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='checkout_consegna'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='checkout_carrello'.toLowerCase()&&b['event_type'].toString().toLowerCase()!='calculette'.toLowerCase()&&typeof b['event_action']!='undefined'&&b['event_action']!=''&&b['event_type'].toString().toLowerCase()!='registrazione'.toLowerCase()&&!/^checkout_/i.test(b['event_type'])&&!/^carrello_/i.test(b['event_type'])&&b['event_type'].toString().toLowerCase()!='servizi_posa_installazione'.toLowerCase())){b['event_category']=b['event_type']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['filter_name']!='undefined'&&b['filter_name']!=''){try{b['ext_filter_name']=b.filter_name.join(",")}catch(e){};try{b['ext_filter_value']=b.filter_value.join(",")}catch(e){};b['ext_filter_present']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['_cquan']!='undefined'&&b['_cquan']!=''&&typeof b['_cprice']!='undefined'&&b['_cprice']!=''&&b['checkout_step'].toString().indexOf('1')<0)){try{b['ext_total_revenue']=utag.helpers.totalrevenue(b['_cquan'], b['_cprice'])}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&b['prod_action'].toString().toLowerCase()=='detail'.toLowerCase())||(b['prod_action'].toString().toLowerCase()=='add'.toLowerCase()&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!=''&&typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!='')||(b['prod_action'].toString().toLowerCase()=='checkout'.toLowerCase()&&typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!='')||(b['prod_action'].toString().toLowerCase()=='purchase'.toLowerCase()&&typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!='')||(b['prod_action'].toString().toLowerCase()=='remove'.toLowerCase()&&typeof b['prod_avail_online']!='undefined'&&b['prod_avail_online']!=''&&typeof b['prod_avail_store']!='undefined'&&b['prod_avail_store']!='')){try{b['ext_disp_prod_lvpagina']=b.ext_prod_availability[0]+" - "+b.page_name_lv2}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['imp_avail_online']!='undefined'&&b['imp_avail_online']!=''&&typeof b['imp_avail_store']!='undefined'&&b['imp_avail_store']!='')){try{b['ext_disp_imp_lvpagina']=b.ext_imp_availability[0]+" - "+b.page_name_lv2}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['promo_creative']!='undefined'&&b['promo_creative']!=''){try{b['ext_promo_creative']=utag.helpers.promoCreative(b.promo_creative, b.promo_comunicazione);}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((typeof b['promo_id']!='undefined'&&b['promo_id']!=''&&b['promo_action'].toString().toLowerCase()=='promo_click'.toLowerCase())){try{b['ext_campagne_interne']=utag.helpers.campagnaInterna(b.promo_creative, b.promo_comunicazione, b.promo_name, b.promo_id, b.promo_position);}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){b['ext_campagne_interne']='not-set'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
// Parte Configurabile
//array categorie su cui mandare l'evento
var catAllow = ["Porte blindate e portoncini d'ingresso", "Porte interne"];
//numero viste categorie su cui mandare l'evento
var numCatView = 2;
// Non modificare
var cv = localStorage.getItem('cv')?JSON.parse(localStorage.getItem('cv')): {};
var cookie_utag_main_ses_id = b['cp.utag_main_ses_id'];
cv["ss_id"] = cv["ss_id"]?cv["ss_id"]:cookie_utag_main_ses_id;
if(typeof b['prod_action'] != 'undefined' && 
	b['prod_action'].toString().toLowerCase()=='detail'.toLowerCase()){
	var prodCat = b['prod_category'];
	var resetSs = cv["ss_id"] == cookie_utag_main_ses_id ? false:true;
	if(resetSs){
		delete cv[prodCat[0]+"_ev"];
	}
	var sendevent = cv[prodCat[0]+"_ev"]?cv[prodCat[0]+"_ev"]:false;
	if(catAllow.indexOf(prodCat[0]) >= 0){
		if(!sendevent){
			var contFromObj = !resetSs?cv[prodCat[0]]:0;
			var cont = cv[prodCat[0]]? contFromObj:0;
			cont++;
			cv[prodCat[0]] = cont;
			cv["ss_id"] = cookie_utag_main_ses_id;
			if(cv[prodCat[0]]===numCatView){
				b["event_category"] = "product_visualizza 2 schede";
				b["event_action"] = prodCat[0];
				cv[prodCat[0]+"_ev"] = true;
			} 
			localStorage.setItem('cv',JSON.stringify(cv));
			
		}
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{utag.runonce = utag.runonce || {};utag.runonce.ext = utag.runonce.ext || {};if(typeof utag.runonce.ext[150]=='undefined'){utag.runonce.ext[150]=1;if(/prod|qa/.test(b['ut.env'])){
if (typeof utag.runonce['outbound_link'] === 'undefined') {
	utag.runonce['outbound_link'] = true;
	if (utag.helpers.techtype() === "react") {
		var outurl = document.body.querySelectorAll("a:not([href*='www.leroymerlin.it'])");
		//console.log("eseguito queryall");
		for (var i = 0; i < outurl.length; i++) {
			var url = outurl[i].addEventListener('mousedown', function (event) {
					//console.log("onmousedown");
					event.preventDefault();
					var url = this.href;
					//console.log(url);
					if (url != "" &&
						url.search("www.leroymerlin.it") == -1 &&
						url.search("react.leroymerlin.it") == -1 &&
						url.search("qa.leroymerlin.it") == -1 &&
						url.search("javascript:") == -1 &&
						//url.search("javascript:void")==-1 &&
						url.search("prd-esb-feeds.s3.amazonaws.com") == -1 &&
						url.search("#") == -1) {
						var arr = url.split("/");
						var dom = arr[2] ? "//" + arr[2] : "";
						var result = arr[0] + dom;
						utag.link({
							event_category: "outbound_link",
							event_action: result,
							event_label: url
						});
						//console.log("event_category :outbound_link, event_action:" + result + ", event_label:" + url);
					}
				});
		}
	} else {
		jQuery(document).on("mousedown", "a:not([href*='www.leroymerlin.it'])", function () {
			var url = this.href;
			//console.log(url);
			if (url != "" &&
				url.search("www.leroymerlin.it") == -1 &&
				url.search("react.leroymerlin.it") == -1 &&
				url.search("qa.leroymerlin.it") == -1 &&
				url.search("javascript:") == -1 &&
				//url.search("javascript:void")==-1 &&
				url.search("prd-esb-feeds.s3.amazonaws.com") == -1 &&
				url.search("#") == -1) {
				var arr = url.split("/");
				var dom = arr[2] ? "//" + arr[2] : "";
				var result = arr[0] + dom;
				utag.link({
					event_category: "outbound_link",
					event_action: result,
					event_label: url
				});
			}
		})
	}

}

}}} catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){b['ext_awin_channel']='aw'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){try{b['ext_criteo_sitetype']=utag.helpers.sitetype();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
var sb=[];
var evt = b["ut.event"]=="view"?"page":"event";
sb.push(evt);
if(b["prod_action"]){
	sb.push(b["prod_action"]);
	switch(b["prod_action"]) {
		case "detail":
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_id"]);
			break;
		case "add":
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_add_type"]);
			sb.push(b["prod_id"]);
			break;
		case "remove":
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_id"]);
			break;
		case "wishlist_add":
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_id"]);
			break;
		case "wishlist_remove":
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_id"]);
			break;			
		case "product_click":
			sb.push(b["prod_list"]);
			sb.push(b["prod_univers"]);
			sb.push(b["prod_category"]);
			sb.push(b["prod_id"]);
			break;
		case "checkout":
			sb.push(b["checkout_step"]);
			if(b["checkout_step"]>1){	    
			  sb.push(b["prod_checkout_type"][0]);
			}
			sb.push(b["prod_univers"].join("|"));
			sb.push(b["prod_category"].join("|"));
			sb.push(b["prod_id"].join("|"));
			break;	
		case "purchase":
			sb.push(b["trans_checkout_type"]);
			sb.push(b["prod_univers"].join("|"));
			sb.push(b["prod_category"].join("|"));
			sb.push(b["prod_id"].join("|"));
			break;				
	}
}else if(b["imp_list"]){
	sb.push("listing");
	sb.push(b["imp_list"][0]);
	if(b["page_name_lv2"]=="gallery-prodotto"){
		sb.push(b["page_name_lv3"]);
	}
}else{
	sb.push("no ecommerce");
}
b["shopping_behaviour"] = sb.join(" - ");
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
if (b.page_load != "1") {
	if (utag.helpers.techtype() === "react") {
	    var storeid  = utag.helpers.cookieField("currentCustomerStore") ? utag.helpers.cookieField("currentCustomerStore") : utag.helpers.cookieField("autoStore");
	  	//pagename da escludere nella pw di tooso
		var pg_exclude = ["/aggiunta-carrello/modale","/checkout/grazie?type_trans=C&R", "/checkout/grazie?type_trans=online"];
		//console.log("sito react");
		if (window.ta) {
			window.ta("set", "currencyCode", "EUR");
			var toosoMetadata = window.toosoMetadata;
			
			if(toosoMetadata){
				if(toosoMetadata.dr){
					window.ta("set", "referrer", toosoMetadata.dr);	
				}
				if(b["title"]){
					window.ta("set", "title", b["title"]);	
				}
				if(toosoMetadata.uid){
					window.ta("set", "userId", toosoMetadata.uid);	
				}	
			}
			/* Gestire recuperando le informazioni su toosoMetadata nella window 
			if(utag.helpers.sitetype()==="d"){
    			var latlon = "";
    			if (navigator.geolocation) {
    				navigator.geolocation.getCurrentPosition(
    					function (position) {
    						latlon = position.coords.latitude + "," + position.coords.longitude;
    						window.ta("set","dimension0",latlon);
    					},
    					function (error) {
    						//alert(error.code)
    					}
    				);
    			}
			}
			*/
			if (b["prod_action"] === "detail") {
				window.ta('ec:addProduct', {
					'id': b["prod_id"] && b["prod_id"].length > 0 ? b["prod_id"][0] : "",
					'name': b["prod_name"] && b["prod_name"].length > 0 ? b["prod_name"][0] : "",
					//'category': b["prod_category"] && b["prod_category"].length > 0 ? b["prod_category"][0] : "",
					'category': utag.helpers.getCATCode(b,"pdp"),
					'brand': b["prod_brand"] && b["prod_brand"].length > 0 ? b["prod_brand"][0] : "",
					'variant': b["prod_variant"] && b["prod_variant"].length > 0 ? b["prod_variant"][0] : "",
					'price': b["prod_price"] && b["prod_price"].length > 0 ? b["prod_price"][0] : "",
					'quantity': 1,
					'storeId': storeid,
					'position': 1,
				});
				// TRACK ADD TO CART ACTION
				ta('ec:setAction', 'detail');
			}else if (b["prod_action"] === "purchase") {
			    try{
			        var trans = b["toosoData"];
			        for(var t = 0 ; t < trans.length ; t++){
        				var td = trans[t];
        				if(td){
            				var tprods = td.ec_addProduct;
            				
            				for(var x = 0 ; x < tprods.length ; x++){
            					var tprod = tprods[x]
            					ta('ec:addProduct', tprod);
            				}
            				ta('ec:setAction', 'purchase',td.ec_setAction_purchase)	
        				}
        				if(t>0){
        				    window.ta('send', 'event', 'purchase', document.location.pathname+document.location.search)
        				}else{
        				    window.ta('send', 'pageview', document.location.pathname+document.location.search);    
        				}
        				
			        }
			    }catch(err) {}
			}
			if(pg_exclude.indexOf(b["ext_page_name"])==-1){
				window.ta('send', 'pageview', document.location.pathname+document.location.search);
			}
			
		}
	} else {
	//console.log("sito ajs");
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='link'.toLowerCase()){
if (b.page_load != "1") {
	if (utag.helpers.techtype() === "react") {
		//console.log("sito react");
		if (window.ta) {
			var storeid  = utag.helpers.cookieField("currentCustomerStore") ? utag.helpers.cookieField("currentCustomerStore") : utag.helpers.cookieField("autoStore");
			var toosoMetadata = window.toosoMetadata;
		  if(toosoMetadata){
				if(toosoMetadata.dr){
					window.ta("set", "referrer", toosoMetadata.dr);	
				}
				if(toosoMetadata.uid){
					window.ta("set", "userId", toosoMetadata.uid);	
				}	
			}			
			if (b["prod_action"] === "add") {
				window.ta('ec:addProduct', {
					'id': b["prod_id"] && b["prod_id"].length > 0 ? b["prod_id"][0] : "",
					'name': b["prod_name"] && b["prod_name"].length > 0 ? b["prod_name"][0] : "",
					//'category': b["prod_category"] && b["prod_category"].length > 0 ? b["prod_category"][0] : "",
					'category': utag.helpers.getCATCode(b,"atc"),
					'brand': b["prod_brand"] && b["prod_brand"].length > 0 ? b["prod_brand"][0] : "",
					'variant': b["prod_variant"] && b["prod_variant"].length > 0 ? b["prod_variant"][0] : "",
					'price': b["prod_price"] && b["prod_price"].length > 0 ? b["prod_price"][0] : "",
					'quantity': b["prod_quantity"] && b["prod_quantity"].length > 0 ? b["prod_quantity"][0] : "",
					'storeId': storeid,
					'position': b["prod_position"] && b["prod_position"].length > 0 && b["prod_position"][0]!=="" ? b["prod_position"][0] : "1",
				});
				// TRACK ADD TO CART ACTION
				ta('ec:setAction', 'add');
				// FINALLY SEND DATA VIA AJAX
				ta('send', 'event', 'cart', 'add')
			}
			if (b["prod_action"] === "remove") {
				window.ta('ec:addProduct', {
					'id': b["prod_id"] && b["prod_id"].length > 0 ? b["prod_id"][0] : "",
					'name': b["prod_name"] && b["prod_name"].length > 0 ? b["prod_name"][0] : "",
					//'category': b["prod_category"] && b["prod_category"].length > 0 ? b["prod_category"][0] : "",
					'category': utag.helpers.getCATCode(b,"atc"),
					'brand': b["prod_brand"] && b["prod_brand"].length > 0 ? b["prod_brand"][0] : "",
					'variant': b["prod_variant"] && b["prod_variant"].length > 0 ? b["prod_variant"][0] : "",
					'price': b["prod_price"] && b["prod_price"].length > 0 ? b["prod_price"][0] : "",
					'quantity': b["prod_quantity"] && b["prod_quantity"].length > 0 ? b["prod_quantity"][0] : "",
					'storeId': storeid,
					'position': b["prod_position"] && b["prod_position"].length > 0 && b["prod_position"][0]!=="" ? b["prod_position"][0] : "1",
				});
				// TRACK ADD TO CART ACTION
				ta('ec:setAction', 'remove');
				// FINALLY SEND DATA VIA AJAX
				ta('send', 'event', 'cart', 'remove')
			}			
			if (b["prod_action"] === "product_click"&& b["clickAfterSearch"]) {
				var toosoMetadata = window.toosoMetadata;
				window.ta('ec:addProduct', {
					'id': b["prod_id"] && b["prod_id"].length > 0 ? b["prod_id"][0] : "",
					'name': b["prod_name"] && b["prod_name"].length > 0 ? b["prod_name"][0] : "",
					'category': b["prod_category"] && b["prod_category"].length > 0 ? b["prod_category"][0] : "",
					'brand': b["prod_brand"] && b["prod_brand"].length > 0 ? b["prod_brand"][0] : "",
					'variant': b["prod_variant"] && b["prod_variant"].length > 0 ? b["prod_variant"][0] : "",
					'price': b["prod_price"] && b["prod_price"].length > 0 ? b["prod_price"][0] : "",
					'quantity': 1,
					'storeId': storeid,
					'position': b["prod_position"] && b["prod_position"].length > 0 ? parseInt(b["prod_position"][0])-1: "",
				});
				var listPC ="";
				if(toosoMetadata){
					if(toosoMetadata.objectId){
						listPC =  toosoMetadata.objectId;
					}
				}
				
				// TRACK ADD TO CART ACTION
				window.ta('ec:setAction', 'click',{list: listPC});
				// FINALLY SEND DATA VIA AJAX
				window.ta('send', 'event', 'cart', 'click' , {
					hitCallback: function () {
						if (window.toosoCallback_Product) {
							//console.log("toosoCallback");
							window.toosoCallback_Product();
							window.toosoCallback_Product = null;
						}
					}
				});
			}			
			if (b["event_type"] === "suggerimento") {
				var toosoMetadata = window.toosoMetadata;
				var arr = [];
				var objectId = toosoMetadata.objectId;
				arr.push(objectId);
				var id = b["keywords_id"]; //toosoMetadata.cid.replace("web_","");
				arr.push(id);
				var key = b["keyword"];
				arr.push(key);
				window.ta('send', 'event', 'suggestions', 'select', arr.join(":"), {
					hitCallback: function () {
						if (window.toosoCallback) {
							//console.log("toosoCallback");
							window.toosoCallback();
							window.toosoCallback = null;
						}
					}
				});
			}
		}

	} else {
		//console.log("sito ajs");
	}
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['event_type']=='catalogo'&&b['event_action']=='acquista su leroymerlin')){try{b['event_label']=b.prod_id + "_" + b.prod_category}catch(e){};b['event_category']='catalogo_link scheda prodotto'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
if(document.location.pathname.indexOf("/cataloghi/")>-1 ){
	b.sito_attuale = "catalogo";
}else{
	b.sito_attuale = "leroymerlin.it";
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((typeof b['cp.lm_stack_site']!='undefined'&&b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&typeof b['cp.lm_stack_site']!='undefined'&&b['cp.lm_stack_site']!='')){try{b['lm_stack_site']=(function(){var data=b["cp.lm_stack_site"]; data=data.split('-'); return data.join(' > ');})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
if(b['cp.persist_sito_precedene'] == b['sito_attuale'] ){  b.sito_attuale = ""; b.sito_provenienza = "";}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){
if(!window.block_track_giardino){
  if (utag.helpers.techtype() === "react") {
    var menu_giardino = document.getElementsByClassName('jss139');
    for(var i=0;i<menu_giardino.length-1;i++){  
      //console.log(menu_giardino[i].textContent); 
      if(menu_giardino[i].textContent.toLowerCase() == "giardino e terrazzo") { var trovato = menu_giardino[i];break; }  
    }
    trovato.addEventListener('mouseover', function (event) {
    var menuveditutto = document.body.querySelectorAll("a[href='https://www.leroymerlin.it/arredamento-giardino-terrazzo-e-giardinaggio']");
    for (var i = 0; i < menuveditutto.length; i++) {
	menuveditutto[i].addEventListener('mousedown', function (event) {
	 if(!window.block_click_giardino){
	  utag.link({
	    event_category: "menu",
	    event_action: "click",
	    event_label: "giardino e terrazzo:vedi tutto"
	  });
	  window.block_click_giardino = true;}
	});
      }
    })
				
	} else {
		jQuery(document).on("mousedown", "a",function () {
				if(jQuery(this).attr('href')){
					if(jQuery(this).attr('href').indexOf("arredamento-giardino-terrazzo-e-giardinaggio") > -1 && (jQuery(this).text().toLowerCase() == "vedi tutto"))
					{
						utag.link({
						event_category: "menu",
						event_action: "click",
						event_label: "giardino e terrazzo:vedi tutto"
						});
					}	
				}
		});
	}

   window.block_track_giardino = true;
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['checkout_delivery_method'].toString().toLowerCase()=='Consegna e installazione'.toLowerCase()){b['checkout_delivery_method']='consegnato & posato'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(typeof b['trans_shipping_method']!='undefined'&&b['trans_shipping_method']!=''){try{b['ext_trans_shipping_method']=b.trans_shipping_method.join(" # ")}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['ext_trans_shipping_method'].toString().toLowerCase()=='Consegna e installazione'.toLowerCase()){b['ext_trans_shipping_method']='consegnato & posato'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['event_action'].toString().toLowerCase()=='registrazione_completata'.toLowerCase()){
// Type your JS code here.
if (window.callBack_Registration) {
	//console.log("toosoCallback");
	window.callBack_Registration();
	window.callBack_Registration = null;
}
} } catch(e){ utag.DB(e) }  },
function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'6487'},{'qa':'6487'},{'prod':'6485'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_iadvize_sid']=c[e][f];m=true};};if(m)break};if(!m)b['ext_iadvize_sid']='';   }},
function(a,b){ try{ if(1){
if(!window.block_track_banner_top){
  if (utag.helpers.techtype() === "react") {
    var banner =document.getElementsByName('LmValuePropositionBanner')[0];
    var _label = banner.childNodes[0].href.split('/').slice(3,banner.childNodes[0].href.split('/').length).join('_');
    banner.addEventListener('mousedown', function (event) {
    
		if(!window.block_track_banner_top){
		  utag.link({
			event_category: "banner",
			event_action: "click on top",
			event_label: _label
		  });
		  window.block_track_banner_top = true;}

		})
				
	} 
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){

if (utag.runonce[216] != 1) {
	if (utag.helpers.techtype() === "react") {
	    utag.runonce[216] = 1;
	    //email
	   /*
		var email_login =document.getElementById("id_email");
		email_login.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "interazione login",
				event_action: "email",
				event_label: window.location.pathname
			});
		});
		//password
		var password_login = document.getElementById("id_password");
		password_login.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "interazione login",
				event_action: "password",
				event_label: window.location.pathname
			});
		});
		*/
		//recupera password
		var list_span = document.querySelectorAll("#app div.mainContainer span");
        for (var i = 0; i < list_span.length; i++) {
        	var span = list_span[i];
        	var testo = span.innerHTML;
        	if (testo.indexOf("Hai dimenticato la password?") > -1) {
        		span.addEventListener("mousedown", function (event) {
        			utag.link({
        				event_category: "interazione login",
        				event_action: "recupera password",
        				event_label: window.location.pathname
        			});
        		})
        		break;
        	}
        }
	}
}



} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
if(b["page_load"] != 1){
	/* salvo conto pw corrente nel sessionstorage */
	if (window.sessionStorage){
		if (window.sessionStorage.getItem('bbPWcount')){
			var pwcount = parseInt(window.sessionStorage.getItem('bbPWcount'));
			pwcount = pwcount+1;
			window.sessionStorage.setItem('bbPWcount',pwcount);
		}else{
			window.sessionStorage.setItem('bbPWcount',1);
		}
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
/* da lanciare all utag.view */

if (b["prod_action"] == "detail" && typeof b["prod_id"] != "undefined" && window.innerWidth && window.innerWidth <= 767 && 
((document.referrer && document.referrer != "" && document.referrer.indexOf('leroymerlin.it') == -1)||(document.location.search && /utm_|gclid/g.test(document.location.search))||(document.cookie.indexOf('bb_fathercatsession')>-1))){
	var setCookie = function(c_name,value,exdays,c_domain) {
	   c_domain = (typeof c_domain === "undefined") ? "" : "domain=" + c_domain + ";";
	   var exdate=new Date();
	   exdate.setDate(exdate.getDate() + exdays);
	   var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
	   document.cookie=c_name + "=" + c_value + ";" + c_domain + "path=/";
	};

	var linkalreadypresent = document.getElementById('bb_father_cat');
	if (typeof b != "undefined" && !linkalreadypresent){
		var href= b["page_name"][0] + "/" + b["page_name"][5] + "-" + b["page_name"][6] + "-c";;
		var text = b["prod_category"][0];
		if (href && text){
			var link = document.createElement("a");
			var linkText = document.createTextNode(text);
			link.appendChild(linkText);
			link.title = text;
			link.href = href;
			link.id="bb_father_cat_link";
			link.setAttribute("style", "color:#66cc33; text-decoration:underline;");
			var span = document.createElement("span");
			var span2 = document.createElement("span");
			span.id ="bb_father_cat";
			span.setAttribute("style", "display:block; margin:0 0 30px 0;color:#66cc33;border-bottom:1px solid #EFEFEF; width:100%; padding:0 0 15px 0;");
			span2.id ="bb_father_cat_int";
			span2.setAttribute("style", "overflow:hidden; display:block;");
			span2.textContent = "Vedi altro in ";
			var img = document.createElement("img");
			img.setAttribute("style", "vertical-align:middle; margin-right:8px; display:block; float:left;");
			img.width="16";
			img.height="16";
			img.src="//cdn.optimizely.com/img/11379424185/befb573689bc4eeba9bf2b2c271a84b3.svg";
			span.insertBefore(img, span.firstChild);
			span.appendChild(span2);
			span2.appendChild(link);
			var title = document.querySelector('h1[itemprop="name"]');
			if (title){
				title.parentNode.insertBefore(span, title);
			}
			setCookie ('bb_fathercatsession','true');
		}
	}

	/* rimuovo link al cambio pagina */
	if (typeof history != "undefined"){
		var pushState = history.pushState;
		history.pushState = function () {
			pushState.apply(history, arguments);
		var rimuovoassets = document.getElementById('bb_father_cat');
			if (rimuovoassets){
				rimuovoassets.parentNode.removeChild(rimuovoassets);
		}
		};
	}
	window.onpopstate = function(event) {
		var rimuovoassets = document.getElementById('bb_father_cat');
			if (rimuovoassets){
				rimuovoassets.parentNode.removeChild(rimuovoassets);
		}
	};
}else{
  	var rimuovoassets = document.getElementById('bb_father_cat');
		if (rimuovoassets){
			rimuovoassets.parentNode.removeChild(rimuovoassets);
  	}	
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
window['optimizely'] = window['optimizely'] || [];
/* optimize activate */
/*
if(b["page_load"] != 1){
	window["optimizely"].push({ "type": "activate" });
	if (b["ut.env"] == "dev"){
		console.log('lancio optimizely activate');        
	}
}
*/
var findOne = function (haystack, arr) {
	var res = false;
	if(typeof haystack == "object" && typeof arr == "object" && haystack instanceof Array && arr instanceof Array)
	for(var m = 0; m<haystack.length; m++) {
		res =  res  || new RegExp("(^" + haystack[m] + "$|^" + haystack[m] + ",|,"+ haystack[m] +",|," +haystack[m] + "$)", "gi").test(arr.join(","));
	}
	return res;		
};
/* tracking funnel */
if (b["page_name"][0] == "home_page"){
		window['optimizely'].push({
		  type: "page",
		  pageName: "home_page",
		  isActive: false
		}); 
		window['optimizely'].push({
		  type: "page",
		  pageName: "home_page"
		});
}else if (b["prod_action"] == "checkout"){
	/* step1 */
	if (b["checkout_step"] == 1){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step1",
		  isActive: false
		});  		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step1"
		});
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step1_ritiro",
		  isActive: false
		});  		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step1_ritiro"
		});  		
	}
	/* step2 */
	else if (b["checkout_step"] == 2 || b["ext_page_name"] === "/checkout/inserimento-email"){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step2",
		  isActive: false
		}); 		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step2"
		});            
	}
	/* step3 */
	else if (b["checkout_step"] == 3){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step3",
			isActive: false		  
		});		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step3"
		});
	}
	/* step4 */
	else if (b["checkout_step"] == 4){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step4",
			isActive: false
		});		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step4"
		});
		if (typeof b["prod_checkout_type"] != "undefined" && b["prod_checkout_type"][0] == "C&R"){
			window['optimizely'].push({
			  type: "page",
			  pageName: "checkout_step4_ab_ritiro_negozio",
			isActive: false			  
			});
			window['optimizely'].push({
			  type: "page",
			  pageName: "checkout_step4_ab_ritiro_negozio"
			});
		}
	}
	/* step5 */
	else if (b["checkout_step"] == 5){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step5",
		  isActive: false
		});		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step5"
		});
	}
	/* step6 */
	else if (b["checkout_step"] == 6){
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step6",
		  isActive: false
		});		
		window['optimizely'].push({
		  type: "page",
		  pageName: "checkout_step6"
		});
	}	
}else if(b["prod_action"] == "purchase"){
	/* fire page */
	window['optimizely'].push({
	  type: "page",
	  pageName: "typage",
	  isActive: false
	});
	window['optimizely'].push({
	  type: "page",
	  pageName: "typage"
	});	
	/* fire revenue */
   window["optimizely"].push({
	 type: "event",
	 eventName: "revenue",
	 tags: {
	   revenue: b["trans_revenue"]*100
	 }
   });
}else if(b["prod_action"] == "detail" && typeof b["prod_id"] != "undefined"){
	/* scheda prodotto generica */
	window['optimizely'].push({
	  type: "page",
	  pageName: "product_page",
	  isActive: false
	});	
	window['optimizely'].push({
	  type: "page",
	  pageName: "product_page"
	});
	/* A/B calculette */
	/*
	var CATCalculette=["CAT3238","CAT225","CAT1031","CAT202","CAT205","CAT210","CAT214","CAT4247"];
	if (b["page_name"][6]){
		var father_cat = [];
		father_cat.push(b["page_name"][6]);
		if (father_cat && findOne(CATCalculette,father_cat)){
			window['optimizely'].push({
			  type: "page",
			  pageName: "product_page_calculette"
			});
		}
	}
	*/
	/* switch prezzi - pagine custom start*/
	/*
	var IDSwitchPrezzi=["36491931","36491945","36484196","36482950","36482985","36483013","36481214","36481242","36481312","36481326","36481263","36481284","36492001","36482964","36491966","36484273","36484112","36483545","36484322","81250969","81253665","35536480","35575155","35782894","36508402","81250974","81250975","35782866","35782873","36642676","36642690","36642606","36642410","35848120","81250955","36239875","34985104","34985482","81256160","36153852","81258194","35884576","34979133","34096916","34979175","36639295","36639302","81254849","81254852","35878143","35880635","34499241","81254296","81254899","81254902","35874412","34581274","35585536","35418530","35855365","35561575","34359962","32438413","32704896","81250225","81250220","36235381","36235395","81264117","35065373","35163436","35861441","36499624","36617763","34938190","35561694","32160051","35582386","35585571"];
	if (findOne(IDSwitchPrezzi,b["prod_id"])){
		if (b["ut.env"] == "dev"){
			console.log('BB - switch prezzi');
		}
		window['optimizely'].push({
			type: "page",
			pageName: "product_page_switch_prezzi",
			isActive: false	  
		});	
		window['optimizely'].push({
			type: "page",
			pageName: "product_page_switch_prezzi"
		});		
	}
	*/
	/* scheda prodotto specifica per prodotti con recensioni presenti */
	if (typeof b["prod_recensioni"] != "undefined" && b["prod_recensioni"][0] != "undefined" && b["prod_recensioni"][0] != ""){
		window['optimizely'].push({
			type: "page",
			pageName: "product_page_recensito",
			isActive: false	  
		});	
		window['optimizely'].push({
			type: "page",
			pageName: "product_page_recensito"
		});		
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
window['optimizely'] = window['optimizely'] || [];
/*
window['optimizely'].push({
	type: "page",
	pageName: "AB_stelline_bazaarvoice",
	isActive: false	  
});	
*/
window['optimizely'].push({
	type: "page",
	pageName: "AB_CTA_listing",
	isActive: false	  
});		
/*
if(b["page_load"] != 1 && ((b["prod_action"] == "detail" && typeof b["prod_id"] != "undefined")|| b["page_name"][0] == "prodotti" || b["page_name"][0] == "offerte" || b["page_name"][0] == "ricerca")){
	var elements = document.querySelectorAll("[name*=SELENIUM_PRODUCT_CARD] path[fill*=star], .fluid__instructions path[fill*=star], [name*=CATALOG_PAGE_PRODUCT_SLIDER_CARD] path[fill*=star], #bv-reviews");
	if (elements && elements.length){
		window['optimizely'].push({
			type: "page",
			pageName: "AB_stelline_bazaarvoice"
		});			
	}

}
*/
if(b["page_load"] != 1 && typeof b.gallery_producttotal != "undefined" && (b["page_name"][0] == "prodotti" || b["page_name"][0] == "offerte" || b["page_name"][0] == "ricerca")){
	/* optimizely x pagina A/B test link cta schedaprodotto */
	window['optimizely'].push({
		type: "page",
		pageName: "AB_CTA_listing"
	});			
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='link'.toLowerCase()){
if(typeof b["prod_action"] != "undefined" && b["prod_action"] == "add"){
	window['optimizely'] = window['optimizely'] || [];
    var findOne = function (haystack, arr) {
    	var res = false;
    	if(typeof haystack == "object" && typeof arr == "object" && haystack instanceof Array && arr instanceof Array)
    	for(var m = 0; m<haystack.length; m++) {
    		res =  res  || new RegExp("(^" + haystack[m] + "$|^" + haystack[m] + ",|,"+ haystack[m] +",|," +haystack[m] + "$)", "gi").test(arr.join(","));
    	}
    	return res;		
    };	
	/* A/B calculette */
	/*
	var CATCalculette=["CAT3238","CAT225","CAT1031","CAT202","CAT205","CAT210","CAT214","CAT4247"];
	if (b["page_name"][6]){
		var father_cat = [];
		father_cat.push(b["page_name"][6]);
		if (father_cat && findOne(CATCalculette,father_cat)){
			window['optimizely'].push({
			  type: "event",
			  eventName: "addtocart_calculette"
			});
		}
	}
	*/
	/* referenze switch prezzi */
	/*
	var aRefNumSwitchPrezzi=["36491931","36491945","36484196","36482950","36482985","36483013","36481214","36481242","36481312","36481326","36481263","36481284","36492001","36482964","36491966","36484273","36484112","36483545","36484322","81250969","81253665","35536480","35575155","35782894","36508402","81250974","81250975","35782866","35782873","36642676","36642690","36642606","36642410","35848120","81250955","36239875","34985104","34985482","81256160","36153852","81258194","35884576","34979133","34096916","34979175","36639295","36639302","81254849","81254852","35878143","35880635","34499241","81254296","81254899","81254902","35874412","34581274","35585536","35418530","35855365","35561575","34359962","32438413","32704896","81250225","81250220","36235381","36235395","81264117","35065373","35163436","35861441","36499624","36617763","34938190","35561694","32160051","35582386","35585571"];
	if (findOne(aRefNumSwitchPrezzi,b["prod_id"])){
		window['optimizely'].push({
		  type: "event",
		  eventName: "addtocart_switch_prezzi"
		});		
	}
	*/
	/* A/B audiencestream carosello conversioni */
	var vp = JSON.parse(localStorage.getItem('last_viewed_filtered'));
	if (vp && typeof vp != "undefined"){
		var presente = false;
		for (var i = 0; i < vp.length; i++) {
			var str_splitted = vp[i].split('|');
			var id = str_splitted[1];
			if(b["prod_id"] == id){
				presente = true;
			}
		}
		if (presente){
			window['optimizely'].push({
				type: "event",
				eventName: "addtocart_audiencestream"
			});	
		}		
	}
	/* add to cart prodotti con "natale" pagename */
    /*
	var arrayLength = b["page_name"].length;
	for (var i = 0; i < arrayLength; i++) {
		if (b["page_name"][i] == "natale"){
			window['optimizely'].push({
				type: "event",
				eventName: "addtocart_natale"
			});				
		}
	}	
	*/
	/* add to cart specifico per i prodotti con recensioni */
	if (typeof b["prod_recensioni"] != "undefined" && b["prod_recensioni"][0] != "undefined" && b["prod_recensioni"][0] != ""){
		window['optimizely'].push({
			type: "event",
			eventName: "addtocart_recensito"
		});			
	}
	/* add to cart specifico cat copriwater */
	if (b["prod_category"][0] == "Copriwater" && typeof b["prod_add_type"][0] != "undefined"){
		window['optimizely'].push({
		  type: "event",
		  eventName: "addtocart_copriwater_"+b["prod_add_type"][0]
		});		
	}
	/* add to cart specifico bagno appoggio */
	if (b["prod_category"][0] == "Set accessori bagno appoggio" && typeof b["prod_add_type"][0] != "undefined"){
		window['optimizely'].push({
		  type: "event",
		  eventName: "addtocart_bagnoappoggio_"+b["prod_add_type"][0]
		});		
	}
	/* add to cart generico */
    window['optimizely'].push({
      type: "event",
      eventName: "addtocart"
    });
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ext_page_name'].toString().toLowerCase()=='/mylm/profilo/a-proposito-di-te'.toLowerCase()){try{b['campi_compilare_mancanti']=b["campi_compilare"].join("|");}catch(e){};b['flag_campi_compilare_mancanti']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['ext_page_name'].toString().toLowerCase()=='/mylm/profilo/aggiornamento-completato'.toLowerCase()){try{b['campi_compilare_salvati']=b["campi_compilare"].join("|");}catch(e){};b['flag_campi_compilare_salvati']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['event_category'].toString().toLowerCase()=='tracciamento rapido ordine'.toLowerCase()&&b['event_action'].toString().toLowerCase()=='prenota ritiro'.toLowerCase())){try{b['event_label']=(function(){var label=b["event_label"]+"_"+b["event_value"];if(typeof b["ggdifferenza"]!="undefined"&&b["ggdifferenza"]!=""){return label+"_"+b["ggdifferenza"];}return label;})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b,c,d,e,f,g){if(1){d=b['ordine_associato'];if(typeof d=='undefined')return;c=[{'0':'NO'},{'1':'SI'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ga_ordine_associato']=c[e][f];m=true};};if(m)break};if(!m)b['ga_ordine_associato']='';   }},
function(a,b){ try{ if((b['page_load']!='1'&&b['ext_page_name']=='/tracciamento-rapido-ordine')){
//if(b["ext_page_name"]!="/tracciamento-rapido-ordine"){
//   utag.runonce[225] = undefined 
//}
if (typeof utag.runonce[225] == 'undefined') {

	if (utag.helpers.techtype() === "react") {
		var bottone_aiuto = document.querySelector("#find-order");
		if(bottone_aiuto){
    		utag.runonce[225] = 1;
    		bottone_aiuto.addEventListener('mousedown', function (event) {
    			utag.link({
    				event_category: "tracciamento rapido ordine",
    				event_action: "click",
    				event_label: "dove trovo numero ordine?"
    			});
    		});
		}
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['page_load']!='1'&&b['ext_page_name'].toString().indexOf('/tracciamento-rapido-ordine/status-')>-1)){
var riepilogo_event = function(){
    utag.runonce[224] = 1;
    utag.runonce[225] = 0;
	var bottone_accedi = document.querySelector('[name="_ACCEDI"]');
	if(bottone_accedi){
		bottone_accedi.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "tracciamento rapido ordine",
				event_action: "registrazione",
				event_label: "accedi"
			});
		});		
	}

	var bottone_needhelp = document.querySelector("#need-help");
	if(bottone_needhelp){
		bottone_needhelp.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "tracciamento rapido ordine",
				event_action: "click",
				event_label: "aiuto"
			});
		});		
	}
    
    var dettagliordine =  document.querySelector('[href*="/mylm/order/"]');
	if(dettagliordine){
		dettagliordine.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "tracciamento rapido ordine",
				event_action: "click",
				event_label: "dettaglio ordine - "+b["page_name"][3] 
			});
		});		
	}
    
}

if (utag.runonce[224] != 1) {
	if (utag.helpers.techtype() === "react") {
        setTimeout(riepilogo_event, 2000);
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'staging'},{'qa':'staging'},{'prod':'production'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_bazaarvoice_env']=c[e][f];m=true};};if(m)break};if(!m)b['ext_bazaarvoice_env']='';   }},
function(a,b){ try{ if((typeof b['_cquan']!='undefined'&&b['_cquan']!=''&&typeof b['_cprice']!='undefined'&&b['_cprice']!='')){try{b['ext_total_revenue_no_tax']=utag.helpers.totalrevenue(b['_cquan'], b['_cprice'])}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b,c,d){ try{ if((typeof b['event_category']!='undefined'&&b['event_category']!=''&&typeof b['event_action']!='undefined'&&b['event_action']!=''&&typeof b['event_label']!='undefined'&&b['event_label']!=''&&typeof b['prod_action']=='undefined')){c=[b['event_category'],b['event_action'],b['event_label']];b['event_behavior']=c.join(' - ')} } catch(e){ utag.DB(e); }  },
function(a,b,c,d,e,f,g){if(1){d=b['idea_cotitolare'];if(typeof d=='undefined')return;c=[{'0':'NO'},{'1':'SI'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_idea_cotitolare']=c[e][f];m=true};};if(m)break};if(!m)b['ext_idea_cotitolare']='';   }},
function(a,b,c,d,e,f,g){if(1){d=b['idea_promo_code'];if(typeof d=='undefined')return;c=[{'0':'NO'},{'1':'SI'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ext_idea_promo_code']=c[e][f];m=true};};if(m)break};if(!m)b['ext_idea_promo_code']='';   }},
function(a,b){ try{ if((/www.leroymerlin.it|www-qa.leroymerlin.it/.test(b['dom.domain'])&&b['page_load']!='1'&&b['ut.event'].toString().toLowerCase()=='view'.toLowerCase())){
var UAV = function () {
    var ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf('safari') > -1) {
        if (ua.indexOf('chrome') > -1 || ua.indexOf('crios')>-1 || ua.indexOf('fxios')>-1) {
            return true;
        } else {
            return false;
        }
    }
	return true;
}

if (/^\/aiuto/.test(b.ext_page_name)&&UAV()){ 
    ///^\/home_page/.test(b.ext_page_name)

	/* appendo CSS*/
	function addCss(fileName) {
	  var head = document.head;
	  var link = document.createElement("link");
	  link.type = "text/css";
	  link.rel = "stylesheet";
	  link.href = fileName;
	  link.id = "bb_css_chatbot_loaded";
	  head.appendChild(link);
	}

	var urlConfig = b["ut.env"] === "prod"? "https://chatbot.prd.cloud.leroymerlin.it/":"https://chatbot.test.cloud.leroymerlin.it/" ;
	var cssConfig = b["ut.env"] === "prod"? "https://chatbot.prd.cloud.leroymerlin.it/css/chatbot_widget.css":"https://chatbot.test.cloud.leroymerlin.it/css/chatbot_widget.css" ;	
	var scriptConfig = b["ut.env"] === "prod"? "https://chatbot.prd.cloud.leroymerlin.it/js/chatbot_widget.js":"https://chatbot.test.cloud.leroymerlin.it/js/chatbot_widget.js" ;	
	if (!document.getElementById("bb_css_chatbot_loaded")){
		addCss(cssConfig);
	}
	var urlConfig = b["ut.env"] === "prod"? "https://chatbot.prd.cloud.leroymerlin.it/":"https://chatbot.test.cloud.leroymerlin.it/" ;
	var scriptConfig = b["ut.env"] === "prod"? "https://chatbot.prd.cloud.leroymerlin.it/js/chatbot_widget.js":"https://chatbot.test.cloud.leroymerlin.it/js/chatbot_widget.js" ;

	/* appendo div */
	if (!document.getElementById("chatbot_container")){
		var iDiv = document.createElement('div');
		iDiv.id = 'chatbot_container';
		document.getElementsByTagName('body')[0].appendChild(iDiv);
	}

	/* appendo js */
	if (typeof window.chatbot_widget_config == "undefined"){
		
		window.chatbot_widget_config = {"url" : urlConfig ,"openByDefault" : false,"sendOpeningMessage": true,"openingMessage": "OPENING","username": null,"userId": null,"chatbot_container": "chatbot_container",'locale': 'it-IT'};
	}
	if (!document.getElementById("bb_script_chatbot_loaded")){
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.src = scriptConfig;
		script.id = 'bb_script_chatbot_loaded';
		document.getElementsByTagName('head')[0].appendChild(script);
	}
}else{
	/* rimuovo asset */

	var rimuovoassets = document.querySelectorAll('#chatbot_container, #bb_css_chatbot_loaded, #bb_script_chatbot_loaded');
	if (rimuovoassets) {
		for (var i = 0, len = rimuovoassets.length; i < len; i++) {
			rimuovoassets[i].parentNode.removeChild(rimuovoassets[i]);
		}
	}	
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(1){
var cat={"CAT3219":{"codice":"CAT3219","desc":"Condizionatorifissi","tema":"clima"},"CAT4121":{"codice":"CAT4121","desc":"Condizionatori portatili","tema":"clima"},"CAT1058":{"codice":"CAT1058","desc":"Telecomandi e accessori condizionatori","tema":"clima"},"CAT292":{"codice":"CAT292","desc":"Ventilatori da appoggio","tema":"clima"},"CAT171":{"codice":"CAT171","desc":"Ventilatori da soffitto","tema":"clima"},"CAT293":{"codice":"CAT293","desc":"Deumidificatori","tema":"clima"},"CAT673":{"codice":"CAT673","desc":"Casette da giardino","tema":"aperto"},"CAT4094":{"codice":"CAT4094","desc":"Pavimenti e accessori per casette","tema":"aperto"},"CAT4265":{"codice":"CAT4265","desc":"Chioschi","tema":"aperto"},"CAT1435":{"codice":"CAT1435","desc":"Garage","tema":"aperto"},"CAT4231":{"codice":"CAT4231","desc":"Carport","tema":"aperto"},"CAT1436":{"codice":"CAT1436","desc":"Legnaie e box porta attrezzi","tema":"aperto"},"CAT1437":{"codice":"CAT1437","desc":"Cucce per cani","tema":"aperto"},"CAT4193":{"codice":"CAT4193","desc":"Bidoni raccolta differenziata","tema":"aperto"},"CAT4266":{"codice":"CAT4266","desc":"Compostiere","tema":"aperto"},"CAT225":{"codice":"CAT225","desc":"Piastrelle in gres porcellanato per esterni","tema":"aperto"},"CAT4098":{"codice":"CAT4098","desc":"Pavimenti in legno e plastica per esterni","tema":"aperto"},"CAT228":{"codice":"CAT228","desc":"Pavimenti in cemento per esterni","tema":"aperto"},"CAT946":{"codice":"CAT946","desc":"Pavimenti in pietra per esterni","tema":"aperto"},"CAT3232":{"codice":"CAT3232","desc":"Pavimenti in cotto per esterni","tema":"aperto"},"CAT218":{"codice":"CAT218","desc":"Erba sintetica","tema":"aperto"},"CAT4257":{"codice":"CAT4257","desc":"Rosoni per pavimenti","tema":"aperto"},"CAT226":{"codice":"CAT226","desc":"Passi giapponesi","tema":"aperto"},"CAT1133":{"codice":"CAT1133","desc":"Accessori per pavimenti da esterno","tema":"aperto"},"CAT4488":{"codice":"CAT4488","desc":"Coffee set da esterno","tema":"aperto"},"CAT655":{"codice":"CAT655","desc":"Set tavolo e sedie da giardino","tema":"aperto"},"CAT4489":{"codice":"CAT4489","desc":"Set per balconi e terrazzi","tema":"aperto"},"CAT656":{"codice":"CAT656","desc":"Tavoli da Giardino","tema":"aperto"},"CAT657":{"codice":"CAT657","desc":"Sedie da giardino","tema":"aperto"},"CAT4425":{"codice":"CAT4425","desc":"Poltrone e divanetti da esterno","tema":"aperto"},"CAT658":{"codice":"CAT658","desc":"Sdraio e lettini","tema":"aperto"},"CAT945":{"codice":"CAT945","desc":"Panchine da giardino","tema":"aperto"},"CAT659":{"codice":"CAT659","desc":"Dondoli e amache","tema":"aperto"},"CAT661":{"codice":"CAT661","desc":"Cuscini da esterno","tema":"aperto"},"CAT4157":{"codice":"CAT4157","desc":"Coperture e manutenzione mobili da giardino","tema":"aperto"},"CAT4091":{"codice":"CAT4091","desc":"Giochi da giardino","tema":"aperto"},"CAT944":{"codice":"CAT944","desc":"Gazebo","tema":"aperto"},"CAT676":{"codice":"CAT676","desc":"Pergole","tema":"aperto"},"CAT4231":{"codice":"CAT4231","desc":"Carport","tema":"aperto"},"CAT4212":{"codice":"CAT4212","desc":"Teli e accessori per gazebo e pergole","tema":"aperto"},"CAT660":{"codice":"CAT660","desc":"Ombrelloni da giardino e basi","tema":"aperto"},"CAT4237":{"codice":"CAT4237","desc":"Vele ombreggianti","tema":"aperto"},"CAT4097":{"codice":"CAT4097","desc":"Divisori giardino","tema":"aperto"},"CAT825":{"codice":"CAT825","desc":"Reti ombreggianti e frangivista","tema":"aperto"},"CAT4465":{"codice":"CAT4465","desc":"Arelle e Cannicci","tema":"aperto"},"CAT4197":{"codice":"CAT4197","desc":"Siepi artificiali","tema":"aperto"},"CAT1439":{"codice":"CAT1439","desc":"Grigliati in legno e tralicci","tema":"aperto"},"CAT838":{"codice":"CAT838","desc":"Pannelli decorativi e trasparenti per esterno","tema":"aperto"},"CAT810":{"codice":"CAT810","desc":"Recinzioni e reti giardino","tema":"aperto"},"CAT665":{"codice":"CAT665","desc":"Cancelli in ferro","tema":"aperto"},"CAT663":{"codice":"CAT663","desc":"Steccati e cancelletti giardino","tema":"aperto"},"CAT1495":{"codice":"CAT1495","desc":"Pali in legno per recinzioni","tema":"aperto"},"CAT1438":{"codice":"CAT1438","desc":"Ferramenta per strutture in legno","tema":"aperto"},"CAT667":{"codice":"CAT667","desc":"Barbecue","tema":"aperto"},"CAT668":{"codice":"CAT668","desc":"Griglie per barbecue e accessori","tema":"aperto"},"CAT1163":{"codice":"CAT1163","desc":"Pietra ollare, bistecchiere in pietra e piastre","tema":"aperto"},"CAT4325":{"codice":"CAT4325","desc":"Barbecue WEBER e accessori","tema":"aperto"},"CAT725":{"codice":"CAT725","desc":"Barbecue in muratura","tema":"aperto"},"CAT1162":{"codice":"CAT1162","desc":"Forni in muratura","tema":"aperto"},"CAT1132":{"codice":"CAT1132","desc":"Accessori per barbecue in muratura","tema":"aperto"},"CAT833":{"codice":"CAT833","desc":"Carbonella e accendifuoco","tema":"aperto"},"CAT669":{"codice":"CAT669","desc":"Piscine fuori terra","tema":"aperto"},"CAT4324":{"codice":"CAT4324","desc":"Piscine interrate","tema":"aperto"},"CAT4243":{"codice":"CAT4243","desc":"Trattamento acqua e pulizia piscine","tema":"aperto"},"CAT670":{"codice":"CAT670","desc":"Accessori per piscine","tema":"aperto"},"CAT4245":{"codice":"CAT4245","desc":"Coperture e teli per piscine","tema":"aperto"},"CAT4326":{"codice":"CAT4326","desc":"Riscaldatori e pompe di calore per piscine","tema":"aperto"},"CAT949":{"codice":"CAT949","desc":"Docce da giardino","tema":"aperto"},"CAT4104":{"codice":"CAT4104","desc":"Fioriere e sottofioriere in plastica","tema":"aperto"},"CAT4107":{"codice":"CAT4107","desc":"Fioriere e sottofioriere in terracotta","tema":"aperto"},"CAT864":{"codice":"CAT864","desc":"Fioriere in legno","tema":"aperto"},"CAT4117":{"codice":"CAT4117","desc":"Fioriere in cemento","tema":"aperto"},"CAT4103":{"codice":"CAT4103","desc":"Vasi e sottovasi in plastica","tema":"aperto"},"CAT4106":{"codice":"CAT4106","desc":"Vasi e sottovasi in terracotta","tema":"aperto"},"CAT4184":{"codice":"CAT4184","desc":"Vasi da interno","tema":"aperto"},"CAT803":{"codice":"CAT803","desc":"Vasi in ceramica","tema":"aperto"},"CAT939":{"codice":"CAT939","desc":"Vasi in metallo","tema":"aperto"},"CAT804":{"codice":"CAT804","desc":"Vasi in vetro","tema":"aperto"},"CAT4118":{"codice":"CAT4118","desc":"Portavasi, portabalconiere e sospensioni","tema":"aperto"},"CAT749":{"codice":"CAT749","desc":"Tagliaerba","tema":"aperto"},"CAT598":{"codice":"CAT598","desc":"Trattorini tagliaerba","tema":"aperto"},"CAT599":{"codice":"CAT599","desc":"Decespugliatori","tema":"aperto"},"CAT600":{"codice":"CAT600","desc":"Tagliabordi","tema":"aperto"},"CAT601":{"codice":"CAT601","desc":"Tagliasiepi","tema":"aperto"},"CAT768":{"codice":"CAT768","desc":"Forbici elettriche per erba","tema":"aperto"},"CAT814":{"codice":"CAT814","desc":"Arieggiatori","tema":"aperto"},"CAT605":{"codice":"CAT605","desc":"Motozappe","tema":"aperto"},"CAT606":{"codice":"CAT606","desc":"Motocoltivatori","tema":"aperto"},"CAT602":{"codice":"CAT602","desc":"Motoseghe e elettroseghe","tema":"aperto"},"CAT4136":{"codice":"CAT4136","desc":"Motocarriole","tema":"aperto"},"CAT603":{"codice":"CAT603","desc":"Soffiatori e aspiratori","tema":"aperto"},"CAT4225":{"codice":"CAT4225","desc":"Atomizzatori","tema":"aperto"},"CAT604":{"codice":"CAT604","desc":"Biotrituratori","tema":"aperto"},"CAT607":{"codice":"CAT607","desc":"Spaccalegna","tema":"aperto"},"CAT813":{"codice":"CAT813","desc":"Spazzaneve","tema":"aperto"},"CAT608":{"codice":"CAT608","desc":"Accessori macchine da giardino","tema":"aperto"},"CAT393":{"codice":"CAT393","desc":"Idropulitrici","tema":"aperto"},"CAT609":{"codice":"CAT609","desc":"Accessori per idropulitrici","tema":"aperto"},"CAT4383":{"codice":"CAT4383","desc":"Detergenti per idropulitrici","tema":"aperto"},"CAT1475":{"codice":"CAT1475","desc":"Bulbi","tema":"aperto"},"CAT649":{"codice":"CAT649","desc":"Insetticidi e prodotti per la cura delle piante","tema":"aperto"},"CAT647":{"codice":"CAT647","desc":"Terricci","tema":"aperto"},"CAT648":{"codice":"CAT648","desc":"Concimi","tema":"aperto"},"CAT1205":{"codice":"CAT1205","desc":"Diserbanti","tema":"aperto"},"CAT942":{"codice":"CAT942","desc":"Spruzzatori e nebulizzatori","tema":"aperto"},"CAT800":{"codice":"CAT800","desc":"Accessori per la semina","tema":"aperto"},"CAT651":{"codice":"CAT651","desc":"Serre e coperture","tema":"aperto"},"CAT1432":{"codice":"CAT1432","desc":"Teli di protezione e teli per pacciamatura","tema":"aperto"},"CAT798":{"codice":"CAT798","desc":"Tutori e canne","tema":"aperto"},"CAT640":{"codice":"CAT640","desc":"Semi prato","tema":"aperto"},"CAT796":{"codice":"CAT796","desc":"Semi fiori","tema":"aperto"},"CAT797":{"codice":"CAT797","desc":"Semi orto","tema":"aperto"},"CAT799":{"codice":"CAT799","desc":"Termometri","tema":"aperto"},"CAT4228":{"codice":"CAT4228","desc":"Vanghe e badili","tema":"aperto"},"CAT4220":{"codice":"CAT4220","desc":"Picconi, zappe e zappette","tema":"aperto"},"CAT4233":{"codice":"CAT4233","desc":"Scope per esterni, rastrelli e forche","tema":"aperto"},"CAT4235":{"codice":"CAT4235","desc":"Estirpatori, sarchiatori e arieggiatori","tema":"aperto"},"CAT4238":{"codice":"CAT4238","desc":"Spargisale, spandiconcime e rulli","tema":"aperto"},"CAT4239":{"codice":"CAT4239","desc":"Carrelli e sacchi raccoglitutto","tema":"aperto"},"CAT4224":{"codice":"CAT4224","desc":"Pale da neve, spingineve e rompighiaccio","tema":"aperto"},"CAT4255":{"codice":"CAT4255","desc":"Forbici e cesoie da potatura","tema":"aperto"},"CAT614":{"codice":"CAT614","desc":"Falci e roncole","tema":"aperto"},"CAT4254":{"codice":"CAT4254","desc":"Accette, asce e seghe per legno","tema":"aperto"},"CAT4256":{"codice":"CAT4256","desc":"Svettatoi e troncarami","tema":"aperto"},"CAT863":{"codice":"CAT863","desc":"Manici per attrezzi da giardino","tema":"aperto"},"CAT616":{"codice":"CAT616","desc":"Piccoli attrezzi per l'orto e il giardinaggio","tema":"aperto"},"CAT617":{"codice":"CAT617","desc":"Guanti da giardinaggio","tema":"aperto"},"CAT811":{"codice":"CAT811","desc":"Stivali e calzature per giardinaggio","tema":"aperto"},"CAT812":{"codice":"CAT812","desc":"Abbigliamento e accessori da giardinaggio","tema":"aperto"},"CAT1206":{"codice":"CAT1206","desc":"Tubi per irrigazione di superficie","tema":"aperto"},"CAT621":{"codice":"CAT621","desc":"Raccordi per irrigazione di superficie","tema":"aperto"},"CAT816":{"codice":"CAT816","desc":"Irrigatori di superficie","tema":"aperto"},"CAT815":{"codice":"CAT815","desc":"Carrelli e avvolgitubo","tema":"aperto"},"CAT622":{"codice":"CAT622","desc":"Pistole e lance irrigazione","tema":"aperto"},"CAT935":{"codice":"CAT935","desc":"Rubinetti da giardino","tema":"aperto"},"CAT623":{"codice":"CAT623","desc":"Innaffiatoi","tema":"aperto"},"CAT936":{"codice":"CAT936","desc":"Irrigatori per vasi e acqua gel per piante","tema":"aperto"},"CAT635":{"codice":"CAT635","desc":"Serbatoi recupero acqua piovana","tema":"aperto"},"CAT633":{"codice":"CAT633","desc":"Pompe","tema":"aperto"},"CAT820":{"codice":"CAT820","desc":"Accessori pompe","tema":"aperto"},"CAT625":{"codice":"CAT625","desc":"Programmatori per irrigazione a goccia","tema":"aperto"},"CAT748":{"codice":"CAT748","desc":"Tubi per irrigazione a goccia","tema":"aperto"},"CAT818":{"codice":"CAT818","desc":"Tubi gocciolanti e porosi","tema":"aperto"},"CAT704":{"codice":"CAT704","desc":"Raccordi e accessori per irrigazione a goccia","tema":"aperto"},"CAT626":{"codice":"CAT626","desc":"Irrigatori e gocciolatori per irrigazione a goccia","tema":"aperto"},"CAT627":{"codice":"CAT627","desc":"Kit irrigazione a goccia","tema":"aperto"},"CAT4143":{"codice":"CAT4143","desc":"Programmatori per irrigazione interrata","tema":"aperto"},"CAT1207":{"codice":"CAT1207","desc":"Tubi per irrigazione interrata","tema":"aperto"},"CAT629":{"codice":"CAT629","desc":"Raccordi e accessori per irrigazione interrata","tema":"aperto"},"CAT630":{"codice":"CAT630","desc":"Elettrovalvole e pozzetti","tema":"aperto"},"CAT631":{"codice":"CAT631","desc":"Irrigatori da interrare","tema":"aperto"},"CAT835":{"codice":"CAT835","desc":"Antizanzare","tema":"aperto"},"CAT1318":{"codice":"CAT1318","desc":"Anti formiche, scarafaggi e altri insetti","tema":"aperto"},"CAT1316":{"codice":"CAT1316","desc":"Trappole e repellenti per topi e talpe","tema":"aperto"},"CAT1317":{"codice":"CAT1317","desc":"Repellenti e disabituanti","tema":"aperto"},"CAT1161":{"codice":"CAT1161","desc":"Fontane","tema":"aperto"},"CAT1474":{"codice":"CAT1474","desc":"Rubinetti per fontane","tema":"aperto"},"CAT830":{"codice":"CAT830","desc":"Accessori per fontane","tema":"aperto"},"CAT829":{"codice":"CAT829","desc":"Lavatoi e lavelli da esterno","tema":"aperto"},"CAT828":{"codice":"CAT828","desc":"Laghetti artificiali e accessori","tema":"aperto"},"CAT346":{"codice":"CAT346","desc":"Graniglia e sassi da giardino","tema":"aperto"},"CAT4198":{"codice":"CAT4198","desc":"Bordure per aiuole","tema":"aperto"},"CAT1165":{"codice":"CAT1165","desc":"Muretti da giardino"},"CAT344":{"codice":"CAT344","desc":"Cordoli","tema":"aperto"},"CAT345":{"codice":"CAT345","desc":"Mattoni in tufo","tema":"aperto"},"CAT1433":{"codice":"CAT1433","desc":"Decori in terracotta","tema":"aperto"},"CAT4315":{"codice":"CAT4315","desc":"Tempotest ParÃ tende da sole","tema":"aperto"},"CAT260":{"codice":"CAT260","desc":"Tende da sole","tema":"aperto"},"CAT839":{"codice":"CAT839","desc":"Tende da esterno ad anelli","tema":"aperto"},"CAT258":{"codice":"CAT258","desc":"Zanzariere","tema":"aperto"},"CAT251":{"codice":"CAT251","desc":"Pensiline e tettoie","tema":"aperto"},"CAT175":{"codice":"CAT175","desc":"Applique da esterno","tema":"aperto"},"CAT174":{"codice":"CAT174","desc":"Plafoniere da esterno","tema":"aperto"},"CAT176":{"codice":"CAT176","desc":"Sospensioni da esterno","tema":"aperto"},"CAT177":{"codice":"CAT177","desc":"Lampioni e lampioncini","tema":"aperto"},"CAT433":{"codice":"CAT433","desc":"Proiettori","tema":"aperto"},"CAT1470":{"codice":"CAT1470","desc":"Lampade solari","tema":"aperto"},"CAT1473":{"codice":"CAT1473","desc":"Faretti da incasso per esterno","tema":"aperto"},"CAT520":{"codice":"CAT520","desc":"Impregnanti","tema":"aperto"},"CAT3218":{"codice":"CAT3218","desc":"Flatting e vernici per legno esterno","tema":"aperto"},"CAT521":{"codice":"CAT521","desc":"Oli protettivi e detergenti per legno esterno","tema":"aperto"},"CAT528":{"codice":"CAT528","desc":"Smalti per legno esterno","tema":"aperto"},"CAT4204":{"codice":"CAT4204","desc":"Trattamenti antitarlo","tema":"aperto"},"CAT1074":{"codice":"CAT1074","desc":"Vernici e trattamenti protettivi","tema":"aperto"},"CAT175":{"codice":"CAT175","desc":"Applique da esterno","tema":"aperto"},"CAT177":{"codice":"CAT177","desc":"Lampioni e lampioncini","tema":"aperto"},"CAT433":{"codice":"CAT433","desc":"Proiettori","tema":"aperto"},"CAT174":{"codice":"CAT174","desc":"Plafoniere da esterno","tema":"aperto"},"CAT176":{"codice":"CAT176","desc":"Sospensioni da esterno","tema":"aperto"},"CAT4484":{"codice":"CAT4484","desc":"Catene luminose e lampade portatili","tema":"aperto"},"CAT1473":{"codice":"CAT1473","desc":"Faretti da incasso per esterno","tema":"aperto"},"CAT1470":{"codice":"CAT1470","desc":"Lampade solari","tema":"aperto"},"CAT225":{"codice":"CAT225","desc":"Piastrelle in gres porcellanato per esterni","tema":"aperto"},"CAT4098":{"codice":"CAT4098","desc":"Pavimenti in legno e plastica per esterni","tema":"aperto"},"CAT228":{"codice":"CAT228","desc":"Pavimenti in cemento per esterni","tema":"aperto"},"CAT946":{"codice":"CAT946","desc":"Pavimenti in pietra per esterni","tema":"aperto"},"CAT3232":{"codice":"CAT3232","desc":"Pavimenti in cotto per esterni","tema":"aperto"},"CAT218":{"codice":"CAT218","desc":"Erba sintetica","tema":"aperto"},"CAT4257":{"codice":"CAT4257","desc":"Rosoni per pavimenti","tema":"aperto"},"CAT226":{"codice":"CAT226","desc":"Passi giapponesi","tema":"aperto"},"CAT1133":{"codice":"CAT1133","desc":"Accessori per pavimenti da esterno","tema":"aperto"},"CAT4315":{"codice":"CAT4315","desc":"Tempotest ParÃ tende da sole","tema":"aperto"},"CAT260":{"codice":"CAT260","desc":"Tende da sole","tema":"aperto"},"CAT839":{"codice":"CAT839","desc":"Tende da esterno ad anelli","tema":"aperto"},"CAT258":{"codice":"CAT258","desc":"Zanzariere","tema":"aperto"},"CAT251":{"codice":"CAT251","desc":"Pensiline e tettoie","tema":"aperto"},"CAT238":{"codice":"CAT238","desc":"Carta da parati","tema":"relooking"},"CAT1328":{"codice":"CAT1328","desc":"Pellicole adesive per mobili e pareti","tema":"relooking"},"CAT961":{"codice":"CAT961","desc":"Profili, pannelli e rosoni in polistirolo","tema":"relooking"},"CAT4382":{"codice":"CAT4382","desc":"Serie Vimar","tema":"relooking"},"CAT4386":{"codice":"CAT4386","desc":"Serie BTicino","tema":"relooking"},"CAT4387":{"codice":"CAT4387","desc":"Serie FEB","tema":"relooking"},"CAT4388":{"codice":"CAT4388","desc":"Serie Simon Urmet","tema":"relooking"},"CAT436":{"codice":"CAT436","desc":"Placche per interruttori","tema":"relooking"},"CAT362":{"codice":"CAT362","desc":"Perline","tema":"relooking"},"CAT361":{"codice":"CAT361","desc":"Listoni legno","tema":"relooking"},"CAT231":{"codice":"CAT231","desc":"Battiscopa in legno e pvc","tema":"relooking"},"CAT1451":{"codice":"CAT1451","desc":"Maniglie per porte interne","tema":"relooking"},"CAT298":{"codice":"CAT298","desc":"Pomoli e maniglie per mobili","tema":"relooking"},"CAT247":{"codice":"CAT247","desc":"Porte interne","tema":"relooking"},"CAT4230":{"codice":"CAT4230","desc":"Porte scorrevoli esterno muro con binario","tema":"relooking"},"CAT116":{"codice":"CAT116","desc":"Porte a soffietto","tema":"relooking"},"CAT4123":{"codice":"CAT4123","desc":"Ante e pannelli scorrevoli","tema":"relooking"},"CAT4116":{"codice":"CAT4116","desc":"Pannelli divisori","tema":"relooking"},"CAT1451":{"codice":"CAT1451","desc":"Maniglie per porte interne","tema":"relooking"},"CAT101":{"codice":"CAT101","desc":"Mensole","tema":"relooking"},"CAT103":{"codice":"CAT103","desc":"Reggimensole","tema":"relooking"},"CAT114":{"codice":"CAT114","desc":"Pannelli e ripiani melaminici","tema":"relooking"},"CAT1197":{"codice":"CAT1197","desc":"Fermalibri","tema":"relooking"},"CAT210":{"codice":"CAT210","desc":"Pavimenti laminati","tema":"relooking"},"CAT4241":{"codice":"CAT4241","desc":"Battiscopa per laminati e vinilici","tema":"relooking"},"CAT208":{"codice":"CAT208","desc":"Sottopavimenti","tema":"relooking"},"CAT206":{"codice":"CAT206","desc":"Accessori per la posa del parquet e del laminato","tema":"relooking"},"CAT983":{"codice":"CAT983","desc":"Detergenti pavimenti e parquet","tema":"relooking"},"CAT4247":{"codice":"CAT4247","desc":"Pavimenti PVC flottanti","tema":"relooking"},"CAT214":{"codice":"CAT214","desc":"Pavimenti PVC adesivi","tema":"relooking"},"CAT213":{"codice":"CAT213","desc":"Pavimenti su misura al taglio","tema":"relooking"},"CAT4241":{"codice":"CAT4241","desc":"Battiscopa per laminati e vinilici","tema":"relooking"},"CAT219":{"codice":"CAT219","desc":"Colle e preparatori per moquette e pavimenti PVC","tema":"relooking"},"CAT234":{"codice":"CAT234","desc":"Smalti per pavimento","tema":"relooking"},"CAT235":{"codice":"CAT235","desc":"Resine per pavimenti e rivestimenti","tema":"relooking"},"CAT236":{"codice":"CAT236","desc":"Vetrificatori e oli per parquet","tema":"relooking"},"CAT509":{"codice":"CAT509","desc":"Pittura murale bianca","tema":"relooking"},"CAT510":{"codice":"CAT510","desc":"Pittura murale colorata","tema":"relooking"},"CAT959":{"codice":"CAT959","desc":"Coloranti universali","tema":"relooking"},"CAT960":{"codice":"CAT960","desc":"Pittura effetto lavagna e magnetica","tema":"relooking"},"CAT511":{"codice":"CAT511","desc":"Pittura con effetti decorativi","tema":"relooking"},"CAT513":{"codice":"CAT513","desc":"Smalti per interni","tema":"relooking"},"CAT514":{"codice":"CAT514","desc":"Smalti spray per interni","tema":"relooking"},"CAT962":{"codice":"CAT962","desc":"Smalti per piastrelle, termosifoni e mobili","tema":"relooking"},"CAT4379":{"codice":"CAT4379","desc":"Tester colorate","tema":"relooking"},"CAT525":{"codice":"CAT525","desc":"Pittura murale per esterni","tema":"relooking"},"CAT526":{"codice":"CAT526","desc":"Smalti antiruggine per ferro","tema":"relooking"},"CAT4034":{"codice":"CAT4034","desc":"Smalti spray antiruggine per ferro","tema":"relooking"},"CAT4033":{"codice":"CAT4033","desc":"Smalti per esterni","tema":"relooking"},"CAT527":{"codice":"CAT527","desc":"Vernici e trattamenti specifici per esterno","tema":"relooking"},"CAT3214":{"codice":"CAT3214","desc":"Restauro mobili e cornici","tema":"relooking"},"CAT963":{"codice":"CAT963","desc":"Vernici e tinte per legno","tema":"relooking"},"CAT522":{"codice":"CAT522","desc":"Pitture decorative per mobili","tema":"relooking"},"CAT379":{"codice":"CAT379","desc":"Rulli e minirulli","tema":"relooking"},"CAT966":{"codice":"CAT966","desc":"Rulli e applicatori per effetti decorativi","tema":"relooking"},"CAT518":{"codice":"CAT518","desc":"Nastri per mascheratura e teli di protezione","tema":"relooking"},"CAT4148":{"codice":"CAT4148","desc":"Guanti e tute","tema":"relooking"},"CAT4035":{"codice":"CAT4035","desc":"Bacinelle, secchi di diluizione e altri accessori","tema":"relooking"},"CAT380":{"codice":"CAT380","desc":"Attrezzi per verniciare","tema":"relooking"},"CAT1086":{"codice":"CAT1086","desc":"Spatole e raschietti","tema":"relooking"},"CAT965":{"codice":"CAT965","desc":"Stencil","tema":"relooking"},"CAT33":{"codice":"CAT33","desc":"Mobili bagno","tema":"ristrutturazionebagno"},"CAT4221":{"codice":"CAT4221","desc":"Colonne e pensili bagno","tema":"ristrutturazionebagno"},"CAT35":{"codice":"CAT35","desc":"Specchi bagno","tema":"ristrutturazionebagno"},"CAT6":{"codice":"CAT6","desc":"Lavabi da appoggio","tema":"ristrutturazionebagno"},"CAT881":{"codice":"CAT881","desc":"Mobili lavanderia","tema":"ristrutturazionebagno"},"CAT4115":{"codice":"CAT4115","desc":"Box doccia","tema":"ristrutturazionebagno"},"CAT4321":{"codice":"CAT4321","desc":"Porte e pareti doccia","tema":"ristrutturazionebagno"},"CAT21":{"codice":"CAT21","desc":"Piatti doccia","tema":"ristrutturazionebagno"},"CAT4323":{"codice":"CAT4323","desc":"Docce walk-in","tema":"ristrutturazionebagno"},"CAT4130":{"codice":"CAT4130","desc":"Soluzioni per trasformare la vasca in doccia","tema":"ristrutturazionebagno"},"CAT17":{"codice":"CAT17","desc":"Cabine idromassaggio","tema":"ristrutturazionebagno"},"CAT3216":{"codice":"CAT3216","desc":"Saune","tema":"ristrutturazionebagno"},"CAT12":{"codice":"CAT12","desc":"Vasca da bagno","tema":"ristrutturazionebagno"},"CAT14":{"codice":"CAT14","desc":"Vasca idromassaggio","tema":"ristrutturazionebagno"},"CAT13":{"codice":"CAT13","desc":"Pareti vasca","tema":"ristrutturazionebagno"},"CAT877":{"codice":"CAT877","desc":"Accessori e ricambi vasca","tema":"ristrutturazionebagno"},"CAT880":{"codice":"CAT880","desc":"Accessori e ricambi vasca idromassaggio","tema":"ristrutturazionebagno"},"CAT9":{"codice":"CAT9","desc":"Coppia sanitari","tema":"ristrutturazionebagno"},"CAT4394":{"codice":"CAT4394","desc":"Vaso wc","tema":"ristrutturazionebagno"},"CAT8":{"codice":"CAT8","desc":"Bidet","tema":"ristrutturazionebagno"},"CAT10":{"codice":"CAT10","desc":"Copriwater","tema":"ristrutturazionebagno"},"CAT4250":{"codice":"CAT4250","desc":"Sanitari disabili e terza etÃ","tema":"ristrutturazionebagno"},"CAT4249":{"codice":"CAT4249","desc":"Sanitari infanzia","tema":"ristrutturazionebagno"},"CAT4248":{"codice":"CAT4248","desc":"Orinatoi e vasi alla turca","tema":"ristrutturazionebagno"},"CAT31":{"codice":"CAT31","desc":"Set rubinetteria bagno","tema":"ristrutturazionebagno"},"CAT4395":{"codice":"CAT4395","desc":"Rubinetti per lavabo","tema":"ristrutturazionebagno"},"CAT4396":{"codice":"CAT4396","desc":"Rubinetti per bidet","tema":"ristrutturazionebagno"},"CAT4397":{"codice":"CAT4397","desc":"Rubinetti per doccia","tema":"ristrutturazionebagno"},"CAT4398":{"codice":"CAT4398","desc":"Rubinetti per vasca","tema":"ristrutturazionebagno"},"CAT4026":{"codice":"CAT4026","desc":"Rubinetti per ambienti pubblici","tema":"ristrutturazionebagno"},"CAT6":{"codice":"CAT6","desc":"Lavabi da appoggio","tema":"ristrutturazionebagno"},"CAT7":{"codice":"CAT7","desc":"Lavabi sospesi e a colonna","tema":"ristrutturazionebagno"},"CAT23":{"codice":"CAT23","desc":"Colonne doccia","tema":"ristrutturazionebagno"},"CAT22":{"codice":"CAT22","desc":"Colonne doccia idromassaggio","tema":"ristrutturazionebagno"},"CAT27":{"codice":"CAT27","desc":"Soffioni doccia","tema":"ristrutturazionebagno"},"CAT24":{"codice":"CAT24","desc":"Saliscendi doccia","tema":"ristrutturazionebagno"},"CAT25":{"codice":"CAT25","desc":"Doccette","tema":"ristrutturazionebagno"},"CAT874":{"codice":"CAT874","desc":"Flessibili e ricambi doccia","tema":"ristrutturazionebagno"},"CAT202":{"codice":"CAT202","desc":"Rivestimenti bagno","tema":"ristrutturazionebagno"},"CAT1448":{"codice":"CAT1448","desc":"Mosaici","tema":"ristrutturazionebagno"},"CAT47":{"codice":"CAT47","desc":"Illuminazione bagno","tema":"ristrutturazionebagno"},"CAT35":{"codice":"CAT35","desc":"Specchi bagno","tema":"ristrutturazionebagno"},"CAT202":{"codice":"CAT202","desc":"Rivestimenti bagno","tema":"ristrutturazionebagno"},"CAT1448":{"codice":"CAT1448","desc":"Mosaici","tema":"ristrutturazionebagno"},"CAT52":{"codice":"CAT52","desc":"Termoarredi","tema":"ristrutturazionebagno"},"CAT454":{"codice":"CAT454","desc":"Tubi e raccordi multistrato","tema":"ristrutturazionebagno"},"CAT455":{"codice":"CAT455","desc":"Tubi polipropilene random a saldare","tema":"ristrutturazionebagno"},"CAT456":{"codice":"CAT456","desc":"Tubi e raccordi in polietilene","tema":"ristrutturazionebagno"},"CAT458":{"codice":"CAT458","desc":"Tubi e raccordi in ghisa","tema":"ristrutturazionebagno"},"CAT459":{"codice":"CAT459","desc":"Tubi e raccordi in rame e ottone","tema":"ristrutturazionebagno"},"CAT4053":{"codice":"CAT4053","desc":"Rompigetto e accessori rubinetti","tema":"ristrutturazionebagno"},"CAT26":{"codice":"CAT26","desc":"Flessibili e cannette","tema":"ristrutturazionebagno"},"CAT1106":{"codice":"CAT1106","desc":"Guarnizioni e tenuta stagna","tema":"ristrutturazionebagno"},"CAT460":{"codice":"CAT460","desc":"Valvole e accessori idraulici","tema":"ristrutturazionebagno"},"CAT747":{"codice":"CAT747","desc":"Accessori impianto gas","tema":"ristrutturazionebagno"},"CAT1108":{"codice":"CAT1108","desc":"Manutenzione impianti idraulici","tema":"ristrutturazionebagno"},"CAT4055":{"codice":"CAT4055","desc":"Rubinetti d'arresto","tema":"ristrutturazionebagno"},"CAT4056":{"codice":"CAT4056","desc":"Collettori idraulici","tema":"ristrutturazionebagno"},"CAT4057":{"codice":"CAT4057","desc":"Tubi polipropilene a innesto","tema":"ristrutturazionebagno"},"CAT461":{"codice":"CAT461","desc":"Sifoni e pilette","tema":"ristrutturazionebagno"},"CAT4060":{"codice":"CAT4060","desc":"Tappi e saltarelli","tema":"ristrutturazionebagno"},"CAT4058":{"codice":"CAT4058","desc":"Canotti","tema":"ristrutturazionebagno"},"CAT462":{"codice":"CAT462","desc":"Tubi carico - scarico lavatrice","tema":"ristrutturazionebagno"},"CAT1009":{"codice":"CAT1009","desc":"Accessori lavello","tema":"ristrutturazionebagno"},"CAT466":{"codice":"CAT466","desc":"Cassette wc","tema":"ristrutturazionebagno"},"CAT467":{"codice":"CAT467","desc":"Accessori e ricambi cassette wc","tema":"ristrutturazionebagno"},"CAT1112":{"codice":"CAT1112","desc":"Trituratori e WC chimici","tema":"ristrutturazionebagno"},"CAT1113":{"codice":"CAT1113","desc":"Kit fissaggio sanitari","tema":"ristrutturazionebagno"},"PE001":{"codice":"PE001","desc":"/stufe-climatizzatori-idraulica/speciale-climatizzatori","tema":"clima"},"PE002":{"codice":"PE002","desc":"/speciale-bagno/ristrutturare-bagno","tema":"ristrutturazionebagno"},"PE003":{"codice":"PE003","desc":"/idee-progetti/trasforma-vasca-in-doccia","tema":"ristrutturazionebagno"}}

if(b["page_name_lv7"]){
    if (cat[b["page_name_lv7"]]){
        if(cat[b["page_name_lv7"]].tema ==="ristrutturazionebagno"){
            if(b["va.properties.5468"]==="PE002"||b["va.properties.5468"]==="PE003"){
                if(b["prod_action"] &&  (b["prod_action"] ==="add" || b["prod_action"] ==="wishlist_add")){
                    b["as_cat_viewed"] = b["page_name_lv7"];
                    b["as_focus"] = "strong";
                }               
            }
        }else{
            b["as_cat_viewed"] = b["page_name_lv7"];
            if(b["va.properties.5455"] === b["as_cat_viewed"]){
                b["as_focus"] = b["va.properties.5457"];
            }else{
                if(cat[b["va.properties.5455"]]){
                    if(cat[b["page_name_lv7"]].tema === cat[b["va.properties.5455"]].tema){
                        b["as_focus"] = b["va.properties.5457"];    
                    }else{
                        b["as_focus"] = "light";    
                    } 
                }else{
                    b["as_focus"] = "light"; 
                }

                
            }
            if(b["prod_action"] &&  (b["prod_action"] ==="add" || b["prod_action"] ==="wishlist_add")){
                b["as_focus"] = "strong";
            }
        }   
    }
}else if(b["ext_page_name"]==="/stufe-climatizzatori-idraulica/speciale-climatizzatori"){
    b["as_pageeditorial_viewed"] = "PE001";
    b["as_cat_viewed"] = "PE001";
    b["as_focus"] = "light";
}else if(b["ext_page_name"]==="/speciale-bagno/ristrutturare-bagno"){
    b["as_pageeditorial_viewed"] = "PE002";
    b["as_cat_viewed"] = "PE002";
    b["as_focus"] = "light";
}else if(b["ext_page_name"]==="/idee-progetti/trasforma-vasca-in-doccia"){
    b["as_pageeditorial_viewed"] = "PE003";
    b["as_cat_viewed"] = "PE003";
    b["as_focus"] = "light";
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['prod_action'].toString().toLowerCase()=='purchase'.toLowerCase()){b['as_focus']='';b['as_pageeditorial_viewed']='';b['as_cat_viewed']=''} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){
if (typeof b != "undefined" && b["page_load"] != 1 && (b["page_name"][0] == "home_page" || document.location.pathname == "/")){
	/* determino categoria visitatore corrente */
	if (typeof window.localStorage != "undefined") {
		var vp=JSON.parse(localStorage.getItem('tealium_va'));
		if(vp && typeof vp != "undefined"){
			var cat_as=vp["properties"]["5455"] || false;
			var interesse = vp["properties"]["5457"] || false;
			if (cat_as && interesse){
				/* lancio pagine optimizely */
				window['optimizely'] = window['optimizely'] || [];
				window['optimizely'].push({
					type: "page",
					pageName: "as_hp_personalization",
					isActive: false	  
				});	
				window['optimizely'].push({
					type: "page",
					pageName: "as_hp_personalization"
				});	
			}
		}
	}
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((typeof b['page_load']=='undefined'&&b['ut.event'].toString().toLowerCase()=='view'.toLowerCase())||(typeof b['page_load']=='undefined'&&b['ut.event'].toString().toLowerCase()=='link'.toLowerCase())){
try{
    var modello_dati_utility_LM = {
    	ut: {
    		n: function (val, azioni) {
    			var err = [];
    			for (var a = 0; a < azioni.length; a++) {
    				if (val.search(modello_dati_utility_LM.normalizzaVariabileConf[azioni[a]]) > -1) {
    					err.push(azioni[a]);
    				}
    			}
    			return err.join("|");
    		}
    	},
    	normalizzaVariabileConf: {
    		l: new RegExp("^\\s+", "g"), //verifica gli spazi a sinistra
    		r: new RegExp("\\s+$", "g"), //verifica gli spazi a destra
    		h: new RegExp("<[^>]*>", "g"), //verifica il codice html
    		i: new RegExp("[\\!\\@\\#\\$\\^\\*\\(\\)\\{\\}\\[\\\]\\;\\|\\<\\>\\?\\~\\`\\:]", "g"), //verifica i caratteri illegali inseriti nel manuale di implementazione
    		u: new RegExp("[A-Z\s]+", "g"), //verifica uppecase
    		s: new RegExp("\\s", "g") //verifica spazi
    	}
    }

    var modello_dati_datalayer_LM = {
    	valori_generali: {
    		"page_name": {
    			o: true,
    			rg: function (val) {
    				var page = val.join('/');
    				return modello_dati_utility_LM.ut.n(page, ["l", "r", "h", "i", "s"]);
    			}
    		},
    		"page_layout": {o: true, rg: new RegExp("^(large|medium|tablet|smartphone)$")},
    		"cart_empty": {o: true,rg: new RegExp("^(0|1)$")},
    		"navigation_store": {o: true,rg: ""}
    	},
    	utente: {
    		"cust_id_mylm": {o:true,rg: ""},
    		"cust_cap": {o:true,rg: ""},
    		"cust_sesso": {o:true,rg: ""},
    		"cust_tipo": {o:true,rg: ""},
    		"cust_negozio": {o:true,rg: ""},
    	},
    	listing: {
    		//[list] -->
    		"imp_id": {o:true,rg: ""},
    		"imp_name": {o:true,rg: ""},
    		"imp_list": {o:true,rg: ""},
    		"imp_category": {o:true,rg: ""},
    		"imp_univers": {o:true,rg: ""},
    		"imp_family": {o:true,rg: ""},
    		"imp_position": {o:true,rg: new RegExp("^\\d*\\d")}, 
    		"imp_price":{o:true, rg: new RegExp("^\\d+([\\.]\\d{1,2})?$")},
    		"imp_avail_online": {o: true,rg: new RegExp("^(0|1)$")},
    		"imp_avail_store": {o: true,rg: new RegExp("^(0|1)$")}
    	},
    	prodotto: {
    		//[detail] -->
    		"prod_action": {o:true,rg: new RegExp("^detail")},
    		"prod_id": {o:true,rg: ""},
    		"prod_name": {o:true,rg: ""},
    		"prod_category": {o:true,rg: ""},
    		"prod_family": {o:true,rg: ""},
    		"prod_price": {o:true,rg: new RegExp("^\\d+([\\.]\\d{1,2})?$")},
    		"prod_univers": {o:true,rg: ""},
    		"prod_avail_online": {o: true,rg: new RegExp("^(0|1)$")},
    		"prod_avail_store": {o: true,rg: new RegExp("^(0|1)$")}
    	},
    	carrello: {
    		//[checkout] -->
    		"prod_action": {o:true,rg: new RegExp("^checkout")},
    		"prod_id": {o:true,rg: ""},
    		"prod_name": {o:true,rg: ""},
    		"prod_category": {o:true,rg: ""},
    		"prod_family": {o:true,rg: ""},
    		"prod_price": {o:true,rg: new RegExp("^\\d+([\\.]\\d{1,2})?$")},
    		"prod_univers": {o:true,rg: ""},
    		"prod_quantity": {o:true,rg: new RegExp("^\\d*\\d")}, 
    		"prod_checkout_type": {o:true,rg: ""},
    		"checkout_step": {o:true,rg: new RegExp("^\\d*\\d")}, 
    	},
    	purchase: {
    		//[purchase] -->
    		"prod_action": {o:true,rg: new RegExp("^purchase")},
    		"prod_id": {o:true,rg: ""},
    		"prod_name": {o:true,rg: ""},
    		"prod_category": {o:true,rg: ""},
    		"prod_family": {o:true,rg: ""},
    		"prod_price": {o:true,rg: new RegExp("^\\d+([\\.]\\d{1,2})?$")},
    		"prod_univers": {o:true,rg: ""},
    		"prod_quantity": {o:true,rg: new RegExp("^\\d*\\d")}, 
    		"prod_checkout_type": {o:true,rg: ""},
    		"trans_id": {o:true,rg: ""},
    		"trans_affiliation": {o:true,rg: ""},
    		"trans_revenue": {o:true,rg: new RegExp("^\\d+([\\.]\\d{1,2})?$")},
    		"trans_checkout_type": {o:true,rg: ""},
    		"trans_shipping_method": {o:true,rg: ""},
    		"checkout_option": {o:true,rg: ""}
    	}
    }
    
    var valida_datalayer = function (typecall, ud, mdati) {
    	console.log("inizio");
    	var errore = "";
    	var err = [];
    	var errDet = [];
    	var sepobjerr = ":";
    	var seperr = "#";
    	var LABEL_OBL = "OB";
    	var LABEL_NORM = "VE";
    	var contErrObbl = 0;
    	var contErrNoNorm = 0;
    
    	for (var m = 0; m < mdati.length; m++) {
    		var objerr = {};
    		objerr.type = typecall;
    		var funzionalita = modello_dati_datalayer_LM[mdati[m]];
    		objerr.funz = mdati[m];
    		for (var f in funzionalita) {
    			var field = funzionalita[f];
    			objerr.field = f;
    			var udo = ud[f];
    
    			if (!udo) {
    				if (field.o) {
    					//campo non presente
    					err.push(f);
    					errDet.push(LABEL_OBL);
    					contErrObbl++;
    				}
    			} else {
    				if (typeof field.rg === 'function') {
    					//campo non normalizzato
    					if (field.rg(udo) && field.rg(udo).length > 0) {
    						err.push(f);
    						errDet.push(LABEL_NORM);
    						contErrNoNorm++;
    					}
    				} else if (typeof field.rg === 'object') {
    					if (udo instanceof Array) {
    						var udoErrNorm = [];
    						var udoErrObbl = [];
    						for (var u = 0; u < udo.length; u++) {
    							var fieldUdo = ""+udo[u];
    							if (fieldUdo == "" && field.o) {
    								udoErrObbl.push(fieldUdo);						
    							}
    							if (fieldUdo.search(field.rg) == -1) {
    								udoErrNorm.push(fieldUdo);
    							}
    
    						}
    						if (udoErrObbl.length > 0) {
    							err.push(f);
    							errDet.push(LABEL_OBL);
    							contErrObbl++;
    						}
    						if (udoErrNorm.length > 0) {
    							err.push(f);
    							errDet.push(LABEL_NORM);
    							contErrNoNorm++;
    						}
    					} else {
    						if ((""+udo).search(field.rg) == -1) {
    							err.push(f);
    							errDet.push(LABEL_NORM);
    							contErrNoNorm++;
    						}
    					}
    				}
    			}
    		}
    	}
    	var errorfield = err.join(seperr);
    	var errorDettfield = errDet.join(seperr);
    	var msgErr = err.length > 0 ? "[" + typecall + "] > " + errorfield : "";
    	var msgErrDett = errDet.length > 0 ? "[dett] > " + errorDettfield : "";
    	var errObj = {};
    	errObj.contErrNoNorm = contErrNoNorm;
    	errObj.contErrObbl = contErrObbl;
    	errObj.msgErr = msgErr;
    	errObj.msgErrDett = msgErrDett;
    	return errObj;
    }

	var sb=[];
	sb.push("valori_generali");
	if (typeof b['cust_id_mylm'] != 'undefined' && b['cust_id_mylm'] != '') {
	    sb.push("utente");	
	}	    
	if(b["prod_action"]){
		switch(b["prod_action"]) {
			case "detail":
				sb.push("prodotto");
				break;
			case "add":
				sb.push("add");
				break;
			case "remove":
				sb.push("remove");
				break;		
			case "product_click":
				sb.push("product_click");
				break;
			case "checkout":
				sb.push("carrello");
				break;	
			case "purchase":
				sb.push("purchase");

				break;				
		}
	}
	if(b["imp_list"]){
		sb.push("listing");
	}
	var errori = valida_datalayer(b["ut.event"], b, sb);
	b["errori_field_validazione"] = errori.msgErr;
	b["errori_dett_validazione"] = errori.msgErrDett;
	b["flag_err_obbl"] = errori.contErrObbl;
	b["flag_err_nonorm"] = errori.contErrNoNorm;
	
} catch (err) {
	b["errori_field_validazione"] = "errore funzione valida_datalayer(" + err + ")";
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()){try{b['cookie_law']=utag.helpers.getCookieLaw(b['cp.CONSENTMGR'],2)}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){b['rtb_tag_hash']='pr_teFx7B6kXlPcyy500sce'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['prod_action'].toString().toLowerCase().indexOf('detail'.toLowerCase())>-1&&typeof b['prod_id']!='undefined'&&b['prod_id']!=''&&typeof b['prod_id']!='undefined')){b['fb_content_type']='product';b['fb_content_ids']=b['prod_id'];b['fb_content_name']=b['prod_name']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['page_name'].toString().toLowerCase().indexOf('gallery-prodotto'.toLowerCase())>-1&&typeof b['imp_id']!='undefined'&&typeof b['imp_id']!='undefined'&&b['imp_id']!='')){b['fb_content_type']='product_group';b['fb_content_ids']=b['imp_id']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['prod_action'].toString().toLowerCase().indexOf('purchase'.toLowerCase())>-1&&typeof b['prod_id']!='undefined'&&b['prod_id']!=''&&typeof b['prod_id']!='undefined')||(b['prod_action'].toString().toLowerCase().indexOf('checkout'.toLowerCase())>-1&&typeof b['prod_id']!='undefined'&&b['prod_id']!=''&&typeof b['prod_id']!='undefined')){b['fb_content_type']='product_group';b['fb_content_ids']=b['prod_id'];b['fb_content_name']=b['prod_name']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(1){
if(b.checkout_delivery_method_ready){
    b.ext_checkout_delivery_method_ready = b.checkout_delivery_method_ready.join(",")
}

if(b.checkout_delivery_cost_ready){
    b.ext_checkout_delivery_cost_ready = b.checkout_delivery_cost_ready.join(",")
}

if(b.checkout_info_delivery_date_ready){
    b.ext_checkout_info_delivery_date_ready = b.checkout_info_delivery_date_ready.join(",")
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((typeof b['checkout_cap']!='undefined'&&b['checkout_cap']==''&&b['ext_page_name'].toString().indexOf('checkout')>-1)||(typeof b['checkout_cap']=='undefined'&&b['ext_page_name'].toString().indexOf('checkout')>-1)){b['checkout_cap']=b['cust_cap']} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ document.cookie="lm_mopinion_catprod="+b['page_name_lv7']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.lm_mopinion_catprod']=b['page_name_lv7'];} catch(e){ utag.DB(e); } },
function(a,b){ try{ if((b['event_action'].toString().toLowerCase()=='view'.toLowerCase()&&b['event_category'].toString().toLowerCase()=='smart banner'.toLowerCase())){b['event_action']=''} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['ext_page_name']=='/checkout/carrello'&&b['ut.env'].toString().toLowerCase()=='prod'.toLowerCase())){
var setCookie = function(c_name,value,exdays,c_domain) {
   c_domain = (typeof c_domain === "undefined") ? "" : "domain=" + c_domain + ";";
   var exdate=new Date();
   exdate.setDate(exdate.getDate() + exdays);
   var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
   document.cookie=c_name + "=" + c_value + ";" + c_domain + "path=/";
};
var cookieName = "ab_checkout";
var cookieVal = "A";
var cookieDurationDays = 125;
setCookie (cookieName, cookieVal, cookieDurationDays);
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&b['dom.url'].toString().toLowerCase().indexOf('/selezione-del-momento/evento-verde'.toLowerCase())>-1)||(b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&/(\/selezione\-del\-momento\/club\-testeur\-deco\-giardino|\/selezione\-del\-momento\/club\-testeur\-animali\-molesti)/.test(b['dom.url']))){
/* rimozione cookie bazaarvoice per permettere doppie recensioni */
var cookieNames = document.cookie.split(/=[^;]*(?:;\s*|$)/);

for (var i = 0; i < cookieNames.length; i++) {
    if (/^bvf_/.test(cookieNames[i])) {
        document.cookie = cookieNames[i] + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain=.leroymerlin.it';
    }
}
/* aggiunta libreria js bazaarvoice */

var loadScript = function(location, callback){
   var fileRef = document.createElement('script');
   fileRef.setAttribute('type','text/javascript');

   if (callback) {
     if (fileRef.readyState) {  /* IE */
       fileRef.onreadystatechange = function() {
         if (fileRef.readyState == 'loaded' || fileRef.readyState == 'complete') {
           fileRef.onreadystatechange = null;
           callback();
         }
       };
     } else {  /* Non-IE */
       fileRef.onload = function(){
         callback();
       };
     }
   }

   fileRef.setAttribute('src', location);
   document.head.appendChild(fileRef);
   window.BB_BV = true;
 };

function applyRatings(){
	var elements1 = document.querySelectorAll('[name*=SELENIUM_PRODUCT_CARD]:not([name$="BUTTON"])');
	if (elements1 && elements1.length){
			var vecchieCTA = document.querySelectorAll('.bb_ab_cta_listing');
			if (vecchieCTA && vecchieCTA.length){
				for (var i = 0, len = vecchieCTA.length; i < len; i++){
					vecchieCTA[i].remove();
				}
			}
			var cssCode = ".bb_ab_cta_listing{font-size:14px;margin-top:6px;z-index:1;position:relative;height:40px;text-align:center;align-items:center;font-family:LeroyMerlinSansBold,sans-serif,sans-serif;font-weight:500;line-height:1.4em;border-radius:0;text-transform:uppercase;justify-content:center;display:flex;outline:0;padding:0;width:100%;border:2px solid #6c3;cursor:pointer;font-size:14px;text-decoration:none;box-shadow:none;border-radius:0;transition:background-color 250ms cubic-bezier(.4,0,.2,1) 0s,box-shadow 250ms cubic-bezier(.4,0,.2,1) 0s;font-weight:500;min-width:64px;box-sizing:border-box;min-height:36px;text-transform:uppercase;color:#fff;background-color:#6c3}.bb_ab_cta_listing:hover{color:#fff;box-shadow:none;background-color:#6c3;text-decoration:none}@media(min-width:768px){.bb_ab_cta_listing{margin-top:16px;height:50px}}@media(min-width:576px){.bb_ab_cta_listing{font-size:14px}}";
			var styleElement = document.createElement("style");
			styleElement.type = "text/css";
			styleElement.id="bb_css_cta_listing_style";
			if (styleElement.styleSheet) {
				styleElement.styleSheet.cssText = cssCode;
			} else {
				styleElement.appendChild(document.createTextNode(cssCode));
			}
			if (document.getElementById('bb_css_cta_listing_style')=== null){
				document.getElementsByTagName("head")[0].appendChild(styleElement);	
			}
			
			var productCode=[];
			for (var i = 0, len = elements1.length; i < len; i++) (function (i){ 
			if (elements1[i].className.indexOf('csr')>-1){
				if (elements1[i].querySelector('a') !== null){
					var link1 = elements1[i].querySelector('a').getAttribute('href');
					var link2 = link1.split("-");
					var link3 = link2[link2.length-2];
					productCode.push(link3);
					if (typeof elements1[i].children[2] != "undefined"){
						elements1[i].children[2].onclick= function fun () {
							if (typeof $BV != "undefined"){
								$BV.ui('rr', 'submit_review',{productId : productCode[i]});
							}
						};
					}
					if (typeof elements1[i].children[3] != "undefined"){
						elements1[i].children[3].onclick= function fun () {
							if (typeof $BV != "undefined"){
								$BV.ui('rr', 'submit_review',{productId : productCode[i]});
							}
						};
					}
					var link = elements1[i].querySelectorAll('a')[0].style.display="none";
					/*
					for (var j=0, len1=link.length;j<len1;j++)
					{
						link[j].style.display="none";
					}
					*/
					var button = elements1[i].querySelector('button');
					var price = elements1[i].querySelector('div[data-abtest="price-block-top"');
					var newbutton = document.createElement('a');
					//newbutton.href = "";
					newbutton.classList.add("bb_ab_cta_listing");
					newbutton.innerHTML = "LASCIA RECENSIONE";
					if (button && typeof button.parentNode.appendChild == "function"){
						button.parentNode.appendChild(newbutton);
						button.style.display = "none";
					}else if (price){
						price.parentNode.insertBefore(newbutton, price.parentNode.firstChild);
					}
					if (price){
						price.style.display="none";
					}
					elements1[i].style.cursor="pointer";
				}
			}})(i);
	}
}
if (typeof window.BB_BV != "undefined"){
	applyRatings();
}else{
	loadScript('https://apps.bazaarvoice.com/deployments/leroymerlin-it/labo__test_reviews_in_store/production/it_IT/bv.js', applyRatings());
}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['ut.event'].toString().toLowerCase()=='link'.toLowerCase()&&typeof b['imp_list']!='undefined'&&b['imp_list']!=''&&typeof b['imp_id']!='undefined'&&b['imp_id']!=''&&typeof b['imp_name']!='undefined'&&b['imp_name']!='')){b['event_category']='product_impression';try{b['event_action']=b["imp_list"][0]}catch(e){};b['event_label']=b['ext_page_name'];b['event_non_interaction']='1'} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if(b['ext_page_name'].toString().indexOf('checkout')>-1){try{b['ext_prod_list']=(function(){var p=b["prod_id"];if(!p){p=utag.data["prod_id"];}return p.join("|");})();}catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&b['page_load']!='1'&&b['ext_page_name'].toString().toLowerCase().indexOf('/CAT249'.toLowerCase())>-1)){
var bannerpresente = document.querySelector('.bb_banner_finestre');
var filtri = document.querySelectorAll("[name='sortingBar_fixed']");
if (!bannerpresente && filtri){
	if (filtri.length>1){
		var filtro = document.querySelectorAll("[name='sortingBar_fixed']")[1];
	}else{
		var filtro = document.querySelector("[name='sortingBar_fixed']");
	}
	if (filtro){
		var banner = document.createElement('div');
		banner.className ="bb_banner_finestre";
		banner.style.textAlign = "center";
		banner.style.padding = "0px 0px 20px 0";
		banner.style.width = "100%";
		filtro.insertBefore(banner, filtro.firstChild);
		banner.innerHTML = '<a href="https://www.leroymerlin.it/oaainfissi/?src=banner"><picture><source media="(min-width: 1200px)" srcset="https://leroymerlin-res.cloudinary.com/image/upload/v1596731292/AB-TEST/CONFIGURATORE-INFISSI/AB-TEST-CONFIGURATORE-INFISSI-desktop.jpg"><source media="(min-width: 992px)" srcset="https://leroymerlin-res.cloudinary.com/image/upload/v1596731292/AB-TEST/CONFIGURATORE-INFISSI/AB-TEST-CONFIGURATORE-INFISSI-desktop.jpg"><source media="(min-width: 768px)" srcset="https://leroymerlin-res.cloudinary.com/image/upload/v1596731292/AB-TEST/CONFIGURATORE-INFISSI/AB-TEST-CONFIGURATORE-INFISSI-tablet.jpg"><source media="(min-width: 576px)" srcset="https://leroymerlin-res.cloudinary.com/image/upload/v1596731292/AB-TEST/CONFIGURATORE-INFISSI/AB-TEST-CONFIGURATORE-INFISSI-mobile.jpg"><img style="max-width:100%;" alt="" src="https://leroymerlin-res.cloudinary.com/image/upload/v1596731292/AB-TEST/CONFIGURATORE-INFISSI/AB-TEST-CONFIGURATORE-INFISSI-mobile.jpg"></picture></a>';
	}
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&b['page_load']!='1'&&/(-CAT4321-c|-CAT12-c|-CAT6-c|-CAT9-c|-CAT33-c|-CAT881-c|-CAT31-c|-CAT4569-c|-CAT4592-c|-CAT4221-c|-CAT21-c)$/.test(b['dom.pathname']))){
var bannerpresente = document.querySelector('.bb_banner_bagno');
var filtri = document.querySelectorAll("[name='sortingBar_fixed']");
if (!bannerpresente && filtri){
	if (filtri.length>1){
		var filtro = document.querySelectorAll("[name='sortingBar_fixed']")[1];
	}else{
		var filtro = document.querySelector("[name='sortingBar_fixed']");
	}
	if (filtro){
		var banner = document.createElement('div');
		banner.className ="bb_banner_bagno";
		banner.style.textAlign = "center";
		banner.style.padding = "0px 0px 20px 0";
		banner.style.width = "100%";
		filtro.insertBefore(banner, filtro.firstChild);
		banner.innerHTML = '<a href="https://oaabagno.cloud.leroymerlin.it/homepage"><picture><source media="(min-width: 1200px)" srcset="https://leroymerlin-res.cloudinary.com/raw/upload/v1614611157/AB-TEST/CONFIGURATORE-BAGNO/AB-TEST-CONFIGURATORE-BAGNO-widescreen.jpg"><source media="(min-width: 992px)" srcset="https://leroymerlin-res.cloudinary.com/raw/upload/v1614611157/AB-TEST/CONFIGURATORE-BAGNO/AB-TEST-CONFIGURATORE-BAGNO-desktop.jpg"><source media="(min-width: 768px)" srcset="https://leroymerlin-res.cloudinary.com/raw/upload/v1614611157/AB-TEST/CONFIGURATORE-BAGNO/AB-TEST-CONFIGURATORE-BAGNO-tablet.jpg"><source media="(min-width: 576px)" srcset="https://leroymerlin-res.cloudinary.com/raw/upload/v1614611157/AB-TEST/CONFIGURATORE-BAGNO/AB-TEST-CONFIGURATORE-BAGNO-mobile.jpg"><img style="max-width:100%;" alt="" src="https://leroymerlin-res.cloudinary.com/raw/upload/v1614611157/AB-TEST/CONFIGURATORE-BAGNO/AB-TEST-CONFIGURATORE-BAGNO-mobile.jpg"></picture></a>';
	}
}

} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if((b['ut.event'].toString().toLowerCase()=='view'.toLowerCase()&&b['page_load']!='1'&&b['ext_page_name'].toString().toLowerCase()=='/offerte/generiche/accessori-bagno-appoggio'.toLowerCase())){
/* nascondo conteggio prodotti Bagno */
	var sortingBar_nodes = document.querySelectorAll('div[name="sortingBar_fixed"]');
	var sortingBar = sortingBar_nodes[sortingBar_nodes.length- 1];
	if (sortingBar){
		var sortingBarBrother = sortingBar.previousSibling;
		if (sortingBarBrother && sortingBarBrother.innerHTML.indexOf('Bagno (')>-1){
			sortingBarBrother.style.display="none";
		}
	}
	/* nascondo link Scopri i prodotti */
	var scrollPinAfterFilter = document.getElementById('scrollPinAfterFilter');
	if (scrollPinAfterFilter){
		var scrollPinAfterFilterBrother = scrollPinAfterFilter.previousSibling;
		if (scrollPinAfterFilterBrother && scrollPinAfterFilterBrother.innerHTML.indexOf('<a href="/selezione-del-momento/accessori-bagno-appoggio#offers-product-list">Scopri i prodotti</a>')>-1){
			scrollPinAfterFilterBrother.style.display="none";
		}
	}
	/* aggiungo descrizione */
	var txt = "Set accessori bagno appoggio: lavoriamo ogni giorno per garantire i migliori prodotti al giusto prezzo. Esplora la nostra gamma di 1078 prodotti: troverai una vasta scelta di marchi e referenze in offerta. Scopri i prodotti disponibili in negozio o compra online con consegna a casa tua.";
	var span = document.createElement('span');
	span.setAttribute('class', 'bb_desc_appoggio');
	span.innerHTML = txt;
	var style="<style>.bb_desc_appoggio {display:block; color: #4a4a4a; margin: 0; padding: 0 15px; font-size: 12px; max-width: 80%; margin-top: 16px; font-weight: 300; line-height: 1.42;}</style>";
	document.querySelector('head').insertAdjacentHTML('beforeend', style);
	var h1 = document.querySelectorAll('h1')[0];
	if (h1 && !document.querySelector(".bb_desc_appoggio")){
		h1.insertAdjacentElement('afterend', span);
	}
} } catch(e){ utag.DB(e) }  },
function(a,b){ try{ if(b['from'].toString().toLowerCase().indexOf('app'.toLowerCase())>-1){try{b['ext_visitorid_localstorage']=localStorage.getItem("visitorId")}catch(e){};try{b['ext_cid_app_def']="localStorage: " + localStorage.getItem("visitorId") }catch(e){}} } catch(e){ utag.DB(e); }  },
function(a,b){ try{ if((b['ut.event']=='view'&&b['page_load']!='1')){

try {
    (function () {
        var el = document.getElementById("RTB_no-referrer-when-downgrade")
        //if(!el){
            var prefix = "",
            hash = "teFx7B6kXlPcyy500sce",
            rtbhTags = [];
            rtbhTags.push("pr_" + hash + "");
            var key = "__rtbhouse.lid",
            lid = window.localStorage.getItem(key);
            if (!lid) {
                lid = "";
                var pool = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                for (var i = 0; i < 20; i++)
                    lid += pool.charAt(Math.floor(Math.random() * pool.length));
                window.localStorage.setItem(key, lid);
            }
            rtbhTags.push("pr_" + hash + "_lid_" + lid);
            var ifr = document.createElement("iframe"),
            sr = encodeURIComponent(document.referrer ? document.referrer : ""),
            su = encodeURIComponent(document.location.href ? document.location.href : ""),
            ifrSrc = "https://" + prefix + "creativecdn.com/tags?type=iframe",
            tmstmp = encodeURIComponent("" + Date.now());
            for (var i = 0; i < rtbhTags.length; i++) {
                ifrSrc += "&id=" + encodeURIComponent(rtbhTags[i]);
            }
            ifrSrc += "&su=" + su + "&sr=" + sr + "&ts=" + tmstmp;
            ifr.setAttribute("src", ifrSrc);
            ifr.setAttribute("width", "1");
            ifr.setAttribute("height", "1");
            ifr.setAttribute("scrolling", "no");
            ifr.setAttribute("frameBorder", "0");
            ifr.setAttribute("style", "display:none");
            ifr.setAttribute("referrerpolicy", "no-referrer-when-downgrade");
            ifr.setAttribute("id", "RTB_no-referrer-when-downgrade");
            if (document.body) {
                document.body.appendChild(ifr);
            } else {
                window.addEventListener('DOMContentLoaded', function () {
                    document.body.appendChild(ifr);
                });
            }
        //}
    })();
} catch (e) {}

} } catch(e){ utag.DB(e) }  }];
  utag.handler.cfg_extend=[{"id":"143","alr":0,"blr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"155"},{"blr":1,"bwq":0,"alr":0,"end":0,"id":"292"},{"alr":0,"blr":1,"bwq":0,"end":0,"id":"371"},{"id":"376","blr":1,"bwq":0,"alr":0,"end":0},{"id":"67","end":0,"alr":1,"bwq":0,"blr":0},{"id":"68","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"115"},{"id":"100","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"90"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"36"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"139"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"55"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"37"},{"id":"209","end":0,"bwq":0,"blr":0,"alr":1},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"226"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"315"},{"id":"64","blr":0,"bwq":0,"alr":1,"end":0},{"id":"385","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"93"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"140"},{"id":"38","end":0,"alr":1,"bwq":0,"blr":0},{"id":"41","blr":0,"bwq":0,"alr":1,"end":0},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"40"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"49"},{"id":"59","end":0,"alr":1,"bwq":0,"blr":0},{"id":"60","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"61"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"17"},{"id":"20","end":0,"alr":1,"bwq":0,"blr":0},{"id":"86","alr":1,"blr":0,"bwq":0,"end":0},{"id":"65","alr":1,"blr":0,"bwq":0,"end":0},{"id":"46","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"47"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"32"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"51"},{"id":"52","blr":0,"bwq":0,"alr":1,"end":0},{"id":"81","end":0,"alr":1,"bwq":0,"blr":0},{"id":"66","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"73"},{"id":"85","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"75"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"82"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"83"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"84"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"138"},{"id":"91","end":0,"bwq":0,"blr":0,"alr":1},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"88"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"129"},{"id":"2","blr":0,"bwq":0,"alr":1,"end":0},{"id":"267","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"1"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"101"},{"id":"102","end":0,"alr":1,"bwq":0,"blr":0},{"id":"107","blr":0,"bwq":0,"alr":1,"end":0},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"269"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"109"},{"id":"113","end":0,"alr":1,"bwq":0,"blr":0},{"id":"114","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"172"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"173"},{"id":"283","end":0,"alr":1,"bwq":0,"blr":0},{"id":"318","alr":1,"blr":0,"bwq":0,"end":0},{"id":"337","alr":1,"blr":0,"bwq":0,"end":0},{"id":"391","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"183"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"319"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"277"},{"id":"278","blr":0,"bwq":0,"alr":1,"end":0},{"id":"316","end":0,"alr":1,"bwq":0,"blr":0},{"id":"386","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"103"},{"id":"116","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"152"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"130"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"131"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"132"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"135"},{"id":"136","end":0,"bwq":0,"blr":0,"alr":1},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"137"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"150"},{"id":"158","blr":0,"bwq":0,"alr":1,"end":0},{"id":"160","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"168"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"174"},{"id":"175","end":0,"alr":1,"bwq":0,"blr":0},{"id":"186","blr":0,"bwq":0,"alr":1,"end":0},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"284"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"191"},{"id":"194","end":0,"alr":1,"bwq":0,"blr":0},{"id":"195","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"282"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"199"},{"id":"281","end":0,"alr":1,"bwq":0,"blr":0},{"id":"202","alr":1,"blr":0,"bwq":0,"end":0},{"id":"207","alr":1,"blr":0,"bwq":0,"end":0},{"id":"213","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"216"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"285"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"286"},{"id":"218","blr":0,"bwq":0,"alr":1,"end":0},{"id":"305","end":0,"alr":1,"bwq":0,"blr":0},{"id":"231","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"228"},{"id":"229","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"233"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"235"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"225"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"224"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"237"},{"id":"239","end":0,"bwq":0,"blr":0,"alr":1},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"238"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"240"},{"id":"241","blr":0,"bwq":0,"alr":1,"end":0},{"id":"296","end":0,"alr":1,"bwq":0,"blr":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"299"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"301"},{"id":"300","end":0,"alr":1,"bwq":0,"blr":0},{"id":"217","blr":0,"bwq":0,"alr":1,"end":0},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"308"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"309"},{"id":"324","end":0,"alr":1,"bwq":0,"blr":0},{"id":"325","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"alr":1,"bwq":0,"blr":0,"id":"326"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"321"},{"id":"322","end":0,"alr":1,"bwq":0,"blr":0},{"id":"331","alr":1,"blr":0,"bwq":0,"end":0},{"id":"333","alr":1,"blr":0,"bwq":0,"end":0},{"id":"335","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"336"},{"blr":0,"bwq":0,"alr":1,"end":0,"id":"338"},{"alr":1,"blr":0,"bwq":0,"end":0,"id":"339"},{"id":"354","blr":0,"bwq":0,"alr":1,"end":0},{"id":"406","end":0,"alr":1,"bwq":0,"blr":0},{"id":"355","alr":1,"blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"372"},{"id":"403","end":1,"alr":0,"bwq":0,"blr":0}];
  utag.loader.initcfg = function(){
    utag.loader.cfg={"107":{load:utag.cond[18],tcat:2,send:1,v:202103251106,wait:0,tid:20106},"144":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:7142},"5":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:7110},"62":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:7110},"6":{load:utag.cond[6],tcat:2,send:1,v:202103251106,wait:1,tid:22017},"76":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:9044},"48":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:3131},"52":{load:1,tcat:2,send:1,v:202103251106,wait:1,tid:7132},"64":{load:1,tcat:2,send:1,v:202103251106,wait:1,tid:7132},"87":{load:utag.cond[18],tcat:1,send:1,v:202103251106,wait:1,tid:2062},"110":{load:1,tcat:2,send:1,v:202103251106,wait:1,tid:13112},"115":{load:1,tcat:2,send:1,v:202103251106,wait:1,tid:18044},"118":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:6026},"120":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:16044},"123":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:20010},"126":{load:1,tcat:2,send:1,v:202004061250,wait:1,tid:20010},"129":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:20010},"130":{load:utag.cond[31],tcat:1,send:1,v:202103251106,wait:1,tid:7110},"131":{load:1,tcat:9,send:1,v:202007151343,wait:1,tid:20010},"133":{load:utag.cond[34],tcat:2,send:1,v:202103251106,wait:1,tid:20010},"134":{load:utag.cond[34],tcat:3,send:1,v:202103251106,wait:1,tid:1068},"141":{load:1,tcat:2,send:1,v:202103251106,wait:1,tid:20010},"145":{load:(utag.cond[36] || utag.cond[35]),tcat:9,send:1,v:202103251106,wait:1,tid:20010},"146":{load:utag.cond[18],tcat:9,send:1,v:202103251106,wait:1,tid:20010},"148":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:17011},"151":{load:1,tcat:1,send:1,v:202103251106,wait:1,tid:15032}};
utag.loader.cfgsort=["107","144","5","62","6","76","48","52","64","87","110","115","118","120","123","126","129","130","131","133","134","141","145","146","148","151"];
  }
utag.loader.initcfg();
try {utag.gdpr.applyConsentState();} catch(e) {utag.DB(e)}}
utag.gdpr = {
    consent_prompt: {
        noShow: false,
        isEnabled: true,
    content: {}
},
preferences_prompt: {
    single_cookie: false,
        noShow: false,
        isEnabled: true,
        defaultState: false,
        content: {},
    categories: {
        analytics: {
            id: 1,
                enabled: true
        },
        affiliates: {
            id: 2,
                enabled: true
        },
        display_ads: {
            id: 3,
                enabled: true
        },
        search: {
            id: 4,
                enabled: true
        },
        email: {
            id: 5,
                enabled: true
        },
        personalization: {
            id: 6,
                enabled: true
        },
        social: {
            id: 7,
                enabled: true
        },
        big_data: {
            id: 8,
                enabled: true
        },
        misc: {
            id: 9,
                enabled: true
        },
        cookiematch: {
            id: 10,
                enabled: true
        },
        cdp: {
            id: 11,
                enabled: true
        },
        mobile: {
            id: 12,
                enabled: true
        },
        engagement: {
            id: 13,
                enabled: true
        },
        monitoring: {
            id: 14,
                enabled: true
        },
        crm: {
            id: 15,
                enabled: true
        }
    }
},

getCategories: function() {
    if (!(utag.gdpr.preferences_prompt && utag.gdpr.preferences_prompt.categories)) {
        return [];
    }
    var cats = [],
        gdpr_cats = utag.gdpr.preferences_prompt.categories;
    for (var cat in gdpr_cats) {
        if (!gdpr_cats.hasOwnProperty(cat)) {
            continue;
        }
        cats.push(cat);
    }

    return cats;
},
getSelectedCategories: function(){
    var sc = [], gc = utag.gdpr.getCategories(), cs = utag.gdpr.getConsentState(), i;

    try {
        if (typeof cs === "number") {
            if (parseInt(cs) === 1) {
                return gc;
            } else {
                return sc;
            }
        } else {
            for (i in utag.loader.GV(cs)) {
                if ("1" === cs[i].ct){
                    sc.push(gc[i]);
                }
            }
        }
    } catch (e) {utag.DB(e)}

    return sc;
},
getCategoryLanguage: function(category) {
    if (!(utag.gdpr.preferences_prompt && utag.gdpr.preferences_prompt.categories)) {
        return [];
    }
    var language = utag.gdpr.getLanguage(utag.gdpr.preferences_prompt);
    return utag.gdpr.preferences_prompt.languages[language].categories[category];
},
getConsentState: function() {
    var re         = /^c\d+/,
        cd         = utag.gdpr.getCookieValues(),
        np         = 1,
        gc         = utag.gdpr.getCategories(),
        pc         = (function(gc){
            var pc = [];
            for (var i = 0; i < gc.length; i++) {
                pc.push({
                    ct  : null,
                    name: gc[i]
                });
            }
            return pc;
        }(gc)),
        filteredCD = (function (cd) {
            var d = {};
            for (var prop in cd) {
                if (!cd.hasOwnProperty(prop)) {
                    continue;
                }
                if (re.test(prop)) {
                    d[prop] = cd[prop];
                }
            }
            return d;
        }(cd));

    filteredCD = utag.gdpr.sortedObject(filteredCD, function (val1, val2) {
        var idx1 = parseInt((val1 || "").substring(1), 10),
            idx2 = parseInt((val2 || "").substring(1), 10);
        if (isNaN(idx1) || isNaN(idx2)) {
            return 0;
        }
        return idx1 > idx2 ? 1 : -1;
    });

    for (var cn in utag.loader.GV(filteredCD)) {
        if (cn.match(re)) {
            var idx = parseInt(cn.substring(1), 10) - 1,
                ct  = gc[idx];
            pc[idx].ct = cd[cn];
            if (cd[cn] * 1 !== 0) {
                np = 0;
            }
        }
    }
    if (cd["consent"]) {
        if (cd["consent"] === true || cd["consent"] === "true") {
            if (np) {
                return np;
            } else {
                return pc;
            }
        } else {
            return -1;
        }
    } else if (np === 0) {
        return pc;
    } else {
        return 0;
    }
},

getCookieValues: function() {
    var values = {},
        rcd = (function(){
            var value = "; " + document.cookie;
            var parts = value.split("; CONSENTMGR=");
            if (parts.length == 2) return  utag.ut.decode(parts.pop().split(";").shift());
        }()),
        cd = utag.gdpr.typeOf(rcd) === "string" ? rcd : "";

    if (utag.data) {
        utag.data["cp.CONSENTMGR"] =  cd;
    }

    if (cd){
        var i,
            optOut,
            optOutData = decodeURI(cd).split("|");
        for (i = 0; i < optOutData.length; i++) {
            optOut = optOutData[i].split(":");
            values[optOut[0]] = optOut[1];
        }
    }
    utag.gdpr.values = values;
    return values;
},
getDeTokenizedContent: function(data, _lang) {
    var reg = /{{(.*?)}}/gm,
        token_match = /[{}]/g,
        two_part = /display_ads|big_data/;

    var lang = utag.gdpr.getLanguage(data, _lang),
        langData = data.languages[lang];

    for (var t in langData.common_tokens) {
        if (!langData.common_tokens.hasOwnProperty(t)) {
            continue;
        }
        var replacements = langData.common_tokens[t].match(reg);
        if (replacements) {
            for (var i = 0; i < replacements.length; i++) {
                var token = replacements[i].replace(token_match, "");
                langData.common_tokens[t] = langData.common_tokens[t].replace(replacements[i], langData.custom_tokens[token]);
            }
        }
    }

    function tokenReplace(str) {
        var replacements = str.match(reg);
        if (replacements) {
            for (var i = 0; i < replacements.length; i++) {
                var token = replacements[i].replace(/[{}]/g, "") || "";
                if (langData.common_tokens[token]) {
                    str = str.replace(replacements[i], langData.common_tokens[token]);
                } else if (langData.custom_tokens[token]) {
                    str = str.replace(replacements[i], langData.custom_tokens[token]);
                } else if (langData.categories && token.indexOf("category_") > -1) {
                    var split_token = token.split("_");
                    if (token.match(two_part)){
                        split_token[1] = split_token[1] + '_' + split_token[2];
                        split_token.splice(2,1);
                    }
                    var category = langData.categories[split_token[1]],
                        key = {
                            "title": "name",
                            "description": "notes"
                        }[split_token[2]];
                    if (category[key]) {
                        str = str.replace(replacements[i], category[key]);
                    }
                }
            }
        }
        return str;
    }

    return {
        js: tokenReplace(data.content.js),
        html: tokenReplace(data.content.html),
        css: tokenReplace(data.content.css)
    };
},
getLanguage: function(promptData, preferredLang) {
    var lang = preferredLang || utag.data[window.utag.cfg.gdprDLRef] || (navigator.languages && navigator.languages[0] || navigator.language || navigator.userLanguage);
    lang = (lang || "").split("-")[0];
    if(!promptData){return lang;}
    return promptData.languages[lang] ? lang : promptData.defaultLang;
},
getTokenLanguage: function(promptData, token, lang) {

    lang = lang || utag.gdpr.getLanguage(promptData);
    var langData = promptData.languages[lang];

    if (langData.common_tokens[token]) {
        return langData.common_tokens[token];
    } else if (langData.custom_tokens[token]) {
        return langData.custom_tokens[token]
    } else if (langData.categories && token.indexOf("category_") > -1) {
        var split_token = token.split("_"),
            category = langData.categories[split_token[1]];
        if (category[split_token[2]]) {
            return category[split_token[2]];
        }
    }

    return null;
},
refreshCookie: function() {
    try {
        utag.gdpr.setCookie(utag.gdpr.getCookieValues());
    } catch (e) {}
},
setCookie: function(cookieData) {

    if (utag.gdpr.keys(cookieData).length === 0){
        return;
    }
    var cp = utag.cfg.consentPeriod || 90;

    utag.gdpr.values = cookieData;

    var mo2Val = [];
    for (var i in utag.loader.GV(cookieData)) {
        mo2Val.push(i + ":" + cookieData[i]);
    }
    var cD = new Date();
    cD.setDate(cD.getDate() + cp);
    document.cookie = "CONSENTMGR=" + encodeURI(mo2Val.join("|")) + ";domain=" + utag.cfg.domain + ";path=/; expires=" + cD.toGMTString() + ";";
    utag.data["cp.CONSENTMGR"] = mo2Val.join("|"); // Keep utag.data in sync with what's in the cookie
},
setCookieValue: function(key, value) {
    var cookieData = utag.gdpr.getCookieValues();
    cookieData[key] = value;

    utag.gdpr.setCookie(cookieData);
},
setConsentValue: function(response) {
    if (response === "") {
        throw new Error("No response supplied");
    }
    response = (response === true || response === "true" || response == 1);
    utag.gdpr.setCookieValue("ts", new Date().getTime()); //timestamp
    utag.gdpr.setCookieValue("consent", response); //response
    var xhr = new XMLHttpRequest();xhr.open("POST", "https://collect.tealiumiq.com/event");if (response){  xhr.send('{"tealium_account":"leroymerlinit","tealium_profile":"'+(utag.gdpr.eventProfile || "main")+'","tealium_event":"grant_full_consent","consent_categories":"'+utag.gdpr.getCategories(true).join(", ")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');} else {  xhr.send('{"tealium_account":"leroymerlinit","tealium_profile":"'+(utag.gdpr.eventProfile || "main")+'","tealium_event":"decline_consent","consent_categories":"","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}
},
setPreferencesValues: function(categories,noCollect) {
    var cookie_data = utag.gdpr.getCookieValues(), lookup = {}, i, rgx = /\D/,
        names = utag.gdpr.getCategories() , chosen_list = [],
        consent_seen = false, decline_seen = false, crgx = /c\d/, fld;

    try {
        for (i = 0; i < names.length; i++){
            lookup[names[i]] = 'c' + (i+1);
        }
        for (var cat in categories) {
            if (!categories.hasOwnProperty(cat)) {
                continue;
            }
            if (cat.match(rgx)){
                cookie_data[lookup[cat]] = categories[cat];
                if (categories[cat] != 0){
                    chosen_list.push(cat);
                }
            }else{
                cookie_data["c" + cat] = categories[cat];
                if (categories[cat] != 0){
                    chosen_list.push(names[cat - 1]);
                }
            }

        }

        for (fld in utag.loader.GV(cookie_data)) {
            if (fld.match(crgx)) {
                if (cookie_data[fld] != 0){
                    consent_seen = true;
                } else {
                    decline_seen = true;
                }
            }
        }
        cookie_data["ts"] = new Date().getTime();
        cookie_data["consent"] = consent_seen;
        utag.gdpr.setCookie(cookie_data);
    } catch (e) {
        utag.DB(e)
    }

    if (noCollect){
        return;
    }

    var xhr = new XMLHttpRequest();xhr.open("POST", "https://collect.tealiumiq.com/event");if (decline_seen){if (consent_seen){xhr.send('{"tealium_account":"leroymerlinit","tealium_profile":"'+(utag.gdpr.eventProfile || "main")+'","tealium_event":"grant_partial_consent","consent_categories":"'+chosen_list.join(",")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');} else {xhr.send('{"tealium_account":"leroymerlinit","tealium_profile":"'+(utag.gdpr.eventProfile || "main")+'","tealium_event":"decline_consent","consent_categories":"","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}} else if(!decline_seen && consent_seen) {xhr.send('{"tealium_account":"leroymerlinit","tealium_profile":"'+(utag.gdpr.eventProfile || "main")+'","tealium_event":"grant_full_consent","consent_categories":"'+utag.gdpr.getCategories(true).join(", ")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}
},

setAllCategories: function(state,noCollect){
    var allCats = utag.gdpr.getCategories(),prefs = {};
    for (var i=0; i < allCats.length; i++){
        prefs[""+(i+1)] = state ? "1" : "0";
    }
    utag.gdpr.setPreferencesValues(prefs,noCollect);
},
setPreferencesFromList:function(list) {
    var prefs = {}, allCats = utag.gdpr.getCategories();
    for (var i = 0; i < list.length; i++) {
        prefs[list[i]] = "1";
    }
    for (var j = 0; j < allCats.length; j++) {
        if (!prefs[allCats[j]]) {
            prefs[allCats[j]] = "0";
        }
    }
    utag.gdpr.setPreferencesValues(prefs);
},
typeOf: function(e) {
    return ({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
},
applyConsentState: function(){
    try {
        var i, lc = utag.loader.cfg, cs = utag.gdpr.getConsentState(),
            ot = {"123":1,"129":1,"131":1,"145":1,"95":1,"62":1,"87":1,"5":1,"76":1};
        if (typeof cs === "number") {

            if ((utag.gdpr.consent_prompt.isEnabled && parseInt(cs) !== 1) ||
                ((!utag.gdpr.consent_prompt.isEnabled && utag.gdpr.preferences_prompt.isEnabled) && parseInt(cs) === -1)) {
                for (i in utag.loader.GV(lc)) {
                    if (typeof ot[i] === "undefined") {
                        lc[i].load = 0;
                    }
                }
            }
        } else { //# partial consent
            for (i in utag.loader.GV(lc)) {
                if (typeof ot[i] === "undefined") {
                    if (lc[i].tcat > 0 && cs[lc[i].tcat - 1].ct == 0) {
                        lc[i].load = 0;
                    }
                }
            }
        }

    } catch (e) {
        utag.DB(e);
    }
},
updateConsentCookie:function(consent_categories){
    var list,
        listType = utag.gdpr.typeOf(consent_categories);
    if (listType === "string") {
        list = consent_categories.split(/\s*,\s*/);
    } else if (listType !== "array") {
        list = [];
    } else {
        list = consent_categories.slice();
    }

    if (list.length === 0) {
        utag.gdpr.setConsentValue(false);
        utag.gdpr.setAllCategories(false);
        return;
    } else {
        utag.gdpr.setConsentValue(true);
    }

    utag.gdpr.setPreferencesFromList(list);
},
keys : function(obj) {
    var array = [];
    for (var prop in obj) {
        if (!obj.hasOwnProperty(prop)) {continue;}
        array.push(prop);
    }
    return array;
},
sortedObject : function (obj, func) {
    var _obj = {};
    if (obj !== undefined) {
        var _k1 = utag.gdpr.keys(obj).sort(func);
        for (var z = 0; z < _k1.length; z++) {
            _obj[_k1[z]] = obj[_k1[z]];
        }
    }
    return _obj;
}
};

utag.gdpr.consent_prompt.languages={"en":{"common_tokens":{"message":"Su Leroymerlin.it utilizziamo i cookies per assicurarti la migliore esperienza possibile, per fornirti offerte e servizi personalizzati e per compilare statistiche sui visitatori al fine di migliorare la tua esperienza sul sito. Chiudendo questo banner, scorrendo questa pagina o cliccando qualunque suo elemento acconsenti all’uso dei cookie.\n","title":"Cookie su Leroymerlin.it","confirmation_button":"Accetta"},"custom_tokens":{"link_cookie_policy":"Vedi la nostra Cookie Policy","url_cookie_policy":"https://www.leroymerlin.it/documentazione-regolamenti?generali#termini-cookies","preferences_link":"Imposta i cookie","opt_out":"","opt_in":"","privacy_policy_url":""},"isDefault":"true"}};utag.gdpr.consent_prompt.content.css=".privacy_prompt {     display: block;    position: fixed;    box-shadow: rgba(0,0,0,.5) 0 0 10px 0;    bottom: 20px;    width: 850px;    max-width: 850px;    background-color: white;    border: 0;    z-index: 99999;    margin: 0 auto;    padding: 20px;    min-height: 50px;    left: 50%;    margin-left: -425px;    line-height: 1.6; }  .privacy_bandeau_content {    min-height: 50px;} .privacy_prompt input[type=\"button\"] {    background-color: #78BE20;    -webkit-appearance: none;    border-radius: 5px;    border: 0;    color: white;    font-size: 16px;    text-decoration: none;    width: 20%;    margin: 0 auto 0 auto;    cursor: pointer;    float: right;    padding:10px;} .privacy_prompt p {    float: left;    width: 60%;    margin: 0;    padding: 0;    font-size: 10pt;}     .privacy_prompt a {     float: left;    width: 15%;    line-height: 40px;    text-align: center;    margin-left: 10px;    color: #8b8a8a;    text-decoration: none;    font-size: 12pt; }    .privacy_prompt_content {      padding: 20px;      font-size: 0.9em;  }  .privacy_prompt a.privacy_plus {    float: none;    width: auto;    line-height: 1rem;    margin-left: 0px;    font-size: 10pt;}   .privacy_prompt h1 {      font-size: 1.3em;      color: #444;      font-weight: 400;  }    .privacy_prompt .option {      margin: 10px 0px;      color: #444;  }    .privacy_prompt_footer {      padding: 0px 20px 20px 20px;      overflow: auto;  }    .privacy_prompt_footer a {      font-size: 0.9em;  }    .privacy_prompt_footer .button {      font-size: 1.0em;      border: 1px solid #CCC;      padding: 4px 15px;      min-width: 50px;      text-align: center;      border-radius: 4px;      background-color: #EEE;      box-shadow: inset 0px 1px 4px rgba(255, 255, 255, 1);      text-shadow: 1px 1px 3px rgba(255, 255, 255, 1);      color: #000;      cursor: pointer;  }    .privacy_prompt .button.right {      float: right;  }    .privacy_prompt .button.left {      float: left;  }    .privacy_prompt > .close_btn_thick {      position: absolute;      display: block;      top: 10px;      right: 10px;      text-decoration: none;      text-shadow: 0 1px 0 #fff;      color: #777;      font: 14px/100% arial, sans-serif;      cursor: pointer;  }    .privacy_prompt > .close_btn_thick:after {      content: \"\\2716\";   }    .privacy_prompt .logo {      float: right;  }    .privacy_prompt table {      padding: 0px;      border-collapse: collapse;  }    .privacy_prompt table tr {  }    .privacy_prompt table th {      background-color: #FAFAFA;      border-bottom: 1px solid #EEE;      margin: 0px;      padding: 5px 8px;      font-weight: 400;      text-align: center;  }    .privacy_prompt table td {      vertical-align: top;      padding: 10px 8px 5px 8px;  }    .privacy_prompt table tr td:first-child {      min-width: 120px;      font-weight: 600;      color: #666;  }    .privacy_prompt table tr td:last-child {      text-align: center;      min-width: 100px;  }    .privacy_prompt input[type=\"checkbox\"].toggle {      opacity: 0;      position: absolute;      left: -99999px;  }    .privacy_prompt input[type=\"checkbox\"].toggle + label {      height: 24px;      line-height: 24px;      background-color: #ccc;      padding: 0px 16px;      border-radius: 16px;      display: inline-block;      position: relative;      cursor: pointer;      -moz-transition: all 0.25s ease-in;      -o-transition: all 0.25s ease-in;      -webkit-transition: all 0.25s ease-in;      transition: all 0.25s ease-in;      -moz-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);      -webkit-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);      box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);  }    .privacy_prompt input[type=\"checkbox\"].toggle + label:before, .privacy_prompt input[type=\"checkbox\"].toggle + label:hover:before {      content: \" \";      position: absolute;      top: 2px;      left: 2px;      width: 26px;      height: 20px;      background: #fff;      z-index: 2;      -moz-transition: all 0.25s ease-in;      -o-transition: all 0.25s ease-in;      -webkit-transition: all 0.25s ease-in;      transition: all 0.25s ease-in;      -moz-border-radius: 14px;      -webkit-border-radius: 14px;      border-radius: 14px;  }    .privacy_prompt input[type=\"checkbox\"].toggle + label .off, .privacy_prompt input[type=\"checkbox\"].toggle + label .on {      color: #fff;  }    .privacy_prompt input[type=\"checkbox\"].toggle + label .off {      margin-left: 20px;      display: inline-block;  }    .privacy_prompt input[type=\"checkbox\"].toggle + label .on {      display: none;  }    .privacy_prompt input[type=\"checkbox\"].toggle:checked + label .off {      display: none;  }    .privacy_prompt input[type=\"checkbox\"].toggle:checked + label .on {      margin-right: 20px;      display: inline-block;  }    .privacy_prompt input[type=\"checkbox\"].toggle:checked + label, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label {      background-color: #3278c0;  }    .privacy_prompt input[type=\"checkbox\"].toggle:checked + label:before, .privacy_prompt input[type=\"checkbox\"].toggle:checked + label:hover:before, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label:before, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label:hover:before {      background-position: 0 0;      top: 2px;      left: 100%;      margin-left: -28px;  }   .privacy_prompt input[type=\"checkbox\"].toggle + label {     overflow: hidden;     text-overflow: ellipsis;     max-height: 24px;     height: 24px;  }  @media (max-width: 600px){.privacy_prompt {width: 80%;    left: 10px;    margin: 0px;    right: 10px;    margin-left: auto;    margin-right: auto;}.privacy_prompt p {        float: none;        width: 100%;        margin: 0;        padding: 0;        line-height: 20px;        text-align: center;    } .privacy_prompt a {    float: left;    width: 40%;    display: block;    line-height: 40px;    text-align: center;    margin-bottom: 20px;    font-size: 10pt;}.privacy_prompt input {    float: right;    display: block;    width: 40%;    margin-right: 20px;    }.privacy_prompt input[type=\"button\"] {    width: 40%;} .privacy_prompt a.privacy_plus {    line-height: 2rem;}}";utag.gdpr.consent_prompt.content.html="<div class=\"privacy_prompt\"><div class=\"privacy_bandeau_content\"><p>{{message}}<br><a href=\"{{url_cookie_policy}}\" class=\"privacy_plus\">{{link_cookie_policy}}</a></p><a href=\"#\" id=\"consent_preferences_submit\">{{preferences_link}}</a><input type=\"button\" id=\"consent_prompt_submit\" value={{confirmation_button}} /> </div></div>";utag.gdpr.consent_prompt.content.js="(function consent_prompt(){var $el=document.getElementById(\"consent_prompt_submit\");var $privacy_pref_optin=document.getElementById(\"privacy_pref_optin\");var $privacy_pref_optout=document.getElementById(\"privacy_pref_optout\");var $pref=document.getElementById(\"consent_preferences_submit\");var consentState=utag.gdpr.getConsentState();if(typeof consentState===\"number\"){if(consentState===1){$privacy_pref_optin.checked=true;}else if(consentState===-1){$privacy_pref_optout.checked=true;}}else{$privacy_pref_optin.checked=true;}var callBack=function(){utag.gdpr.setConsentValue(1);setTimeout(function(){if(window.utag&&window.utag.udoname||window.utag_data){window[\"utag_data\"].page_load=0;window[\"utag_data\"].property_ga_already_fired=1;utag.view(window[window.utag&&window.utag.udoname||\"utag_data\"]);utag.link({\"event_category\":\"cookie_law\",\"event_action\":\"accettazione esplicita\",\"gruppi_allow\":\"all\"},null,[5,62]);}},0);closePrompt();};var callPrefs=function(){console.log(\"callBack\");document.body.scrollTop=0;document.documentElement.scrollTop=0;utag.gdpr.showConsentPreferences();};var closePrompt=function(){var $privacy_prompt=document.getElementsByClassName(\"privacy_prompt\")[0];$privacy_prompt.style.display=\"none\";};if(document.addEventListener){$el.addEventListener(\"click\",callBack,false);$pref.addEventListener(\"click\",callPrefs,false);}else if(document.attachEvent){$el.attachEvent(\"click\",callBack);$pref.attachEvent(\"click\",callPrefs);}else{$el.onclick=callBack;$pref.onclick=callPrefs;}}());";utag.gdpr.consent_prompt.defaultLang="en";utag.gdpr.showExplicitConsent=function(_lang){var cn=document.getElementById("__tealiumGDPRecStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRecModal");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRecScript");if(sn){sn.parentNode.removeChild(sn);}var dtc=utag.gdpr.getDeTokenizedContent(utag.gdpr.consent_prompt,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRecStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);mDiv.innerHTML=dtc.html;mDiv.id="__tealiumGDPRecModal";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRecScript";head.appendChild(scr);};
utag.gdpr.preferences_prompt.languages={"en":{"common_tokens":{"message":"Su leroymerlin.it potete decidere se accettare o meno i nostri cookie.","title":"Gestisci le impostazioni dei cookies su Leroymerlin.it","confirmation_button":"ACCETTA"},"categories":{"personalization":{"name":"","notes":""},"cdp":{"notes":"","name":""},"analytics":{"notes":"Questi cookie permettono di offrirti un'esperienza sul sito in base alla tua navigazione.","name":"Cookie di servizio e di profilazione"},"search":{"name":"","notes":""},"affiliates":{"notes":"Questi cookie consentono ai nostri partner pubblicitari di inviare messaggi mirati e personalizzati.","name":"Cookie pubblicitario"},"engagement":{"notes":"","name":""},"misc":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"crm":{"notes":"","name":""},"social":{"name":"","notes":""},"mobile":{"name":"","notes":""},"email":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"big_data":{"notes":"","name":""},"display_ads":{"notes":"","name":""}},"isDefault":"true","custom_tokens":{"labelcookiepolicy":"Che cos'è un cookie?","popupcookiepolicy":"https://www.leroymerlin.it/documentazione-regolamenti?generali#termini-cookies","company_logo_url":"","privacy_policy_url":""}}};utag.gdpr.preferences_prompt.content.css=".privacy_popin {      position: fixed;      width: 850px;      top: 100px;      left: 50%;      margin-left: -400px;      text-align: left;      border: 1px solid #CCC;      border-radius: 4px;      background-color: #FFF;      color: #444;      font-size: 14px;      z-index: 1002;     margin-left: -425px;    padding: 20px;         font-family: \"LeroyMerlinSansRegular\",sans-serif;    line-height: 1.6; }  .privacy_popin h3 {    margin: 0;    padding: 10px 0 0 20px;    font-size: 23px;    color: #000;}    .privacy_popin a {     color: #8b8a8a;    text-decoration: none; }  .privacy_popin p {    font-size: 16px;    padding: 10px 0 0 20px;    line-height: 1.3rem;    text-decoration: none;    margin: 0;}    .privacy_popin_content {      padding: 20px;      font-size: 0.9em;  }    .privacy_popin h1 {      font-size: 1.3em;      color: #444;      font-weight: 400;  }    .privacy_popin .option {      margin: 10px 0px;      color: #444;  }    .privacy_popin_footer {      padding: 0px 20px 20px 20px;      overflow: auto;  }    .privacy_popin_footer a {      font-size: 0.9em;  }    .privacy_popin_footer .button {      font-size: 1.0em;      border: 1px solid #CCC;      padding: 4px 15px;      min-width: 50px;      text-align: center;      border-radius: 4px;      background-color: #EEE;      box-shadow: inset 0px 1px 4px rgba(255, 255, 255, 1);      text-shadow: 1px 1px 3px rgba(255, 255, 255, 1);      color: #000;      cursor: pointer;  }    .privacy_popin .button.right {      float: right;  }    .privacy_popin .button.left {      float: left;  }    .privacy_popin > .close_btn_thick {      position: absolute;      display: block;      top: 10px;      right: 10px;      text-decoration: none;      text-shadow: 0 1px 0 #fff;      color: #777;      font: 14px/100% arial, sans-serif;      cursor: pointer;  }    .privacy_popin > .close_btn_thick:after {      content: \"\\2716\";   }    .privacy_popin .logo {      float: right;  }    .privacy_popin table {     border-collapse: collapse;     padding: 10px 0 0 12px;    margin: 0;    width: 90%;    padding-bottom: 0;    display: block;     }    .privacy_popin table tr {     text-align: left;    list-style: none;    margin: 10px 0;    padding: 10px 0;    border-bottom: 1px solid #ccc;    clear: both;    background-color: #FFFFFF;  }    .privacy_popin table th {      background-color: #FAFAFA;      border-bottom: 1px solid #EEE;      margin: 0px;      padding: 5px 8px;      font-weight: 400;      text-align: center;  }    .privacy_popin table td {      vertical-align: top;      padding: 10px 8px 5px 8px;  }    .privacy_popin table tr td:first-child {      min-width: 120px;      font-weight: 600;      color: #666;  }    .privacy_popin table tr td:last-child {      text-align: center;      min-width: 100px;  }    .privacy_popin input[type=\"checkbox\"].toggle {      opacity: 0;      position: absolute;      left: -99999px;  }    .privacy_popin input[type=\"checkbox\"].toggle + label {      height: 24px;      line-height: 24px;      background-color: #ccc;      padding: 0px 16px;      border-radius: 16px;      display: inline-block;      position: relative;      cursor: pointer;      -moz-transition: all 0.25s ease-in;      -o-transition: all 0.25s ease-in;      -webkit-transition: all 0.25s ease-in;      transition: all 0.25s ease-in;      -moz-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);      -webkit-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);      box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);  }    .privacy_popin input[type=\"checkbox\"].toggle + label:before, .privacy_popin input[type=\"checkbox\"].toggle + label:hover:before {      content: \" \";      position: absolute;     top: 4px;    left: 3px;    width: 16px;    height: 16px;     background: #fff;      z-index: 2;      -moz-transition: all 0.25s ease-in;      -o-transition: all 0.25s ease-in;      -webkit-transition: all 0.25s ease-in;      transition: all 0.25s ease-in;      -moz-border-radius: 14px;      -webkit-border-radius: 14px;      border-radius: 14px;  }    .privacy_popin input[type=\"checkbox\"].toggle + label .off, .privacy_popin input[type=\"checkbox\"].toggle + label .on {      color: #fff;  }    .privacy_popin input[type=\"checkbox\"].toggle + label .off {      margin-left: 20px;      display: inline-block;  }    .privacy_popin input[type=\"checkbox\"].toggle + label .on {      display: none;  }    .privacy_popin input[type=\"checkbox\"].toggle:checked + label .off {      display: none;  }    .privacy_popin input[type=\"checkbox\"].toggle:checked + label .on {      margin-right: 20px;      display: inline-block;  }    .privacy_popin input[type=\"checkbox\"].toggle:checked + label, .privacy_popin input[type=\"checkbox\"].toggle:focus:checked + label {      background-color: #5EAA14;  }    .privacy_popin input[type=\"checkbox\"].toggle:checked + label:before, .privacy_popin input[type=\"checkbox\"].toggle:checked + label:hover:before, .privacy_popin input[type=\"checkbox\"].toggle:focus:checked + label:before, .privacy_popin input[type=\"checkbox\"].toggle:focus:checked + label:hover:before {     background-position: 0 0;    top: 4px;    left: 100%;    margin-left: -19px; }   .privacy_popin input[type=\"checkbox\"].toggle + label {     overflow: hidden;     text-overflow: ellipsis;     max-height: 24px;        width: 10px;        height: 25px;     }     #preferences_prompt_submit {    background-color: #78BE20;    -webkit-appearance: none;    padding: 10px;    border-radius: 5px;    border: 0;    color: white;    font-size: 16px;    text-decoration: none;    display: block;    width: 200px;    margin: 30px auto 0 auto;    cursor: pointer;    text-align: center;}     #js-privacy_overlay {    display: none;    position: fixed;    top: 0;    left: 0;    width: 100%;    height: 100%;    opacity: .9;    background-color: black;    z-index: 1001;}@media (max-width: 600px){.privacy_popin {    width: 100%;    margin-left: 0;    margin-top: 0;    left: 0;    padding: 0;    height: 100%;    top: 0;    z-index: 9999999;}}@media (max-width: 600px){.privacy_popin_content {    padding: 20px;}}@media (max-width: 600px){.privacy_popin td {    width: 80%;    display: table-cell;}}@media (max-width: 600px){#privacy_popin h3 {    padding: 0 20px;}}";utag.gdpr.preferences_prompt.content.html="<div class=\"privacy_popin consent_preferences\">  <div class=\"privacy_popin_content\">    <h3>{{title}}</h3>    <p>{{message}}</p>    <p><a href=\"{{popupcookiepolicy}}\" >{{labelcookiepolicy}}</a></p>    <br>    <table class=\"table_privacy_popin\">      <tr>        <td>{{category_analytics_title}}: {{category_analytics_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat1\"/>          <label for=\"toggle_cat1\"></label>        </td>      </tr>      <tr>        <td>{{category_affiliates_title}}: {{category_affiliates_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat2\"/>          <label for=\"toggle_cat2\"> </label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_display_ads_title}}</td>        <td>{{category_display_ads_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat3\"/>          <label for=\"toggle_cat3\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_search_title}}</td>        <td>{{category_search_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat4\"/>          <label for=\"toggle_cat4\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_email_title}}</td>        <td>{{category_email_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat5\"/>          <label for=\"toggle_cat5\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_personalization_title}}</td>        <td>{{category_personalization_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat6\"/>          <label for=\"toggle_cat6\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_social_title}}</td>        <td>{{category_social_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat7\"/>          <label for=\"toggle_cat7\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_big_data_title}}</td>        <td>{{category_big_data_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat8\"/>          <label for=\"toggle_cat8\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_misc_title}}</td>        <td>{{category_misc_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat9\"/>          <label for=\"toggle_cat9\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_cookiematch_title}}</td>        <td>{{category_cookiematch_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat10\"/>          <label for=\"toggle_cat10\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr style=\"display:none\">        <td>{{category_cdp_title}}</td>        <td>{{category_cdp_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat11\"/>          <label for=\"toggle_cat11\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_mobile_title}}</td>        <td>{{category_mobile_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat12\"/>          <label for=\"toggle_cat12\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_engagement_title}}</td>        <td>{{category_engagement_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat13\"/>          <label for=\"toggle_cat13\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_monitoring_title}}</td>        <td>{{category_monitoring_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat14\"/>          <label for=\"toggle_cat14\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>      <tr  style=\"display:none\">        <td>{{category_crm_title}}</td>        <td>{{category_crm_description}}</td>        <td>          <input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat15\"/>          <label for=\"toggle_cat15\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>        </td>      </tr>    </table>  </div>  <div class=\"privacy_popin_footer\">    <div id=\"preferences_prompt_submit\"> {{confirmation_button}}</div>  </div>  <div class=\" close_btn_thick\"></div></div><div id=\"js-privacy_overlay\" style=\"display: block;\"></div>";utag.gdpr.preferences_prompt.content.js="(function preferences_prompt(){var $el=document.getElementById(\"preferences_prompt_submit\"),$closeBtn=document.getElementsByClassName(\"close_btn_thick\")[0],$body=document.getElementsByClassName(\"consent_preferences\")[0],reg_match=/\\d+$/,i;var callBack=function(){var inputs=$body.getElementsByClassName(\"toggle\"),cats={};for(var i=0;i<inputs.length;i++){var obj=inputs[i];cats[obj.id.match(reg_match)[0]]=obj.checked?1:0;}var $privacy_prompt_overlay=document.getElementsByClassName(\"privacy_prompt\")[0];if($privacy_prompt_overlay){$privacy_prompt_overlay.style.display=\"none\";}closePrompt();utag.gdpr.setPreferencesValues(cats);setTimeout(function(){if(window.utag&&window.utag.udoname||window.utag_data){window[\"utag_data\"].page_load=0;window[\"utag_data\"].property_ga_already_fired=1;utag.view(window[window.utag&&window.utag.udoname||\"utag_data\"]);var gruppi=[];var gruppo1=cats[\"1\"]===1||cats[\"1\"]===\"1\"?\"SI\":\"NO\";var gruppo2=cats[\"2\"]===1||cats[\"2\"]===\"1\"?\"SI\":\"NO\";gruppi.push(\"GR1:\"+gruppo1);gruppi.push(\"GR2:\"+gruppo2);utag.link({\"event_category\":\"cookie_law\",\"event_action\":\"accettazione gruppi esplicita\",\"gruppi_allow\":gruppi.join(\" - \")},null,[5,62]);}},0);};var closePrompt=function(){var $privacy_prompt=document.getElementsByClassName(\"consent_preferences\")[0];var $jsprivacy_overlay=document.getElementById(\"js-privacy_overlay\");$privacy_prompt.style.display=\"none\";$jsprivacy_overlay.style.display=\"none\";};var consentState=utag.gdpr.getConsentState();if(typeof consentState===\"number\"){for(i=0;i<utag.gdpr.getCategories().length;i++){document.getElementById(\"toggle_cat\"+(i+1)).checked=(consentState===1);}}else{for(i=0;i<consentState.length;i++){if(consentState[i].ct!==\"1\"){continue;}document.getElementById(\"toggle_cat\"+(i+1)).checked=true;}}if(document.addEventListener){$el.addEventListener(\"click\",callBack,false);$closeBtn.addEventListener(\"click\",closePrompt,false);}else if(document.attachEvent){$el.attachEvent(\"click\",callBack);$closeBtn.attachEvent(\"click\",closePrompt);}else{$el.onclick=callBack;$closeBtn.onclick=closePrompt;}}());";utag.gdpr.preferences_prompt.defaultLang="en";utag.gdpr.showConsentPreferences=function(_lang){try{if(utag.gdpr.preferences_prompt.noShow){return;}var cn=document.getElementById("__tealiumGDPRcpStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRcpPrefs");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRcpPrefsScript");if(sn){sn.parentNode.removeChild(sn);}var dtc=utag.gdpr.getDeTokenizedContent(utag.gdpr.preferences_prompt,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRcpStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);mDiv.innerHTML=dtc.html;mDiv.id="__tealiumGDPRcpPrefs";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRcpPrefsScript";head.appendChild(scr);}catch(e){utag.DB(e);}};


    utag.track_old = utag.track;
utag.track = function(a, b, c, d) {
    if (typeof a == "string") a = {
        event: a,
        data: b,
        cfg: {
            cb: c,
            uids: d
        }
    };
    if (a.event === "update_consent_cookie" && b.consent_categories) {
        utag.gdpr.updateConsentCookie(b.consent_categories);
    } else {
        utag.gdpr.refreshCookie();
        return utag.track_old.apply(this, arguments);
    }
};
utag.loader.OU_old = utag.loader.OU;
utag.loader.OU = function() {
    utag.loader.OU_old();
    utag.gdpr.applyConsentState();
};

if (utag.gdpr.preferences_prompt.single_cookie) {
    window.utag_cfg_ovrd = window.utag_cfg_ovrd || {};
    window.utag_cfg_ovrd.nocookie = true;
}
if (!utag.gdpr.consent_prompt.isEnabled && utag.gdpr.getConsentState() == 0) {
    utag.gdpr.setAllCategories(utag.gdpr.preferences_prompt.defaultState, !0);
}
  if(typeof utag_cfg_ovrd!='undefined'){for(var i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[i]=utag_cfg_ovrd[i]};
  utag.loader.PINIT = function(a,b,c){
    utag.DB("Pre-INIT");
    if (utag.cfg.noload) {
      return;
    }

    try {
      // Initialize utag.data
      this.GET();
      // Even if noview flag is set, we still want to load in tags and have them ready to fire
      // FUTURE: blr = "before load rules"
      if(utag.handler.RE('view',utag.data,"blr")){
        utag.handler.LR(utag.data);
      }
      
    }catch(e){utag.DB(e)};
    // process 'blocking' tags (tags that need to run first)
    a=this.cfg;
    c=0;
    for (b in this.GV(a)) {
      // external .js files (currency converter tag) are blocking
      if(a[b].block == 1 || (a[b].load>0 && (typeof a[b].src!='undefined'&&a[b].src!=''))){
        a[b].block = 1;
        c=1;
        this.bq[b]=1;
      }
    }
    if(c==1) {
      for (b in this.GV(a)) {
        if(a[b].block){
          // handle case of bundled and blocking (change 4 to 1)
          // (bundled tags that do not have a .src should really never be set to block... they just run first)
          a[b].id=b; 
          if(a[b].load==4)a[b].load=1; 
 	  a[b].cb=function(){
            var d=this.uid;
            utag.loader.cfg[d].cbf=1;
            utag.loader.LOAD(d)
          };
          this.AS(a[b]);
        }
      }
    }
    if(c==0)this.INIT();
  };
  utag.loader.INIT = function(a, b, c, d, e) {
    utag.DB('utag.loader.INIT');
    if (this.ol == 1) return -1;
    else this.ol = 1;
    // The All Tags scope extensions run after blocking tags complete
    // The noview flag means to skip these Extensions (will run later for manual utag.view call)
    if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr"); 

    utag.rpt.ts['i'] = new Date();
     
    d = this.cfgsort;
    // TODO: Publish engine should sort the bundled tags first..
    for (a=0;a<d.length;a++){
      e = d[a];
      b = this.cfg[e];
      b.id = e;
      // s2s (ServerStream) tags do not load client-side
      if(b.block != 1 && b.s2s != 1){
        // do not wait if the utag.cfg.noview flag is set and the tag is bundled
        if (utag.loader.bk[b.id] || ((utag.cfg.readywait||utag.cfg.noview) && b.load==4)){
          this.f[b.id]=0;
          utag.loader.LOAD(b.id)
        }else if (b.wait == 1 && utag.loader.rf == 0) {
	  utag.DB('utag.loader.INIT: waiting ' + b.id);
          this.wq.push(b)
          this.f[b.id]=2;
        }else if (b.load>0){
	  utag.DB('utag.loader.INIT: loading ' + b.id);
	  this.lq.push(b);
          this.AS(b);
        }
      }
    }
          
    if (this.wq.length > 0) utag.loader.EV('', 'ready', function(a) {
      if(utag.loader.rf==0){
        utag.DB('READY:utag.loader.wq');
        utag.loader.rf=1;
        utag.loader.WQ();
      }
    });
    else if(this.lq.length>0)utag.loader.rf=1;
    else if(this.lq.length==0)utag.loader.END();

    return 1
  };
  utag.loader.EV('', 'ready', function(a) {if(utag.loader.efr!=1){utag.loader.efr=1;try{if(!utag.gdpr.consent_prompt.noShow){if(!utag.gdpr.getConsentState()){if(utag.cond[30]&&utag.cond[33]){utag.gdpr.showExplicitConsent();}else{utag.gdpr.consent_prompt.isEnabled=false;utag.view(utag.data);}}}}catch(e){utag.DB(e);}try{ try{ if(1){
if (utag.helpers.techtype() === "react") {
	var menuofferte = document.body.querySelectorAll("a[href='/offerte']");
	for (var i = 0; i < menuofferte.length; i++) {
		var vocemenu = menuofferte[i].addEventListener('mousedown', function (event) {
				utag.link({
					event_category: "menu",
					event_action: "offerte e proposte",
					event_label: "offerte e proposte"
				});
			});
	}
} else {
	jQuery(document).on("mousedown", "a[href='/offerte']",
		function () {
		utag.link({
			event_category: "menu",
			event_action: "offerte e proposte",
			event_label: "offerte e proposte"
		});
		//console.log("www"+label.toLowerCase());
	});
}

} } catch(e){ utag.DB(e) }  }catch(e){utag.DB(e)};
try{ try{ if(1){
jQuery(document).on("mousedown", 
		"a[href='/promo-consegna-1-euro'], a[href='/outlet'], a[href='/offerte/online-e-in-negozio'], a[href='/offerte/proposte-imperdibili']", 
		function(){

		var label = jQuery(this).find('span[class*="text-"]').text();
		  if(label!=""){
			utag.link({
				event_category:"menu", 
			  event_action:"offerte e proposte",
				event_label:label.toLowerCase()
			});
		  }
			//console.log("www"+label.toLowerCase());
		}
);
} } catch(e){ utag.DB(e) }  }catch(e){utag.DB(e)};
try{ if(typeof utag.runonce=='undefined')utag.runonce={};utag.jdh=function(h,i,j,k){h=utag.jdhc.length;if(h==0)window.clearInterval(utag.jdhi);else{for(i=0;i<h;i++){j=utag.jdhc[i];k=jQuery(j.i).is(":visible")?1:0;if(k!=j.s){if(j.e==(j.s=k))jQuery(j.i).trigger(j.e?"afterShow":"afterHide")}}}};utag.jdhi=window.setInterval(utag.jdh, 250);utag.jdhc=[]; if(1){
if(typeof utag.runonce[167]=='undefined'){utag.runonce[167]=1;jQuery(document.body).on('mousedown','#value-proposition-banner div a', function(e){
var path = jQuery("#value-proposition-banner div a").attr("href");
if (path) {
	var pathA = path.split("/");
	pathA.shift();
	var category = "banner";
	var action = "click on top";
	var label = pathA.join("_");
	utag.link({
		event_category: category,
		event_action: action,
		event_label: label
	})
}
//else {
//	console.log("no href")
//}


});}}  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[169]=='undefined'){utag.runonce[169]=1;jQuery(document.body).on('mousedown','div.lm-product-slider-container .lm-arrows-slider.slick-arrow', function(e){utag.link({ "event_category":'slider_cross-sell',"event_action":utag.data["prod_category"],"event_label":utag.data["prod_id"] })});}}  }catch(e){utag.DB(e)};
try{  if((utag.data['dom.pathname']=='/offerte'&&/dev|qa/.test(utag.data['ut.env']))){
if(typeof utag.runonce[171]=='undefined'){utag.runonce[171]=1;jQuery(document.body).on('click','.banner a', function(e){utag.link({ "event_category":'AB test offerte',"event_action":jQuery(this).attr('href') })})}}  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[176]=='undefined'){utag.runonce[176]=1;jQuery(document.body).on('mousedown','#button-agenda', function(e){
	
	var firedEvent =false
	if(jQuery("#store-agenda option:selected") && 
		jQuery("#store-agenda option:selected").text().trim()!="Seleziona un negozio*"){
		
		var storesel = jQuery("#store-agenda option:selected").text();
		var checkprivacy = document.getElementById("acceptCondition");
		if (checkprivacy) {
			if(checkprivacy.checked){
				firedEvent =true;
			}
		}else{
			firedEvent =true;
		}
	}
	if(firedEvent){
		utag.link({
			event_category: "apertura_ristrutturazione_bagno",
			event_action: "richiesta_form",
			event_label: storesel
		});
	}
});}}  }catch(e){utag.DB(e)};
try{ try{ if(1){
var popupDisplay = true;
//if (utag.helpers.cookieField("CONSENTMGR").indexOf("consent:true") == -1) {
if (utag.helpers.cookieField("CONSENTMGR") === "") {
	document.addEventListener("mousedown", function (e) {
		var popupprompt = e.target.offsetParent.className=="privacy_prompt";
		var popuppopin = e.target.offsetParent.className=="privacy_popin consent_preferences"
		var tablepopopuppopin = e.target.offsetParent.className=="table_privacy_popin";
		if (popupDisplay && !popupprompt && !popuppopin && !tablepopopuppopin){
			callBackLis();		
		}
	});
 	document.addEventListener("wheel", function (e) {
		var popuppopindisplay = false;
		if(document.getElementsByClassName("privacy_popin consent_preferences")[0]){
				if(document.getElementsByClassName("privacy_popin consent_preferences")[0].style.display=="none"){
					popuppopindisplay = true;
				}
		}else{
			popuppopindisplay = true;
		}
		if (popupDisplay && popuppopindisplay) {callBackLis();};
	});
}
var callBackLis = function () {
    if (utag.helpers.cookieField("CONSENTMGR") === "") {
    	console.log("callBackLis");
    	utag.gdpr.setConsentValue(1);
    	popupDisplay = false;
    	setTimeout(function () {
    		if (window.utag && window.utag.udoname || window.utag_data) {
    			window["utag_data"].page_load = 0;
    			window["utag_data"].property_ga_already_fired = 1;
    			utag.view(window[window.utag && window.utag.udoname || "utag_data"]);
    			utag.link({"event_category": "cookie_law", "event_action": "accettazione implicita", "gruppi_allow": "all", "event_non_interaction": "1"}, null, [5, 62]);
    		}
    	}, 0);
    	closePromptLis();
    }
};
var closePromptLis = function () {
	var $privacy_prompt = document.getElementsByClassName("privacy_prompt")[0];
	$privacy_prompt.style.display = "none";
};
} } catch(e){ utag.DB(e) }  }catch(e){utag.DB(e)};
try{ try{ if(1){
if(utag.helpers.is_device_mobile()){
	if (utag.helpers.techtype() === "react") {
		var spanTags = document.getElementsByTagName("span");
		var searchText = "menu";
		var found;
		for (var i = 0; i < spanTags.length-1; i++) {
		  if (spanTags[i].textContent.toLocaleLowerCase() == searchText) {
			found = spanTags[i];
			//console.log(found);
			break;
		  }
		}
		found.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "menu",
				event_action: "mobile - click",
				event_label: utag.data.page_name.join('/')
			});
		});
				
	} else {
		jQuery(document).on("mousedown", "div.menu-label span",
			function () {
			utag.link({
				event_category: "menu",
				event_action: "mobile - click",
				event_label: utag.data.page_name.join('/')
			});
			
		});
	}
}
} } catch(e){ utag.DB(e) }  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[197]=='undefined'){utag.runonce[197]=1;jQuery(document.body).on('mousedown','div.btn-purchase > button.btn.btn-default.do-purchase', function(e){utag.link({ "event_category":'checkout_pagamento',"event_action":'4:info - submit',"event_label":'click su acquista' })});}}  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[204]=='undefined'){utag.runonce[204]=1;jQuery(document.body).on('mousedown','#email', function(e){utag.link({ "event_category":'interazione login',"event_action":'email',"event_label":window.location.pathname })});}}  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[205]=='undefined'){utag.runonce[205]=1;jQuery(document.body).on('mousedown','#password', function(e){utag.link({ "event_category":'interazione login',"event_action":'password',"event_label":window.location.pathname })});}}  }catch(e){utag.DB(e)};
try{ try{ if(1){

if (!window.block_track_slider_product) {
	if (utag.helpers.techtype() === "react") {
		var slider_left = document.getElementsByName("slider-correlati-arrow-left")[0];
		slider_left.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "slider_cross-sell",
				event_action: utag.data["prod_category"],
				event_label: utag.data["prod_id"]
			});
		});
		var slider_right = document.getElementsByName("slider-correlati-arrow-right")[0];
		slider_right.addEventListener('mousedown', function (event) {
			utag.link({
				event_category: "slider_cross-sell",
				event_action: utag.data["prod_category"],
				event_label: utag.data["prod_id"]
			});
		});
	}
	window.block_track_slider_product = true;
}


} } catch(e){ utag.DB(e) }  }catch(e){utag.DB(e)};
try{  if(1){
if(typeof utag.runonce[266]=='undefined'){utag.runonce[266]=1;jQuery(document.body).on('mousedown','a[href*="volantini.leroymerlin.it"]', function(e){
	var nomevolantino = jQuery(this).attr('href').replace("https://volantini.leroymerlin.it/", "")
		nomevolantino = nomevolantino.replace("/", "");
	utag.link({
		event_category: "volantino_negozio più vicino",
		event_action: jQuery(this).text(),
		event_label: nomevolantino
	});
});}}  }catch(e){utag.DB(e)};}})

  if(utag.cfg.readywait || utag.cfg.waittimer){
    utag.loader.EV('', 'ready', function(a) {
      if(utag.loader.rf==0){
        utag.loader.rf=1;
        utag.cfg.readywait=1;
        utag.DB('READY:utag.cfg.readywait');
        setTimeout(function(){utag.loader.PINIT()}, utag.cfg.waittimer || 1);
      }
    })
  }else{
    utag.loader.PINIT()
  }
}

