/*!
 * Tooso Analytics Client Library ta.js version 1.0.11.
 * Copyright Fabio Melen and Tooso Inc.
 * Released under the Apache License 2.0 <https://www.apache.org/licenses/LICENSE-2.0>
 * Inspired by Google Analytics Measurement Protocol v1 <https://developers.google.com/analytics/devguides/collection/protocol/v1>
 * 
 */
(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=3)})([function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),f='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(5),j=c(2),i=c(1),k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),l=new j.DataSet,m=j.DataSet,n=function(){function a(){d(this,a),this.data=new m,this.plugins_=new m}return g(a,[{key:'get',value:function(a){return this.data.get(a)}},{key:'set',value:function(a,b,c){var d=k.get(a);return d||(d=(0,i.tryCustomParam)(a)),(d&&d.mutable||!d)&&this.data.set(a,b,c),this}},{key:'send',value:function(b){if(/^(pageview|event)$/.test(b)){for(var c={},d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];if('pageview'===b)for(var g in c=a.getParams(e,[k.page]),c)this.data.set(g,c[g]);else if('event'===b)for(var g in c=a.getParams(e,[k.eventCategory,k.eventAction,k.eventLabel,k.eventValue,k.hitCallback]),c)this.data.set(g,c[g],!0);var h=this.get(k.validationTask),i=this.get(k.buildHitTask),l=this.get(k.sendHitTask);this.data.set(k.hitType,b,!0).set(k.currentMillis,1*new Date,!0).set(k.cacheBuster,''+(0,j.uuidv4)(),!0);var m='function'==typeof h&&h(this);m&&('function'==typeof i&&i(this),'function'==typeof l&&l(this)),this.data.tmp={}}}},{key:'require',value:function(a){if(a||!this.plugins_.get(a)){var b=window.taplugins[a.toUpperCase()];b&&this.plugins_.set(a,new b(this))}}}],[{key:'getParams',value:function(b,c){for(var d,e={},a=0;a<b.length;a++)if(d=b[a],'string'==typeof d)e[c[a]]=d;else if('object'===('undefined'==typeof d?'undefined':f(d))){for(var g in d)e[g]=d[g];return e}return e}},{key:'run',value:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var g=c.shift();if('string'==typeof g){var h=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/.exec(g),i=e(h,4),j=i[1],m=i[2],n=i[3];if('create'===n)this[n].apply(a,c);else{var o=l.get(j||k.get(k.name).defaultValue+'');if(!o)return;var p=o.plugins_.get(m);p&&'object'===('undefined'==typeof p?'undefined':f(p))&&'function'==typeof p[n]?p[n].apply(p,c):'send'===n?o.send.apply(o,[c.shift()+''].concat(c)):'set'===n?o.set.apply(o,[c.shift()+'',c.shift()+'',!!c.shift()].concat(c)):'require'===n&&o.require.apply(o,[c.shift()+''].concat(c))}}}},{key:'create',value:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=this.getParams(c,[k.trackingId,k.cookieDomain,k.name]),f=e[k.name]||k.get(k.name).defaultValue;if('string'==typeof f&&!l.get(f)&&e[k.trackingId]){var g=new a;for(var j in e)g.data.set(j,e[j]);(0,h.loadTask)(g);var i=void 0===g.get(k.ec)?k.get('ec').defaultValue:g.get(k.ec);i&&g.require('ec'),l.set(f,g)}}},{key:'getAll',value:function(){var b=[];return l.map(function(a,c){b.push(c)}),b}},{key:'getByName',value:function(a){return l.get(a)}}]),a}();b.default=n},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0;return j.set(a,new h(a,b,c,d)),a}function f(a,b,c){return e(a,b,c,!1)}Object.defineProperty(b,'__esModule',{value:!0}),b.tryCustomParam=b.taInstanceId=b._referrer=b.alwaysSendReferrer=b.clientId=b.currentMillis=b.apiVersion=b.allowAnchor=b.name=b.trackingId=b.currencyCode=b.ec=b.cacheBuster=b.page=b.title=b.validationTask=b.sendHitTask=b.buildHitTask=b.hitPayload=b.hitCallback=b.hitType=b.debug=b.cookieName=b.cookieUpdate=b.cookieExpires=b.cookiePath=b.cookieDomain=b.userId=b.eventValue=b.eventLabel=b.eventAction=b.eventCategory=b.viewportparams=b.screenColor=b.screenResolution=b.encoding=b.language=b.referrer=b.location=void 0,b.get=function(a){return j.get(a)},b.map=function(a){return j.map(a)};var g=c(2),h=function a(b,c,e,f){d(this,a),this.name=b,c&&(this.abbr=c),e&&(this.defaultValue=e),this.mutable=!!f},j=new g.DataSet,k=[],i=b.location=e('location','dl'),l=b.referrer=e('referrer','dr'),m=b.language=e('language','ul'),n=b.encoding=e('encoding','de'),o=b.screenResolution=e('screenResolution','sr'),p=b.screenColor=e('screenColor','sd'),q=b.viewportparams=e('viewportSize','vp'),r=b.eventCategory=e('eventCategory','ec'),s=b.eventAction=e('eventAction','ea'),t=b.eventLabel=e('eventLabel','el'),u=b.eventValue=e('eventValue','ev'),v=b.userId=e('userId','uid'),w=b.cookieDomain=e('cookieDomain'),x=b.cookiePath=e('cookiePath',void 0,'/'),y=b.cookieExpires=e('cookieExpires',void 0,63072E3),z=b.cookieUpdate=e('cookieUpdate',void 0,!0),A=b.cookieName=e('cookieName',void 0,'_ta'),B=b.debug=e('debug','debug'),C=b.hitType=e('hitType','t'),D=b.hitCallback=e('hitCallback',void 0,function(){}),E=b.hitPayload=e('hitPayload'),F=b.buildHitTask=e('buildHitTask'),G=b.sendHitTask=e('sendHitTask'),H=b.validationTask=e('validationTask'),I=b.title=e('title','dt'),J=b.page=e('page','dp',''),K=b.cacheBuster=e('cacheBuster','z'),L=b.ec=e('ec',void 0,!0),M=b.currencyCode=e('currencyCode','cu'),N=b.trackingId=f('trackingId','tid'),O=b.name=f('name',void 0,'t0'),P=b.allowAnchor=f('allowAnchor'),Q=b.apiVersion=f('apiVersion','v'),R=b.currentMillis=f('currentMillis','tm'),S=b.clientId=f('clientId','cid'),T=b.alwaysSendReferrer=f('alwaysSendReferrer',void 0,!0),U=b._referrer=f('_referrer',void 0),V=b.taInstanceId=f('taInstanceId','a');(function(a,b){k.push([new RegExp('^'+a+'$'),b])})('dimension([0-9]+)',function(a){return e(a[0],'cd'+a[1])});b.tryCustomParam=function(a){for(var b=0;b<k.length;++b){var c=k[b],d=c[0].exec(a);if(d)return j.get(c[1](d))}}},function(a,b){'use strict';function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.encodeURIComponentFn=function(a){return encodeURIComponent instanceof Function?encodeURIComponent(a):a.toString()};var e=window.crypto||window.msCrypto,f=function(a){if('undefined'!=typeof e&&e.getRandomValues)return e.getRandomValues(a);for(var b=0,c=0;b<a.length;b++)0==(3&b)&&(c=4294967296*Math.random()),a[b]=255&c>>>((3&b)<<3);return a},g=b.uuidv4=function b(c){return c?(+c^f(new Uint8Array(1))[0]%16>>+c/4).toString(16):'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,b)},h=b.DataSet=function(){function a(){c(this,a),this.keys=[],this.values={},this.tmp={}}return d(a,[{key:'set',value:function(a,b,c){return this.keys.push(a),c?this.tmp[':'+a]=b:this.values[':'+a]=b,this}},{key:'get',value:function(a){return this.tmp.hasOwnProperty(':'+a)?this.tmp[':'+a]:this.values[':'+a]}},{key:'map',value:function(a){for(var b=0;b<this.keys.length;b++){var c=this.keys[b],d=this.get(c);void 0!=d&&null!=d&&a(c,d)}}}]),a}();b.googleCampaignFragments=['utm_id','utm_campaign','utm_source','utm_medium','utm_term','utm_content','gclid','dclid','gclsrc']},function(a,b,c){'use strict';var d=c(4),e=function(a){return a&&a.__esModule?a:{default:a}}(d);e.default.setup('ta')},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,'__esModule',{value:!0});var e=c(0),f=d(e),g=c(9),h=d(g),j=function(){return f.default.run.apply(f.default,arguments)};j.getAll=function(){return f.default.getAll()},j.getByName=function(a){return f.default.getByName(a)},j.setup=function(a){if(window[a]&&!j.loaded){var b=window[a];j.loaded=!0,j.L=b.l;for(var c=b&&b.q||[],d=f.default,e=0;e<c.length;e++)d.run.apply(d,c[e]);window[a]=j}},b.default=j},function(a,b,c){'use strict';function d(a){var b=a.get(f.cookieName)||f.get(f.cookieName).defaultValue,d=a.get(f.cookieDomain),e=1E3*+(a.get(f.cookieExpires)||f.get(f.cookieExpires).defaultValue);if('string'==typeof b){for(var g,h=void 0,k=new RegExp('^\\s*'+b+'=\\s*TA.(.*)$'),l=document.cookie.split(';'),c=0;c<l.length;c++)if(g=l[c].match(k),g&&g[1]){h=g[1];break}return void 0===h&&(h=(0,j.uuidv4)()),setTimeout(function(){document.cookie=b+'='+(0,j.encodeURIComponentFn)('TA.'+(h+''))+';domain='+(d+';path=/;expires=')+new Date(Date.now()+e).toUTCString()},0),h}}Object.defineProperty(b,'__esModule',{value:!0}),b.loadTask=function(a){if(a.data.set(f.apiVersion,1).set(f.location,location.protocol+'//'+location.hostname+(0===location.pathname.indexOf('/')?location.pathname:'/'+location.pathname)+location.search).set(f.screenResolution,n.width+'x'+n.height).set(f.screenColor,n.colorDepth+'-bit').set(f.encoding,document.characterSet).set(f.language,o.language||o.browserLanguage).set(f.title,document.title).set(f.validationTask,i.validationTask).set(f.buildHitTask,k.buildHitTask).set(f.sendHitTask,m.sendHitTask).set(f.taInstanceId,(0,j.uuidv4)()),(a.data.get(f.alwaysSendReferrer)||void 0===a.data.get(f.alwaysSendReferrer)&&f.get(f.alwaysSendReferrer).defaultValue)&&a.data.set(f.referrer,document.referrer),p&&a.get(f.allowAnchor)&&p.hash){var b=p.hash.split(/[?&#]+/).reduce(function(b,a){return j.googleCampaignFragments.find(function(b){return 0===a.indexOf(b)})&&b.push(a),b},[]),c=a.get(f.location);b.length&&'string'==typeof c&&a.data.set(f.location,c+'#'+b.join('&'))}if('auto'===a.data.get(f.cookieDomain)){var e=(''+p.hostname).split('.'),g=2<e.length?e.slice(e.length-2).join('.'):''+p.hostname;a.data.set(f.cookieDomain,g)}a.data.set(f.clientId,a.data.get(f.clientId)||d(a))};var e=c(1),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=c(0),h=function(a){return a&&a.__esModule?a:{default:a}}(g),j=c(2),i=c(6),k=c(7),m=c(8),o=window.navigator,n=window.screen,p=document.location},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.validationTask=function(a){return a.get(e.apiVersion)&&a.get(e.trackingId)&&a.get(e.clientId)&&a.get(e.hitType)&&('event'!==a.get(e.hitType)||a.get(e.eventCategory)&&a.get(e.eventAction))};var d=c(1),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=c(0),g=function(a){return a&&a.__esModule?a:{default:a}}(f)},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.buildHitTask=function(a){if('pageview'===a.get(e.hitType)&&a.get(e._referrer)&&a.data.set(e.referrer,a.get(e._referrer)),'pageview'===a.get(e.hitType)&&(a.data.set(e.title,document.title),a.get(e.page))){var b=a.get(e.page).replace(/^\/?(.*)$/,'/$1');a.data.set(e.location,''+a.get(e.location).split(/\//).slice(0,3).join('/')+b),a.data.set(e._referrer,a.get(e.location))}var c={};a.data.map(function(a,b){if('&'===a[0])c[a.substring(1,a.length)]=b;else{var d=e.get(a);d.abbr&&b!==d.defaultValue&&(c[d.abbr]=b)}});var d=[];for(var f in c)('string'==typeof c[f]||'number'==typeof c[f])&&d.push(f+'='+(0,h.encodeURIComponentFn)(c[f]));a.data.set(e.hitPayload,d.join('&'),!0),a.get(e.debug)&&console&&'function'==typeof console.log&&console.log('tooso debug',c)};var d=c(1),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=c(0),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=c(2)},function(a,b,c){'use strict';function d(a,b,c){var d=document.createElement('img');d.width=1,d.height=1,d.src=a+'?'+b;var e=function(){d.onload=null,d.onerror=null,'function'==typeof c&&c()};d.onload=e,d.onerror=e}Object.defineProperty(b,'__esModule',{value:!0}),b.sendHitTask=function(a){var b=a.get(f.hitPayload),c=a.get(f.hitCallback);b&&'string'==typeof b&&'string'==typeof i&&d(i,b,c)};var e=c(1),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=c(0),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i='https://analytics.api.tooso.ai/collect'},function(a,b,c){'use strict';function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function f(a,b,c,d){var e=d,f=a.data.get(c),g=a.data.get('lists');g&&'object'===('undefined'==typeof g?'undefined':j(g))||(g={}),Array.isArray(f)||(f=[]);for(var h,l=0;l<f.length;l++)if(h=f[l],h&&'object'===('undefined'==typeof h?'undefined':j(h))){if('impressions'===c){var i=+h.listIndex+1;b.set('&il'+i+'nm',h.list,!0),e='il'+i+d}for(var m in h)o[m]?b.set('&'+e+(l+1)+o[m],h[m],!0):'list'!=m&&b.set('&'+e+(l+1)+m.replace(/\s+/,'-').toLowerCase(),h[m],!0)}}function g(a,b){return function(c){f(a,c,'products','pr'),f(a,c,'impressions','pi');var d=a.data.get('action');if('object'===('undefined'==typeof d?'undefined':j(d)))for(var e in d)c.set('&'+p[e],d[e],!0);'function'==typeof b&&b(c),a.data.tmp={}}}Object.defineProperty(b,'__esModule',{value:!0});var h=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},i=c(2),k=c(0),l=function(a){return a&&a.__esModule?a:{default:a}}(k),m=c(1),n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(m),o={id:'id',name:'nm',brand:'br',category:'ca',variant:'va',position:'ps',price:'pr',quantity:'qt',coupon:'cc'},p={action:'pa',list:'pal',listSource:'pls',id:'ti',revenue:'tr',tax:'tt',shipping:'ts',coupon:'tcc',affiliation:'ta'},q=function(){function a(b){if(e(this,a),this.data=new i.DataSet,this.tracker=b,b.get&&b.set){var c=b.get(n.buildHitTask);b.set(n.buildHitTask,g(this,c))}}return h(a,[{key:'addImpression',value:function(a){var b=l.default.getParams([a],Object.keys(o)),c=b.list;if(c&&'string'==typeof c){var d=this.data.get('impressions')||[];if(Array.isArray(d)){for(var e,f=[],g=0;g<d.length;g++)if(e=d[g],e&&e.list&&e.list!==b.list)f.push(e.list);else{b.listIndex=g;break}void 0===b.listIndex&&(b.listIndex=0),d.push(b),this.data.set('impressions',d,!0)}}}},{key:'addProduct',value:function(a){var b=l.default.getParams([a],Object.keys(o)),c=this.data.get('products')||[];Array.isArray(c)&&(c.push(b),this.data.set('products',c,!0))}},{key:'setAction',value:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];var f=l.default.getParams([a].concat(d(c)),Object.keys(p)),g=this.data.get('action')||{};if(g&&'object'===('undefined'==typeof g?'undefined':j(g))){for(var h in f)g[h]=f[h];this.data.set('action',g,!0)}}}]),a}();window.taplugins=window.taplugins||{},window.taplugins.EC=q,b.default=q}]);